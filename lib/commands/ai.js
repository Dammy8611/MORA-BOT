const a0_0xbfb316=a0_0x4acf;function a0_0x4f18(){const _0x471cc1=['\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22','...','94624qUCsDR','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','msg','Error\x20extracting\x20commands:','users','\x0a\x0aUser:\x20','Rate\x20limit\x20error:','.\x0aUser\x20said:\x20\x22','parse','extendedTextMessage','\x20of\x20','map','join','\x0aCommands\x20used:\x20','string','3xnXlBo','[runCommand]\x20Resolved\x20to:','key','botName','raw','\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201‚Äì2\x20lines.','.ai\x20<prompt>',',\x20owned\x20by\x20','2351495rCCGOp','utf8','quotedMessage','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','Failed\x20to\x20process\x20your\x20request.','(command\x20ran\x20but\x20gave\x20no\x20output)','[runCommand]\x20Trying\x20to\x20resolve:','1601212hFlIXF','You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20‚Äî\x20keep\x20replies\x20short\x20and\x20energetic.\x20üéßüî•','role','run','Switched\x20to\x20key\x20','update','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','now','length','meta','secrets','Command\x20used\x20direct:true\x20‚Äî\x20skipping\x20summary\x20AI\x20reply','extractCommands:\x20Expected\x20array,\x20got:','text','direct','log','214046dOnlxB','\x22\x0aCommand\x20output:\x0a','response','getGenerativeModel','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','done','Error\x20with\x20current\x20API\x20key:','data','assistant','message','writeFileSync','3601220iPnoAO','command','readFileSync','../../utils/parseArgs','2741586priyET','keys','User:\x20','push','ownerName','commandsToRun\x20is\x20not\x20an\x20array:','gemini-2.5-flash','args','trim','.\x0aTime\x20now:\x20','toLocaleString','existsSync','user','stringify','./index','generateContent','‚öôÔ∏è\x20Running\x20/','apiKeys.txt','shift','[extractCommands]\x20Gemini\x20raw\x20output:\x0a','sendMessage','contextInfo','start','207AWDCSI','\x0a\x0aYou\x20are\x20','273641BAGJTF','filter','name','\x0aRespond\x20casually\x20and\x20helpfully:','pow','global','error','remoteJid','participant','isArray','replace','2RTxNRW','../../settings','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','../../utils/statusUpdater.js','split','ü§ñ\x20Thinking...'];a0_0x4f18=function(){return _0x471cc1;};return a0_0x4f18();}(function(_0x341586,_0x4a285c){const _0x1e6d6f=a0_0x4acf,_0x29ee39=_0x341586();while(!![]){try{const _0x227944=-parseInt(_0x1e6d6f(0x196))/0x1*(-parseInt(_0x1e6d6f(0x1a1))/0x2)+parseInt(_0x1e6d6f(0x1b8))/0x3*(parseInt(_0x1e6d6f(0x1c7))/0x4)+-parseInt(_0x1e6d6f(0x1c0))/0x5+-parseInt(_0x1e6d6f(0x1e6))/0x6+-parseInt(_0x1e6d6f(0x1d7))/0x7+-parseInt(_0x1e6d6f(0x1a9))/0x8*(-parseInt(_0x1e6d6f(0x194))/0x9)+parseInt(_0x1e6d6f(0x1e2))/0xa;if(_0x227944===_0x4a285c)break;else _0x29ee39['push'](_0x29ee39['shift']());}catch(_0x33618a){_0x29ee39['push'](_0x29ee39['shift']());}}}(a0_0x4f18,0x5508e));const fs=require('fs'),path=require('path'),{GoogleGenerativeAI}=require('@google/generative-ai'),{parseArgs}=require(a0_0xbfb316(0x1e5)),{resolveCommand}=require(a0_0xbfb316(0x18b)),{settings:botSettings}=require(a0_0xbfb316(0x1a2)),{StatusUpdater}=require(a0_0xbfb316(0x1a4)),API_KEYS_FILE=path[a0_0xbfb316(0x1b5)](__dirname,'..','..',a0_0xbfb316(0x1d1),a0_0xbfb316(0x18e));function loadApiKeys(){const _0x12e97f=a0_0xbfb316;if(!fs[_0x12e97f(0x188)](API_KEYS_FILE))throw new Error('apiKeys.txt\x20not\x20found');return fs[_0x12e97f(0x1e4)](API_KEYS_FILE,_0x12e97f(0x1c1))[_0x12e97f(0x1a5)](/\r?\n/)[_0x12e97f(0x197)](Boolean);}const apiKeys=loadApiKeys();let currentKeyIndex=0x0;function setupGenAI(){const _0x117a45=a0_0xbfb316,_0x2f840d=apiKeys[currentKeyIndex],_0x116ccf=new GoogleGenerativeAI(_0x2f840d);return _0x116ccf[_0x117a45(0x1da)]({'model':_0x117a45(0x1ec)});}let model=setupGenAI();function rotateKey(){const _0x15e1f4=a0_0xbfb316;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys['length'],model=setupGenAI(),console[_0x15e1f4(0x1d6)](_0x15e1f4(0x1cb)+(currentKeyIndex+0x1)+_0x15e1f4(0x1b3)+apiKeys['length']);}const persona=a0_0xbfb316(0x1c8),MEM_FILE=path['join'](__dirname,'..','..',a0_0xbfb316(0x1d1),'ai_memory.json'),REM_FILE=path[a0_0xbfb316(0x1b5)](__dirname,'..','..',a0_0xbfb316(0x1d1),'ai_remember.json'),loadJson=(_0xa54032,_0x39b002={})=>fs['existsSync'](_0xa54032)?JSON[a0_0xbfb316(0x1b1)](fs[a0_0xbfb316(0x1e4)](_0xa54032,a0_0xbfb316(0x1c1))):_0x39b002,saveJson=(_0x2714c4,_0x364123)=>fs[a0_0xbfb316(0x1e1)](_0x2714c4,JSON[a0_0xbfb316(0x18a)](_0x364123,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x21a56f,_0x372847,_0xcad70c)=>{const _0x2cdc67=a0_0xbfb316;if(!MEMORY[_0x21a56f])MEMORY[_0x21a56f]=[];MEMORY[_0x21a56f][_0x2cdc67(0x1e9)]({'role':_0x372847,'msg':_0xcad70c,'ts':Date[_0x2cdc67(0x1ce)]()});if(MEMORY[_0x21a56f][_0x2cdc67(0x1cf)]>MAX_MEMORY)MEMORY[_0x21a56f][_0x2cdc67(0x18f)]();saveJson(MEM_FILE,MEMORY);},getMemory=_0x5b4cf0=>(MEMORY[_0x5b4cf0]||[])['slice'](-MAX_MEMORY)[a0_0xbfb316(0x1b4)](_0x108777=>_0x108777[a0_0xbfb316(0x1c9)]+':\x20'+_0x108777[a0_0xbfb316(0x1ab)])[a0_0xbfb316(0x1b5)]('\x0a');async function runCommand(_0x28f8d4,_0x5e332a,_0x14a40d,_0x1327aa,_0x337071){const _0x549347=a0_0xbfb316;console[_0x549347(0x1d6)](_0x549347(0x1c6),_0x28f8d4);const _0x78df55=resolveCommand(_0x28f8d4);console[_0x549347(0x1d6)](_0x549347(0x1b9),_0x78df55?.[_0x549347(0x1e3)]?.['meta']?.[_0x549347(0x198)]||'‚ùå\x20not\x20found');if(!_0x78df55)return{'output':null,'directUsed':![]};const {command:_0x2cdfa2}=_0x78df55,_0x2245e8=_0x5e332a['trim']()[_0x549347(0x1a5)](/\s+/),{args:_0x417b24,flags:_0x2f0c8c}=parseArgs(_0x2245e8,_0x2cdfa2['meta'][_0x549347(0x184)]||[]);let _0x52852f='',_0x4e4ac1=![];const _0x41bc4b={'sendMessage':async(_0x8196cc,_0x2636ea)=>{const _0x562e62=_0x549347,_0x1e4fc8=typeof _0x2636ea===_0x562e62(0x1b7)?_0x2636ea:_0x2636ea[_0x562e62(0x1d4)]||'';_0x52852f+=_0x1e4fc8,_0x2cdfa2[_0x562e62(0x1d0)][_0x562e62(0x1d5)]===!![]&&(await _0x1327aa['sendMessage'](_0x14a40d,_0x2636ea),_0x4e4ac1=!![]);}};try{await _0x2cdfa2[_0x549347(0x1ca)]({'m':{'key':{'remoteJid':_0x14a40d},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x337071}}}},'sock':_0x41bc4b,'args':_0x417b24,'flags':_0x2f0c8c,'executeCommand':()=>{}});if(!_0x52852f['trim']())_0x52852f=_0x549347(0x1c5);}catch(_0x4aa031){_0x52852f='‚ùå\x20'+(_0x4aa031[_0x549347(0x1e0)]||'Command\x20failed');}return{'output':_0x52852f['trim'](),'directUsed':_0x4e4ac1};}function a0_0x4acf(_0x4df963,_0x508c95){const _0x4f1817=a0_0x4f18();return a0_0x4acf=function(_0x4acf47,_0x177fec){_0x4acf47=_0x4acf47-0x184;let _0x3788fe=_0x4f1817[_0x4acf47];return _0x3788fe;},a0_0x4acf(_0x4df963,_0x508c95);}async function extractCommands(_0xf950cb){const _0x443bd3=a0_0xbfb316,{commandMap:_0xa9de60,aliasMap:_0x17523d}=require(_0x443bd3(0x18b)),_0x5b6a06=[...new Set([..._0xa9de60['keys'](),..._0x17523d[_0x443bd3(0x1e7)]()])],_0x1d2b0c=_0x443bd3(0x1a7)+_0xf950cb+_0x443bd3(0x1cd)+_0x5b6a06[_0x443bd3(0x1b5)](',\x20')+'\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a';try{const _0x1f442d=await model[_0x443bd3(0x18c)](_0x1d2b0c);let _0x1915a3=_0x1f442d['response'][_0x443bd3(0x1d4)]()[_0x443bd3(0x185)]();_0x1915a3=_0x1915a3['replace'](/`/g,'')[_0x443bd3(0x1a0)](/```json/g,'')['replace'](/```/g,''),console[_0x443bd3(0x1d6)](_0x443bd3(0x190),_0x1915a3);const _0xfdeab=JSON['parse'](_0x1915a3);if(!Array[_0x443bd3(0x19f)](_0xfdeab))return console[_0x443bd3(0x19c)](_0x443bd3(0x1d3),_0xfdeab),[];return _0xfdeab;}catch(_0x475534){return console['error'](_0x443bd3(0x1a3),_0x475534),[];}}module['exports']={'meta':{'name':'ai','description':'Talk\x20to\x20MORA-AI','usage':a0_0xbfb316(0x1be),'args':[{'name':a0_0xbfb316(0x1d4),'type':a0_0xbfb316(0x1b7),'greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x242d22,sock:_0x55a5af,args:_0x3f642c})=>{const _0x71e887=a0_0xbfb316,_0x5358e1=_0x242d22[_0x71e887(0x1ba)][_0x71e887(0x19d)],_0x155f72=_0x242d22[_0x71e887(0x1ba)][_0x71e887(0x19e)]||_0x5358e1,_0x4cb3f4=_0x3f642c[_0x71e887(0x1d4)],_0x47e097=_0x242d22['message']?.[_0x71e887(0x1b2)]?.[_0x71e887(0x192)]?.[_0x71e887(0x1c2)],_0x23f0e1=new StatusUpdater(_0x55a5af,_0x5358e1);await _0x23f0e1[_0x71e887(0x193)](),await _0x23f0e1['update'](_0x71e887(0x1a6)),addMemory(_0x155f72,_0x71e887(0x189),_0x4cb3f4);let _0x381f42;try{await _0x23f0e1[_0x71e887(0x1cc)]('üîç\x20Extracting\x20commands...'),_0x381f42=await extractCommands(_0x4cb3f4);}catch(_0x1fb88e){return console[_0x71e887(0x19c)](_0x71e887(0x1ac),_0x1fb88e),_0x55a5af['sendMessage'](_0x5358e1,{'text':_0x71e887(0x1c4)});}if(!Array[_0x71e887(0x19f)](_0x381f42))return console[_0x71e887(0x19c)](_0x71e887(0x1eb),_0x381f42),_0x55a5af[_0x71e887(0x191)](_0x5358e1,{'text':_0x71e887(0x1c4)});const _0x1f66b2=[];let _0x31495b=![];for(const {name:_0x10f81e,args:_0x21d93c}of _0x381f42){await _0x23f0e1[_0x71e887(0x1cc)](_0x71e887(0x18d)+_0x10f81e+_0x71e887(0x1a8));const {output:_0x2603c3,directUsed:_0x47cf61}=await runCommand(_0x10f81e,_0x21d93c,_0x5358e1,_0x55a5af,_0x47e097);if(_0x2603c3)_0x1f66b2[_0x71e887(0x1e9)]({'name':_0x10f81e,'raw':_0x2603c3});if(_0x47cf61)_0x31495b=!![];}const _0x482faa=_0x1f66b2['map'](_0x553618=>_0x553618['name']+':\x20'+_0x553618[_0x71e887(0x1bc)])[_0x71e887(0x1b5)]('\x0a');if(_0x31495b){console['log'](_0x71e887(0x1d2)),await _0x23f0e1[_0x71e887(0x1dc)]('‚úÖ\x20Command(s)\x20completed');return;}const _0x4be0c3=persona+_0x71e887(0x195)+botSettings[_0x71e887(0x1bb)]+_0x71e887(0x1bf)+botSettings[_0x71e887(0x1ea)]+_0x71e887(0x186)+new Date()[_0x71e887(0x187)]()+_0x71e887(0x1b0)+_0x4cb3f4+_0x71e887(0x1d8)+_0x482faa+_0x71e887(0x1bd);let _0x5af7d7='';const _0xeeb054=0x3;let _0x3ea3fd=0x0;while(_0x3ea3fd<_0xeeb054){try{await _0x23f0e1[_0x71e887(0x1cc)]('üß†\x20Remixing\x20with\x20AI...');const _0x5cd2f1=await model[_0x71e887(0x18c)](_0x4be0c3);_0x5af7d7=_0x5cd2f1[_0x71e887(0x1d9)][_0x71e887(0x1d4)]()[_0x71e887(0x185)]();break;}catch(_0x505010){if(_0x505010[_0x71e887(0x1de)]===0x1ad){console['error'](_0x71e887(0x1af),_0x505010),_0x3ea3fd++;const _0x2bde1d=Math[_0x71e887(0x19a)](0x2,_0x3ea3fd)*0x3e8;await new Promise(_0x1c3c47=>setTimeout(_0x1c3c47,_0x2bde1d)),rotateKey();}else{console[_0x71e887(0x19c)](_0x71e887(0x1dd),_0x505010),_0x5af7d7=_0x71e887(0x1c3);break;}}}if(!_0x1f66b2[_0x71e887(0x1cf)]){const _0x1caa1f=persona+_0x71e887(0x1ae)+_0x4cb3f4+_0x71e887(0x199);try{const _0x23ebf1=await model['generateContent'](_0x1caa1f);_0x5af7d7=_0x23ebf1[_0x71e887(0x1d9)][_0x71e887(0x1d4)]()[_0x71e887(0x185)]();}catch(_0xb570cc){console['error'](_0x71e887(0x1dd),_0xb570cc),_0x5af7d7=_0x71e887(0x1c3);}}addMemory(_0x155f72,_0x71e887(0x1df),_0x5af7d7);const _0x4c0f81=_0x71e887(0x1e8)+_0x4cb3f4+_0x71e887(0x1b6)+_0x1f66b2[_0x71e887(0x1b4)](_0x261e7f=>_0x261e7f[_0x71e887(0x198)])[_0x71e887(0x1b5)](',')+_0x71e887(0x1aa);try{const _0x2d8078=await model[_0x71e887(0x18c)](_0x4c0f81),_0xbbb9a5=JSON[_0x71e887(0x1b1)](_0x2d8078[_0x71e887(0x1d9)]['text']());if(_0xbbb9a5[_0x71e887(0x189)])REMEMBER[_0x71e887(0x1ad)][_0x155f72]=_0xbbb9a5[_0x71e887(0x189)];if(_0xbbb9a5[_0x71e887(0x19b)])REMEMBER[_0x71e887(0x19b)]=_0xbbb9a5[_0x71e887(0x19b)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x1946f4=_0x5af7d7+_0x71e887(0x1db);await _0x23f0e1[_0x71e887(0x1dc)](_0x1946f4);}};