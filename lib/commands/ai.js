const a0_0x4e6470=a0_0x1fec;function a0_0x1fec(_0x1cfce2,_0x4899ef){const _0x1eaddb=a0_0x1ead();return a0_0x1fec=function(_0x1fec55,_0x5de34e){_0x1fec55=_0x1fec55-0xd8;let _0x3089d0=_0x1eaddb[_0x1fec55];return _0x3089d0;},a0_0x1fec(_0x1cfce2,_0x4899ef);}(function(_0x1fb976,_0xe70fdb){const _0x514d65=a0_0x1fec,_0x24ca50=_0x1fb976();while(!![]){try{const _0x389743=parseInt(_0x514d65(0x137))/0x1+parseInt(_0x514d65(0xdf))/0x2*(parseInt(_0x514d65(0x140))/0x3)+-parseInt(_0x514d65(0x104))/0x4*(-parseInt(_0x514d65(0x124))/0x5)+parseInt(_0x514d65(0x126))/0x6+parseInt(_0x514d65(0x100))/0x7*(-parseInt(_0x514d65(0x109))/0x8)+parseInt(_0x514d65(0xef))/0x9*(-parseInt(_0x514d65(0x12a))/0xa)+-parseInt(_0x514d65(0xe0))/0xb*(-parseInt(_0x514d65(0x143))/0xc);if(_0x389743===_0xe70fdb)break;else _0x24ca50['push'](_0x24ca50['shift']());}catch(_0x49cd17){_0x24ca50['push'](_0x24ca50['shift']());}}}(a0_0x1ead,0x54eb9));const fs=require('fs'),path=require(a0_0x4e6470(0x102)),{GoogleGenerativeAI}=require(a0_0x4e6470(0x110)),{parseArgs}=require(a0_0x4e6470(0x128)),{resolveCommand}=require(a0_0x4e6470(0x11f)),{settings:botSettings}=require('../../settings'),{StatusUpdater}=require(a0_0x4e6470(0x10f)),API_KEYS_FILE=path[a0_0x4e6470(0x141)](__dirname,'..','..',a0_0x4e6470(0xfe),a0_0x4e6470(0xdc));function loadApiKeys(){const _0x428a9c=a0_0x4e6470;if(!fs['existsSync'](API_KEYS_FILE))throw new Error('apiKeys.txt\x20not\x20found');return fs[_0x428a9c(0xf5)](API_KEYS_FILE,_0x428a9c(0x101))[_0x428a9c(0x139)](/\r?\n/)[_0x428a9c(0x11d)](Boolean);}const apiKeys=loadApiKeys();function a0_0x1ead(){const _0x12e895=['ðŸ§ \x20Remixing\x20with\x20AI...','ai_memory.json','toLocaleString','length','Rate\x20limit\x20error:','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','Error\x20extracting\x20commands:','Talk\x20to\x20MORA-AI','args','Command\x20used\x20direct:true\x20â€”\x20skipping\x20summary\x20AI\x20reply','meta','text','key','users','2972493iNmIPk','âœ…\x20Command(s)\x20completed','\x0a\x0aUser:\x20','\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22','[runCommand]\x20Trying\x20to\x20resolve:','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','readFileSync','replace','run','botName','âŒ\x20not\x20found','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','\x20of\x20','Switched\x20to\x20key\x20','generateContent','secrets','ownerName','987CzuinU','utf8','path','\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201â€“2\x20lines.','1156132kZuIrq','start','existsSync','\x0aCommands\x20used:\x20','extractCommands:\x20Expected\x20array,\x20got:','11152OxhpqO','keys','gemini-2.5-flash','map','pow','isArray','../../utils/statusUpdater.js','@google/generative-ai','ðŸ¤–\x20Thinking...','(command\x20ran\x20but\x20gave\x20no\x20output)','shift','direct','extendedTextMessage','commandsToRun\x20is\x20not\x20an\x20array:','[extractCommands]\x20Gemini\x20raw\x20output:\x0a','name','Error\x20with\x20current\x20API\x20key:','response','done','\x0aRespond\x20casually\x20and\x20helpfully:','filter','\x0a\x0aYou\x20are\x20','./index','Failed\x20to\x20process\x20your\x20request.','data','\x22\x0aCommand\x20output:\x0a','error','5McQPuc','string','1537722gOXXHf','slice','../../utils/parseArgs','.ai\x20<prompt>','10cDOpCV','trim','user','message','sendMessage','participant','raw','writeFileSync','remoteJid','âš™ï¸\x20Running\x20/','Command\x20failed','getGenerativeModel','log','113728aEFGjg','stringify','split','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','push','quotedMessage','command','exports','parse','24MyfpRd','join','update','9792fyvwsS','assistant',',\x20owned\x20by\x20','contextInfo','...','.\x0aTime\x20now:\x20','apiKeys.txt','role','global','41460gchVqf','671BtQUSB'];a0_0x1ead=function(){return _0x12e895;};return a0_0x1ead();}let currentKeyIndex=0x0;function setupGenAI(){const _0xce96ed=a0_0x4e6470,_0x32e029=apiKeys[currentKeyIndex],_0x4c467b=new GoogleGenerativeAI(_0x32e029);return _0x4c467b[_0xce96ed(0x135)]({'model':_0xce96ed(0x10b)});}let model=setupGenAI();function rotateKey(){const _0x3ee6fd=a0_0x4e6470;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys[_0x3ee6fd(0xe4)],model=setupGenAI(),console[_0x3ee6fd(0x136)](_0x3ee6fd(0xfc)+(currentKeyIndex+0x1)+_0x3ee6fd(0xfb)+apiKeys['length']);}const persona='You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20â€”\x20keep\x20replies\x20short\x20and\x20energetic.\x20ðŸŽ§ðŸ”¥',MEM_FILE=path[a0_0x4e6470(0x141)](__dirname,'..','..',a0_0x4e6470(0xfe),a0_0x4e6470(0xe2)),REM_FILE=path[a0_0x4e6470(0x141)](__dirname,'..','..',a0_0x4e6470(0xfe),'ai_remember.json'),loadJson=(_0x4490f3,_0x1ebbe6={})=>fs[a0_0x4e6470(0x106)](_0x4490f3)?JSON[a0_0x4e6470(0x13f)](fs['readFileSync'](_0x4490f3,'utf8')):_0x1ebbe6,saveJson=(_0x577d46,_0x573858)=>fs[a0_0x4e6470(0x131)](_0x577d46,JSON[a0_0x4e6470(0x138)](_0x573858,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x450630,_0x337eb6,_0x599336)=>{const _0x321706=a0_0x4e6470;if(!MEMORY[_0x450630])MEMORY[_0x450630]=[];MEMORY[_0x450630]['push']({'role':_0x337eb6,'msg':_0x599336,'ts':Date['now']()});if(MEMORY[_0x450630][_0x321706(0xe4)]>MAX_MEMORY)MEMORY[_0x450630][_0x321706(0x113)]();saveJson(MEM_FILE,MEMORY);},getMemory=_0x27304c=>(MEMORY[_0x27304c]||[])[a0_0x4e6470(0x127)](-MAX_MEMORY)['map'](_0x5d86bd=>_0x5d86bd[a0_0x4e6470(0xdd)]+':\x20'+_0x5d86bd['msg'])[a0_0x4e6470(0x141)]('\x0a');async function runCommand(_0x2e43e5,_0x15acb1,_0x1429b3,_0x2ad0d1,_0xe4dd46){const _0x109893=a0_0x4e6470;console[_0x109893(0x136)](_0x109893(0xf3),_0x2e43e5);const _0x460855=resolveCommand(_0x2e43e5);console['log']('[runCommand]\x20Resolved\x20to:',_0x460855?.[_0x109893(0x13d)]?.[_0x109893(0xeb)]?.[_0x109893(0x118)]||_0x109893(0xf9));if(!_0x460855)return{'output':null,'directUsed':![]};const {command:_0x3df9db}=_0x460855,_0x5a6e49=_0x15acb1['trim']()['split'](/\s+/),{args:_0x6c6a3e,flags:_0x2abee7}=parseArgs(_0x5a6e49,_0x3df9db[_0x109893(0xeb)][_0x109893(0xe9)]||[]);let _0x291a3a='',_0x4381dc=![];const _0x348d0c={'sendMessage':async(_0x48d003,_0x4c8340)=>{const _0x1160a8=_0x109893,_0xb17e40=typeof _0x4c8340===_0x1160a8(0x125)?_0x4c8340:_0x4c8340[_0x1160a8(0xec)]||'';_0x291a3a+=_0xb17e40,_0x3df9db[_0x1160a8(0xeb)][_0x1160a8(0x114)]===!![]&&(await _0x2ad0d1[_0x1160a8(0x12e)](_0x1429b3,_0x4c8340),_0x4381dc=!![]);}};try{await _0x3df9db[_0x109893(0xf7)]({'m':{'key':{'remoteJid':_0x1429b3},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0xe4dd46}}}},'sock':_0x348d0c,'args':_0x6c6a3e,'flags':_0x2abee7,'executeCommand':()=>{}});if(!_0x291a3a['trim']())_0x291a3a=_0x109893(0x112);}catch(_0x1c94c2){_0x291a3a='âŒ\x20'+(_0x1c94c2[_0x109893(0x12d)]||_0x109893(0x134));}return{'output':_0x291a3a[_0x109893(0x12b)](),'directUsed':_0x4381dc};}async function extractCommands(_0x4a1557){const _0x2cfc71=a0_0x4e6470,{commandMap:_0x2138cc,aliasMap:_0x5f329c}=require(_0x2cfc71(0x11f)),_0x51d694=[...new Set([..._0x2138cc[_0x2cfc71(0x10a)](),..._0x5f329c[_0x2cfc71(0x10a)]()])],_0x2a2788=_0x2cfc71(0xf2)+_0x4a1557+_0x2cfc71(0xe6)+_0x51d694[_0x2cfc71(0x141)](',\x20')+'\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a';try{const _0x12be8e=await model[_0x2cfc71(0xfd)](_0x2a2788);let _0x1b9086=_0x12be8e['response'][_0x2cfc71(0xec)]()[_0x2cfc71(0x12b)]();_0x1b9086=_0x1b9086[_0x2cfc71(0xf6)](/`/g,'')[_0x2cfc71(0xf6)](/```json/g,'')[_0x2cfc71(0xf6)](/```/g,''),console['log'](_0x2cfc71(0x117),_0x1b9086);const _0x1ffae3=JSON[_0x2cfc71(0x13f)](_0x1b9086);if(!Array['isArray'](_0x1ffae3))return console['error'](_0x2cfc71(0x108),_0x1ffae3),[];return _0x1ffae3;}catch(_0x40f984){return console[_0x2cfc71(0x123)]('Failed\x20to\x20extract\x20commands\x20from\x20prompt:',_0x40f984),[];}}module[a0_0x4e6470(0x13e)]={'meta':{'name':'ai','description':a0_0x4e6470(0xe8),'usage':a0_0x4e6470(0x129),'args':[{'name':'text','type':a0_0x4e6470(0x125),'greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x4ab83c,sock:_0x598a12,args:_0x223341})=>{const _0x1333f7=a0_0x4e6470,_0x55f8e6=_0x4ab83c[_0x1333f7(0xed)][_0x1333f7(0x132)],_0x318046=_0x4ab83c[_0x1333f7(0xed)][_0x1333f7(0x12f)]||_0x55f8e6,_0x16e8b5=_0x223341[_0x1333f7(0xec)],_0xccc9a4=_0x4ab83c[_0x1333f7(0x12d)]?.[_0x1333f7(0x115)]?.[_0x1333f7(0xd9)]?.[_0x1333f7(0x13c)],_0x14c49d=new StatusUpdater(_0x598a12,_0x55f8e6);await _0x14c49d[_0x1333f7(0x105)](),await _0x14c49d[_0x1333f7(0x142)](_0x1333f7(0x111)),addMemory(_0x318046,_0x1333f7(0x12c),_0x16e8b5);let _0x469098;try{await _0x14c49d[_0x1333f7(0x142)]('ðŸ”\x20Extracting\x20commands...'),_0x469098=await extractCommands(_0x16e8b5);}catch(_0x5df9c5){return console[_0x1333f7(0x123)](_0x1333f7(0xe7),_0x5df9c5),_0x598a12['sendMessage'](_0x55f8e6,{'text':'Failed\x20to\x20process\x20your\x20request.'});}if(!Array[_0x1333f7(0x10e)](_0x469098))return console[_0x1333f7(0x123)](_0x1333f7(0x116),_0x469098),_0x598a12['sendMessage'](_0x55f8e6,{'text':_0x1333f7(0x120)});const _0x4a220d=[];let _0x45504d=![];for(const {name:_0x1e86ff,args:_0xe4985a}of _0x469098){await _0x14c49d[_0x1333f7(0x142)](_0x1333f7(0x133)+_0x1e86ff+_0x1333f7(0xda));const {output:_0x1c8251,directUsed:_0x318671}=await runCommand(_0x1e86ff,_0xe4985a,_0x55f8e6,_0x598a12,_0xccc9a4);if(_0x1c8251)_0x4a220d[_0x1333f7(0x13b)]({'name':_0x1e86ff,'raw':_0x1c8251});if(_0x318671)_0x45504d=!![];}const _0x3029c7=_0x4a220d[_0x1333f7(0x10c)](_0x589fc4=>_0x589fc4[_0x1333f7(0x118)]+':\x20'+_0x589fc4[_0x1333f7(0x130)])[_0x1333f7(0x141)]('\x0a');if(_0x45504d){console['log'](_0x1333f7(0xea)),await _0x14c49d[_0x1333f7(0x11b)](_0x1333f7(0xf0));return;}const _0xc874c5=persona+_0x1333f7(0x11e)+botSettings[_0x1333f7(0xf8)]+_0x1333f7(0xd8)+botSettings[_0x1333f7(0xff)]+_0x1333f7(0xdb)+new Date()[_0x1333f7(0xe3)]()+'.\x0aUser\x20said:\x20\x22'+_0x16e8b5+_0x1333f7(0x122)+_0x3029c7+_0x1333f7(0x103);let _0x49f49b='';const _0x561625=0x3;let _0x507985=0x0;while(_0x507985<_0x561625){try{await _0x14c49d[_0x1333f7(0x142)](_0x1333f7(0xe1));const _0x2a7eea=await model[_0x1333f7(0xfd)](_0xc874c5);_0x49f49b=_0x2a7eea[_0x1333f7(0x11a)][_0x1333f7(0xec)]()[_0x1333f7(0x12b)]();break;}catch(_0x411333){if(_0x411333[_0x1333f7(0x121)]===0x1ad){console[_0x1333f7(0x123)](_0x1333f7(0xe5),_0x411333),_0x507985++;const _0x1413dd=Math[_0x1333f7(0x10d)](0x2,_0x507985)*0x3e8;await new Promise(_0x1ac392=>setTimeout(_0x1ac392,_0x1413dd)),rotateKey();}else{console['error'](_0x1333f7(0x119),_0x411333),_0x49f49b=_0x1333f7(0x13a);break;}}}if(!_0x4a220d['length']){const _0x2499cb=persona+_0x1333f7(0xf1)+_0x16e8b5+_0x1333f7(0x11c);try{const _0x1e0c74=await model['generateContent'](_0x2499cb);_0x49f49b=_0x1e0c74[_0x1333f7(0x11a)][_0x1333f7(0xec)]()[_0x1333f7(0x12b)]();}catch(_0xc1a6d9){console['error'](_0x1333f7(0x119),_0xc1a6d9),_0x49f49b=_0x1333f7(0x13a);}}addMemory(_0x318046,_0x1333f7(0x144),_0x49f49b);const _0x748eb9='User:\x20'+_0x16e8b5+_0x1333f7(0x107)+_0x4a220d['map'](_0x24a483=>_0x24a483['name'])[_0x1333f7(0x141)](',')+_0x1333f7(0xf4);try{const _0x1b688b=await model['generateContent'](_0x748eb9),_0x6e06d9=JSON['parse'](_0x1b688b[_0x1333f7(0x11a)][_0x1333f7(0xec)]());if(_0x6e06d9['user'])REMEMBER[_0x1333f7(0xee)][_0x318046]=_0x6e06d9['user'];if(_0x6e06d9['global'])REMEMBER[_0x1333f7(0xde)]=_0x6e06d9[_0x1333f7(0xde)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x480ef9=_0x49f49b+_0x1333f7(0xfa);await _0x14c49d[_0x1333f7(0x11b)](_0x480ef9);}};