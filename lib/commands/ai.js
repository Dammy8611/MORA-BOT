const a0_0x167ba7=a0_0x4596;function a0_0x4596(_0x36fafb,_0x593a93){const _0x5ca4b1=a0_0x5ca4();return a0_0x4596=function(_0x45969a,_0x4e64a8){_0x45969a=_0x45969a-0x14e;let _0x9bd868=_0x5ca4b1[_0x45969a];return _0x9bd868;},a0_0x4596(_0x36fafb,_0x593a93);}function a0_0x5ca4(){const _0x47d0a4=['log','usage','filter','sendMessage','length','All\x20commands\x20were\x20handled\x20directly.\x20Skipping\x20Remix\x20Layer.','update','from','../../utils/statusUpdater.js','description','Entering\x20Thinking\x20Layer...','remoteJid','I\x20couldn\x27t\x20figure\x20out\x20what\x20to\x20do\x20from\x20that.','I\x27m\x20a\x20bit\x20flustered\x20right\x20now,\x20something\x20went\x20wrong\x20while\x20I\x20was\x20trying\x20to\x20be\x20witty.','2405016RIQRkm','10401230pilqca','720195niRJge','./index','start','args','A\x20friendly\x20AI\x20assistant\x20named\x20Mora.','generateContent','Error\x20in\x20Gemini\x20Thinking\x20Layer','Remix\x20Layer\x20finished','All\x20command\x20outputs\x20were\x20handled\x20directly.\x20Skipping\x20Remix.','Remix\x20layer\x20returned\x20empty\x20text','audio','isDirect','split','text','[INFO]\x20','4721njLyTf','None','[ERROR]\x20','\x22\x0aCommands\x20I\x20ran\x20and\x20their\x20output:\x0a','AI\x20command\x20failed','replace','Remix\x20Layer\x20received\x20context.','370lTConh','gemini-2.5-pro','pushName','Gotcha,\x20all\x20commands\x20handled.\x20âœ¨','Parsed\x20JSON\x20response','slice','AI\x20Thinking\x20Layer\x20Processed','map','participant','Entering\x20Command\x20Execution\x20phase','Error\x20in\x20Gemini\x20Remix\x20Layer','values','Thinking\x20Layer\x20received\x20prompt.','push','375565NuQDXD','join','5351524dLrfPm','command','AI\x20command\x20invoked','Uhh,\x20I\x20spaced\x20out\x20for\x20a\x20second\x20there\x20ðŸ¤¯','response','No\x20commands\x20to\x20execute.','getGenerativeModel','Sending\x20final\x20prompt\x20to\x20Gemini\x20for\x20remixing.','exports','meta','48EikyUv','.ai\x20<prompt>','prompt','Thinking\x20Layer\x20finished','114kuGVJo','ðŸ¤”\x20Thinking....','trim','every','info','includes','output','Sorry,\x20something\x20went\x20wrong\x20with\x20my\x20circuits.\x20ðŸ˜µâ€ðŸ’«','861258yFJrKN','commands','key','commandOutputs','\x0a\x0aAnalyze\x20the\x20user\x27s\x20prompt\x20and\x20determine\x20the\x20most\x20appropriate\x20command(s)\x20to\x20run.\x0a-\x20If\x20a\x20command\x20needs\x20arguments,\x20extract\x20them\x20from\x20the\x20prompt.\x0a-\x20Understand\x20the\x20users\x20prompt\x20first\x20and\x20command\x20argument.\x20Don\x27t\x20just\x20use\x20the\x20users\x20prompt\x20word\x20for\x20word\x0a-\x20If\x20the\x20prompt\x20is\x20just\x20a\x20greeting\x20or\x20a\x20general\x20chat\x20message,\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20Do\x20not\x20try\x20to\x20run\x20commands\x20that\x20are\x20not\x20on\x20the\x20list.\x0a-\x20If\x20the\x20user\x20asks\x20for\x20something\x20that\x20requires\x20a\x20command,\x20but\x20doesn\x27t\x20provide\x20the\x20necessary\x20arguments\x20(e.g.,\x20\x22.weather\x22),\x20ask\x20them\x20for\x20the\x20missing\x20information\x20in\x20your\x20\x22decision\x22\x20and\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20If\x20the\x20user\x20asks\x20or\x20responds\x20to\x20something\x20in\x20the\x20recent\x20conversation\x20history,\x20your\x20response\x20decision\x20should\x20be\x20detailed\x20because\x20your\x20remix\x20layer\x20has\x20no\x20access\x20to\x20the\x20previuos\x20memory\x20and\x20so\x20it\x20knows\x20what\x20the\x20context\x20is\x20exactly\x0a\x0aUser\x20Prompt:\x20\x22','@google/generative-ai','decision','Returning\x20from\x20Thinking\x20Layer','Invalid\x20or\x20empty\x20Gemini\x20JSON\x20response','\x0a\x0aHere\x20are\x20the\x20available\x20commands\x20you\x20can\x20use:\x0a','Sending\x20system\x20prompt\x20to\x20Gemini','done','../memory.js','Entering\x20Remix\x20Layer...','../core/executeCommand','\x0a---\x0a\x0aYour\x20response\x20should\x20be\x20natural\x20and\x20conversational.\x20Don\x27t\x20just\x20state\x20the\x20facts,\x20remix\x20them\x20into\x20a\x20proper\x20answer.\x0aMake\x20your\x20responses\x20short\x20and\x20concise\x20like\x20you\x20are\x20talking\x20to\x20a\x20friend\x0aDont\x20make\x20refrences\x20to\x20your\x20thinking\x20layer,\x20your\x20output\x20should\x20be\x20as\x20though\x20you\x20already\x20know\x20it\x0a','Received\x20response\x20from\x20Gemini','stringify','...','\x0aYou\x20are\x20the\x20\x22Thinking\x20Layer\x22\x20for\x20a\x20bot\x20named\x20Mora.\x20Your\x20job\x20is\x20to\x20analyze\x20a\x20user\x27s\x20prompt\x20and\x20decide\x20which,\x20if\x20any,\x20of\x20the\x20available\x20commands\x20should\x20be\x20executed.\x0a\x0aYou\x20must\x20respond\x20in\x20a\x20JSON\x20format\x20with\x20two\x20properties:\x0a1.\x20\x22decision\x22:\x20A\x20string\x20explaining\x20your\x20reasoning.\x0a2.\x20\x22commands\x22:\x20An\x20array\x20of\x20strings,\x20where\x20each\x20string\x20is\x20the\x20full\x20command\x20to\x20execute\x20(e.g.,\x20\x22.weather\x20London\x22).\x0a\x0aHere\x20is\x20the\x20recent\x20conversation\x20history\x20(if\x20any):\x0a','error'];a0_0x5ca4=function(){return _0x47d0a4;};return a0_0x5ca4();}(function(_0x2eaa3f,_0x547922){const _0x5e6cf1=a0_0x4596,_0x47c7db=_0x2eaa3f();while(!![]){try{const _0x2fba9a=-parseInt(_0x5e6cf1(0x174))/0x1*(parseInt(_0x5e6cf1(0x17b))/0x2)+parseInt(_0x5e6cf1(0x1a1))/0x3+parseInt(_0x5e6cf1(0x18b))/0x4+parseInt(_0x5e6cf1(0x189))/0x5*(-parseInt(_0x5e6cf1(0x199))/0x6)+-parseInt(_0x5e6cf1(0x165))/0x7*(-parseInt(_0x5e6cf1(0x195))/0x8)+-parseInt(_0x5e6cf1(0x163))/0x9+parseInt(_0x5e6cf1(0x164))/0xa;if(_0x2fba9a===_0x547922)break;else _0x47c7db['push'](_0x47c7db['shift']());}catch(_0x1196de){_0x47c7db['push'](_0x47c7db['shift']());}}}(a0_0x5ca4,0xae794));const {GoogleGenerativeAI}=require(a0_0x167ba7(0x1a6)),{getCommandMap}=require(a0_0x167ba7(0x166)),{executeAiCommand}=require(a0_0x167ba7(0x14e)),{StatusUpdater}=require(a0_0x167ba7(0x15d)),{loadMemory,saveMemory}=require(a0_0x167ba7(0x1ad)),logger={'info':(_0x4f850e,_0x138362)=>console[a0_0x167ba7(0x155)](a0_0x167ba7(0x173)+_0x138362,_0x4f850e),'error':(_0x3ef89d,_0x20c32b)=>console[a0_0x167ba7(0x154)](a0_0x167ba7(0x176)+_0x20c32b,_0x3ef89d)},genAI=new GoogleGenerativeAI('AIzaSyDO4v1a36TNgunFzm7N-FzT3WYJnwIpbRI');module[a0_0x167ba7(0x193)]={'meta':{'name':'ai','description':a0_0x167ba7(0x169),'usage':a0_0x167ba7(0x196),'category':'AI','ownerOnly':![],'ai':![],'args':[{'name':a0_0x167ba7(0x197),'required':!![],'greedy':!![],'description':'The\x20prompt\x20for\x20the\x20AI.'}]},'run':async({m:_0x1aee2f,sock:_0x5321cd,args:_0x48f21c,flags:_0x1593a2,executeCommand:_0x10a63b})=>{const _0x379e4a=a0_0x167ba7,_0x38cb7c=_0x1aee2f['key'][_0x379e4a(0x160)],_0x4a705a=_0x1aee2f[_0x379e4a(0x1a3)][_0x379e4a(0x183)]||_0x38cb7c,_0x48438c=_0x1aee2f[_0x379e4a(0x17d)]||null,_0x2af0ba=_0x48f21c['prompt'];logger[_0x379e4a(0x19d)]({'user':_0x1aee2f[_0x379e4a(0x17d)],'prompt':_0x2af0ba},_0x379e4a(0x18d));const _0x4e8b36=new StatusUpdater(_0x5321cd,_0x38cb7c);await _0x4e8b36[_0x379e4a(0x167)]();try{const _0x264cbe=await loadMemory(_0x38cb7c,_0x4a705a);logger[_0x379e4a(0x19d)]({},_0x379e4a(0x15f)),await _0x4e8b36[_0x379e4a(0x15b)](_0x379e4a(0x19a));const _0x560a72=await thinkingLayer(_0x2af0ba,_0x264cbe);logger[_0x379e4a(0x19d)](_0x560a72,_0x379e4a(0x198)),logger[_0x379e4a(0x19d)]({'prompt':_0x2af0ba,'decision':_0x560a72[_0x379e4a(0x1a7)],'commandsToRun':_0x560a72['commands']},_0x379e4a(0x181));let _0x511397=[];if(_0x560a72[_0x379e4a(0x1a2)]&&_0x560a72[_0x379e4a(0x1a2)][_0x379e4a(0x159)]>0x0){logger[_0x379e4a(0x19d)]({'commands':_0x560a72[_0x379e4a(0x1a2)]},_0x379e4a(0x184)),await _0x4e8b36[_0x379e4a(0x15b)]('Running\x20command(s):\x20'+_0x560a72[_0x379e4a(0x1a2)][_0x379e4a(0x18a)](',\x20')+_0x379e4a(0x152));for(const _0x521109 of _0x560a72['commands']){logger['info']({'commandString':_0x521109},'Executing\x20command');const _0x46954a=_0x521109['trim']()[_0x379e4a(0x171)](/\s+/);_0x46954a[0x0]=_0x46954a[0x0][_0x379e4a(0x180)](0x1);const _0x283df2=_0x46954a[0x0],_0x311bd3=await executeAiCommand({'m':_0x1aee2f,'sock':_0x5321cd,'tokens':['!'+_0x283df2,..._0x46954a['slice'](0x1)]});if(_0x311bd3&&!_0x311bd3['text']){logger[_0x379e4a(0x19d)]({'command':_0x283df2,'content':_0x311bd3},'Command\x20returned\x20a\x20file.\x20Sending\x20directly.'),await _0x4e8b36[_0x379e4a(0x1ac)](_0x379e4a(0x1ac)),await _0x5321cd[_0x379e4a(0x158)](_0x1aee2f[_0x379e4a(0x1a3)]['remoteJid'],_0x311bd3),_0x511397[_0x379e4a(0x188)]({'command':_0x283df2,'output':'[Sent\x20a\x20file:\x20'+(_0x311bd3[_0x379e4a(0x16f)]?'audio':'unknown')+']','isDirect':!![]});continue;}const _0x14dd38=_0x311bd3?_0x311bd3['text']:'No\x20textual\x20output.';_0x511397[_0x379e4a(0x188)]({'command':_0x283df2,'output':_0x14dd38}),logger[_0x379e4a(0x19d)]({'command':_0x283df2,'output':_0x14dd38},'Command\x20execution\x20finished');}}else logger[_0x379e4a(0x19d)]({},_0x379e4a(0x190));if(_0x511397[_0x379e4a(0x159)]>0x0&&_0x511397[_0x379e4a(0x19c)](_0x16d8e0=>_0x16d8e0[_0x379e4a(0x170)])){logger[_0x379e4a(0x19d)]({},_0x379e4a(0x15a));return;}logger['info']({},_0x379e4a(0x1ae));const _0x944664={'prompt':_0x2af0ba,'decision':_0x560a72[_0x379e4a(0x1a7)],'commandOutputs':_0x511397};logger[_0x379e4a(0x19d)]({'context':_0x944664},'Remix\x20Layer\x20context');const _0x3994e2=await remixLayer(_0x944664);logger[_0x379e4a(0x19d)]({'finalResponse':_0x3994e2},_0x379e4a(0x16c)),await saveMemory(_0x38cb7c,_0x4a705a,_0x2af0ba,_0x3994e2,_0x48438c,_0x511397),await _0x4e8b36[_0x379e4a(0x1ac)](_0x3994e2);}catch(_0x3f61f6){logger[_0x379e4a(0x154)](_0x3f61f6,_0x379e4a(0x178)),await _0x4e8b36[_0x379e4a(0x1ac)](_0x379e4a(0x1a0));}}};async function thinkingLayer(_0x405523,_0x13cdb9){const _0x4131fe=a0_0x167ba7;logger[_0x4131fe(0x19d)]({'prompt':_0x405523},_0x4131fe(0x187));const _0x56e745=genAI['getGenerativeModel']({'model':_0x4131fe(0x17c)}),_0x377208=getCommandMap(),_0x2488ed=Array[_0x4131fe(0x15c)](_0x377208[_0x4131fe(0x186)]())[_0x4131fe(0x157)](_0x174132=>_0x174132['meta']['ai']!==![])[_0x4131fe(0x182)](_0xae263d=>({'name':_0xae263d['meta']['name'],'description':_0xae263d['meta']['description'],'usage':_0xae263d[_0x4131fe(0x194)][_0x4131fe(0x156)],'direct':_0xae263d['meta']['direct']||![],'args':(_0xae263d[_0x4131fe(0x194)][_0x4131fe(0x168)]||[])[_0x4131fe(0x182)](_0x563a8d=>_0x563a8d['name']+'\x20('+_0x563a8d[_0x4131fe(0x15e)]+')')[_0x4131fe(0x18a)](',\x20')}));logger[_0x4131fe(0x19d)]({'count':_0x2488ed[_0x4131fe(0x159)]},'Generated\x20callable\x20command\x20list\x20for\x20AI');const _0x2d96ec=_0x4131fe(0x153)+JSON[_0x4131fe(0x151)](_0x13cdb9,null,0x2)+_0x4131fe(0x1aa)+JSON['stringify'](_0x2488ed,null,0x2)+_0x4131fe(0x1a5)+_0x405523+'\x22\x0a';logger['info'](_0x4131fe(0x1ab));try{const _0x397594=await _0x56e745[_0x4131fe(0x16a)](_0x2d96ec),_0x1451da=await _0x397594['response']['text']();logger['info']({'responseText':_0x1451da},_0x4131fe(0x150));const _0x5a2a39=_0x1451da[_0x4131fe(0x179)](/```json/g,'')[_0x4131fe(0x179)](/```/g,'')[_0x4131fe(0x19b)]();logger['info']({'cleanedText':_0x5a2a39},'Cleaned\x20Gemini\x20response');if(!_0x5a2a39||!_0x5a2a39['includes']('{')||!_0x5a2a39[_0x4131fe(0x19e)]('}'))return logger[_0x4131fe(0x154)]({'cleanedText':_0x5a2a39},_0x4131fe(0x1a9)),{'decision':_0x4131fe(0x161),'commands':[]};const _0x2fb0ae=JSON['parse'](_0x5a2a39);logger[_0x4131fe(0x19d)]({'jsonResponse':_0x2fb0ae},_0x4131fe(0x17f));const _0x17d28a={'decision':_0x2fb0ae[_0x4131fe(0x1a7)],'commands':_0x2fb0ae['commands']||[]};return logger[_0x4131fe(0x19d)]({'thinkingResult':_0x17d28a},_0x4131fe(0x1a8)),_0x17d28a;}catch(_0x3d718f){return logger['error'](_0x3d718f,_0x4131fe(0x16b)),{'decision':'There\x20was\x20an\x20error\x20in\x20my\x20thinking\x20process.','commands':[]};}}async function remixLayer(_0x3bf4f1){const _0x14cb49=a0_0x167ba7;logger[_0x14cb49(0x19d)]({'context':_0x3bf4f1},_0x14cb49(0x17a));const _0x213efe=genAI[_0x14cb49(0x191)]({'model':_0x14cb49(0x17c)}),_0x31eae6=_0x3bf4f1[_0x14cb49(0x1a4)][_0x14cb49(0x157)](_0x50a4d5=>!_0x50a4d5['isDirect']);if(_0x31eae6[_0x14cb49(0x159)]===0x0&&_0x3bf4f1[_0x14cb49(0x1a4)]['length']>0x0)return logger[_0x14cb49(0x19d)]({},_0x14cb49(0x16d)),_0x14cb49(0x17e);const _0x1f8709='\x0a\x20\x20You\x20are\x20Mora,\x20a\x20smart,\x20witty\x20Gen\x20Z\x20assistant.\x0aYour\x20personality\x20is\x20helpful,\x20a\x20little\x20sassy,\x20and\x20you\x20use\x20modern\x20slang.\x0aBased\x20on\x20the\x20following\x20information,\x20craft\x20a\x20response\x20to\x20the\x20user.\x0a\x0a---\x0aOriginal\x20User\x20Prompt:\x20\x22'+_0x3bf4f1[_0x14cb49(0x197)]+'\x22\x0aMy\x20internal\x20thought\x20process:\x20\x22'+_0x3bf4f1[_0x14cb49(0x1a7)]+_0x14cb49(0x177)+(_0x31eae6[_0x14cb49(0x182)](_0x143599=>'-\x20'+_0x143599[_0x14cb49(0x18c)]+':\x20'+_0x143599[_0x14cb49(0x19f)])[_0x14cb49(0x18a)]('\x0a')||_0x14cb49(0x175))+_0x14cb49(0x14f);logger[_0x14cb49(0x19d)](_0x14cb49(0x192));try{const _0x932bf0=await _0x213efe['generateContent'](_0x1f8709),_0x94ca6e=await _0x932bf0[_0x14cb49(0x18f)],_0xd8e6d9=_0x94ca6e[_0x14cb49(0x172)]()?.[_0x14cb49(0x19b)]();if(!_0xd8e6d9)return logger[_0x14cb49(0x154)]({},_0x14cb49(0x16e)),_0x14cb49(0x18e);return logger[_0x14cb49(0x19d)]({'response':_0xd8e6d9},'Received\x20final\x20response\x20from\x20Gemini.'),_0xd8e6d9;}catch(_0x90672b){return logger[_0x14cb49(0x154)](_0x90672b,_0x14cb49(0x185)),_0x14cb49(0x162);}}