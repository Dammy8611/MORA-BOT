const a0_0x5c2017=a0_0x56f8;(function(_0x1a1181,_0x405e22){const _0x494d08=a0_0x56f8,_0x577869=_0x1a1181();while(!![]){try{const _0x37d80=-parseInt(_0x494d08(0xce))/0x1*(-parseInt(_0x494d08(0xdd))/0x2)+-parseInt(_0x494d08(0xc0))/0x3+-parseInt(_0x494d08(0xc2))/0x4*(-parseInt(_0x494d08(0xb6))/0x5)+parseInt(_0x494d08(0xea))/0x6+parseInt(_0x494d08(0xbf))/0x7*(-parseInt(_0x494d08(0xe0))/0x8)+parseInt(_0x494d08(0xd4))/0x9*(-parseInt(_0x494d08(0xd6))/0xa)+parseInt(_0x494d08(0xd5))/0xb;if(_0x37d80===_0x405e22)break;else _0x577869['push'](_0x577869['shift']());}catch(_0x45fe7c){_0x577869['push'](_0x577869['shift']());}}}(a0_0x413f,0xbc545));const fs=require('fs'),path=require(a0_0x5c2017(0x106)),{GoogleGenerativeAI}=require(a0_0x5c2017(0xf6)),{parseArgs}=require(a0_0x5c2017(0xdf)),{resolveCommand}=require(a0_0x5c2017(0xc4)),{settings:botSettings}=require(a0_0x5c2017(0xe4)),{StatusUpdater}=require('../../utils/statusUpdater.js'),API_KEYS_FILE=path['join'](__dirname,'..','..',a0_0x5c2017(0xf8),a0_0x5c2017(0xad));function loadApiKeys(){const _0x861ef2=a0_0x5c2017;if(!fs[_0x861ef2(0xc3)](API_KEYS_FILE))throw new Error(_0x861ef2(0xac));return fs[_0x861ef2(0xa7)](API_KEYS_FILE,_0x861ef2(0xe3))[_0x861ef2(0xd3)](/\r?\n/)[_0x861ef2(0xba)](Boolean);}const apiKeys=loadApiKeys();function a0_0x56f8(_0x19060c,_0x3d3934){const _0x413fa2=a0_0x413f();return a0_0x56f8=function(_0x56f81c,_0xe68451){_0x56f81c=_0x56f81c-0xa5;let _0x55995e=_0x413fa2[_0x56f81c];return _0x55995e;},a0_0x56f8(_0x19060c,_0x3d3934);}let currentKeyIndex=0x0;function setupGenAI(){const _0x21c65e=a0_0x5c2017,_0x32158a=apiKeys[currentKeyIndex],_0x3d66ef=new GoogleGenerativeAI(_0x32158a);return _0x3d66ef['getGenerativeModel']({'model':_0x21c65e(0xa6)});}let model=setupGenAI();function a0_0x413f(){const _0x391b4b=['run','‚ùå\x20not\x20found','generateContent','gemini-2.5-flash','readFileSync','shift','\x0aRespond\x20casually\x20and\x20helpfully:','Rate\x20limit\x20error:','slice','apiKeys.txt\x20not\x20found','apiKeys.txt','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','join','length','participant','meta','Failed\x20to\x20process\x20your\x20request.','(command\x20ran\x20but\x20gave\x20no\x20output)','global','115115NzPXnB','string','.\x0aUser\x20said:\x20\x22','User:\x20','filter','\x20of\x20','üß†\x20Remixing\x20with\x20AI...','\x22\x0aCommand\x20output:\x0a','assistant','3514MLawmm','3392466jlJDrC','now','116ptzwQv','existsSync','./index','isArray','\x0a\x0aUser:\x20','\x0a\x0aYou\x20are\x20','remoteJid','text','name','‚úÖ\x20Command(s)\x20completed','‚öôÔ∏è\x20Running\x20/','keys','29WcnXeR','ownerName','direct','message','update','split','90SzoImR','26261664IdpNCe','1102270tYTyoU','ai_memory.json','users','extendedTextMessage','args','replace','exports','74586CUuJev','.ai\x20<prompt>','../../utils/parseArgs','22880RfrNRG','response','push','utf8','../../settings','[runCommand]\x20Trying\x20to\x20resolve:','Command\x20failed','Error\x20with\x20current\x20API\x20key:','...','trim','1821726jAOcSI','stringify','toLocaleString','parse','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','Switched\x20to\x20key\x20','ai_remember.json','\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22','botName','commandsToRun\x20is\x20not\x20an\x20array:','error','contextInfo','@google/generative-ai','Error\x20extracting\x20commands:','secrets','log','\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a','sendMessage','user','[runCommand]\x20Resolved\x20to:','map','command','done','Talk\x20to\x20MORA-AI','\x0aCommands\x20used:\x20','msg','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','path','[extractCommands]\x20Gemini\x20raw\x20output:\x0a'];a0_0x413f=function(){return _0x391b4b;};return a0_0x413f();}function rotateKey(){const _0x40a1a8=a0_0x5c2017;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys[_0x40a1a8(0xb0)],model=setupGenAI(),console[_0x40a1a8(0xf9)](_0x40a1a8(0xef)+(currentKeyIndex+0x1)+_0x40a1a8(0xbb)+apiKeys[_0x40a1a8(0xb0)]);}const persona='You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20‚Äî\x20keep\x20replies\x20short\x20and\x20energetic.\x20üéßüî•',MEM_FILE=path[a0_0x5c2017(0xaf)](__dirname,'..','..',a0_0x5c2017(0xf8),a0_0x5c2017(0xd7)),REM_FILE=path[a0_0x5c2017(0xaf)](__dirname,'..','..',a0_0x5c2017(0xf8),a0_0x5c2017(0xf0)),loadJson=(_0x18467c,_0x3a7569={})=>fs[a0_0x5c2017(0xc3)](_0x18467c)?JSON[a0_0x5c2017(0xed)](fs[a0_0x5c2017(0xa7)](_0x18467c,a0_0x5c2017(0xe3))):_0x3a7569,saveJson=(_0x27eff8,_0x438d67)=>fs['writeFileSync'](_0x27eff8,JSON[a0_0x5c2017(0xeb)](_0x438d67,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x3acaec,_0x416839,_0x32cbc2)=>{const _0x1416fb=a0_0x5c2017;if(!MEMORY[_0x3acaec])MEMORY[_0x3acaec]=[];MEMORY[_0x3acaec][_0x1416fb(0xe2)]({'role':_0x416839,'msg':_0x32cbc2,'ts':Date[_0x1416fb(0xc1)]()});if(MEMORY[_0x3acaec][_0x1416fb(0xb0)]>MAX_MEMORY)MEMORY[_0x3acaec][_0x1416fb(0xa8)]();saveJson(MEM_FILE,MEMORY);},getMemory=_0x5dde6f=>(MEMORY[_0x5dde6f]||[])[a0_0x5c2017(0xab)](-MAX_MEMORY)[a0_0x5c2017(0xfe)](_0x5e03cb=>_0x5e03cb['role']+':\x20'+_0x5e03cb[a0_0x5c2017(0x103)])[a0_0x5c2017(0xaf)]('\x0a');async function runCommand(_0x3b351f,_0x4d3893,_0x14953a,_0x518f4c,_0x2a3b8b){const _0x495c65=a0_0x5c2017;console['log'](_0x495c65(0xe5),_0x3b351f);const _0x210f94=resolveCommand(_0x3b351f);console[_0x495c65(0xf9)](_0x495c65(0xfd),_0x210f94?.[_0x495c65(0xff)]?.[_0x495c65(0xb2)]?.['name']||_0x495c65(0x109));if(!_0x210f94)return{'output':null,'directUsed':![]};const {command:_0x5a9369}=_0x210f94,_0x176ea9=_0x4d3893['trim']()['split'](/\s+/),{args:_0x5ec1b5,flags:_0x242a1f}=parseArgs(_0x176ea9,_0x5a9369['meta'][_0x495c65(0xda)]||[]);let _0x31e6bb='',_0x159148=![];const _0x291d55={'sendMessage':async(_0x1c3c47,_0x52461b)=>{const _0x41d53b=_0x495c65,_0x4df5c4=typeof _0x52461b===_0x41d53b(0xb7)?_0x52461b:_0x52461b['text']||'';_0x31e6bb+=_0x4df5c4,_0x5a9369[_0x41d53b(0xb2)][_0x41d53b(0xd0)]===!![]&&(await _0x518f4c[_0x41d53b(0xfb)](_0x14953a,_0x52461b),_0x159148=!![]);}};try{await _0x5a9369[_0x495c65(0x108)]({'m':{'key':{'remoteJid':_0x14953a},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x2a3b8b}}}},'sock':_0x291d55,'args':_0x5ec1b5,'flags':_0x242a1f,'executeCommand':()=>{}});if(!_0x31e6bb['trim']())_0x31e6bb=_0x495c65(0xb4);}catch(_0x511376){_0x31e6bb='‚ùå\x20'+(_0x511376['message']||_0x495c65(0xe6));}return{'output':_0x31e6bb[_0x495c65(0xe9)](),'directUsed':_0x159148};}async function extractCommands(_0x5e3b67){const _0x1874be=a0_0x5c2017,{commandMap:_0x2b27be,aliasMap:_0x16542a}=require(_0x1874be(0xc4)),_0x53f078=[...new Set([..._0x2b27be[_0x1874be(0xcd)](),..._0x16542a[_0x1874be(0xcd)]()])],_0x113c76=_0x1874be(0xf1)+_0x5e3b67+_0x1874be(0xae)+_0x53f078[_0x1874be(0xaf)](',\x20')+_0x1874be(0xfa);try{const _0x2e98cf=await model[_0x1874be(0xa5)](_0x113c76);let _0x1d5a37=_0x2e98cf[_0x1874be(0xe1)][_0x1874be(0xc9)]()[_0x1874be(0xe9)]();_0x1d5a37=_0x1d5a37['replace'](/`/g,'')[_0x1874be(0xdb)](/```json/g,'')[_0x1874be(0xdb)](/```/g,''),console[_0x1874be(0xf9)](_0x1874be(0x107),_0x1d5a37);const _0x319cc4=JSON['parse'](_0x1d5a37);if(!Array[_0x1874be(0xc5)](_0x319cc4))return console[_0x1874be(0xf4)]('extractCommands:\x20Expected\x20array,\x20got:',_0x319cc4),[];return _0x319cc4;}catch(_0x356433){return console[_0x1874be(0xf4)](_0x1874be(0x105),_0x356433),[];}}module[a0_0x5c2017(0xdc)]={'meta':{'name':'ai','description':a0_0x5c2017(0x101),'usage':a0_0x5c2017(0xde),'args':[{'name':a0_0x5c2017(0xc9),'type':a0_0x5c2017(0xb7),'greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x2d2a4a,sock:_0x9f02ec,args:_0x238281})=>{const _0x1fe144=a0_0x5c2017,_0xee2014=_0x2d2a4a['key'][_0x1fe144(0xc8)],_0x2efbbf=_0x2d2a4a['key'][_0x1fe144(0xb1)]||_0xee2014,_0x4dddfe=_0x238281[_0x1fe144(0xc9)],_0x1157ba=_0x2d2a4a[_0x1fe144(0xd1)]?.[_0x1fe144(0xd9)]?.[_0x1fe144(0xf5)]?.['quotedMessage'],_0x736226=new StatusUpdater(_0x9f02ec,_0xee2014);await _0x736226['start'](),await _0x736226[_0x1fe144(0xd2)]('ü§ñ\x20Thinking...'),addMemory(_0x2efbbf,_0x1fe144(0xfc),_0x4dddfe);let _0x21b2ee;try{await _0x736226[_0x1fe144(0xd2)]('üîç\x20Extracting\x20commands...'),_0x21b2ee=await extractCommands(_0x4dddfe);}catch(_0x99c0d6){return console[_0x1fe144(0xf4)](_0x1fe144(0xf7),_0x99c0d6),_0x9f02ec['sendMessage'](_0xee2014,{'text':'Failed\x20to\x20process\x20your\x20request.'});}if(!Array['isArray'](_0x21b2ee))return console[_0x1fe144(0xf4)](_0x1fe144(0xf3),_0x21b2ee),_0x9f02ec[_0x1fe144(0xfb)](_0xee2014,{'text':_0x1fe144(0xb3)});const _0x4246df=[];let _0x41c7cb=![];for(const {name:_0x1e93cc,args:_0xe9890a}of _0x21b2ee){await _0x736226[_0x1fe144(0xd2)](_0x1fe144(0xcc)+_0x1e93cc+_0x1fe144(0xe8));const {output:_0x47e708,directUsed:_0x42043f}=await runCommand(_0x1e93cc,_0xe9890a,_0xee2014,_0x9f02ec,_0x1157ba);if(_0x47e708)_0x4246df[_0x1fe144(0xe2)]({'name':_0x1e93cc,'raw':_0x47e708});if(_0x42043f)_0x41c7cb=!![];}const _0x20e39e=_0x4246df[_0x1fe144(0xfe)](_0x4afa4b=>_0x4afa4b[_0x1fe144(0xca)]+':\x20'+_0x4afa4b['raw'])[_0x1fe144(0xaf)]('\x0a');if(_0x41c7cb){console[_0x1fe144(0xf9)]('Command\x20used\x20direct:true\x20‚Äî\x20skipping\x20summary\x20AI\x20reply'),await _0x736226[_0x1fe144(0x100)](_0x1fe144(0xcb));return;}const _0x538754=persona+_0x1fe144(0xc7)+botSettings[_0x1fe144(0xf2)]+',\x20owned\x20by\x20'+botSettings[_0x1fe144(0xcf)]+'.\x0aTime\x20now:\x20'+new Date()[_0x1fe144(0xec)]()+_0x1fe144(0xb8)+_0x4dddfe+_0x1fe144(0xbd)+_0x20e39e+'\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201‚Äì2\x20lines.';let _0x123300='';const _0x38648c=0x3;let _0x146c98=0x0;while(_0x146c98<_0x38648c){try{await _0x736226[_0x1fe144(0xd2)](_0x1fe144(0xbc));const _0xf84f39=await model[_0x1fe144(0xa5)](_0x538754);_0x123300=_0xf84f39[_0x1fe144(0xe1)][_0x1fe144(0xc9)]()[_0x1fe144(0xe9)]();break;}catch(_0x529d4c){if(_0x529d4c['data']===0x1ad){console[_0x1fe144(0xf4)](_0x1fe144(0xaa),_0x529d4c),_0x146c98++;const _0x1022b0=Math['pow'](0x2,_0x146c98)*0x3e8;await new Promise(_0x481164=>setTimeout(_0x481164,_0x1022b0)),rotateKey();}else{console[_0x1fe144(0xf4)](_0x1fe144(0xe7),_0x529d4c),_0x123300=_0x1fe144(0x104);break;}}}if(!_0x4246df[_0x1fe144(0xb0)]){const _0x1bf864=persona+_0x1fe144(0xc6)+_0x4dddfe+_0x1fe144(0xa9);try{const _0x33d122=await model['generateContent'](_0x1bf864);_0x123300=_0x33d122[_0x1fe144(0xe1)][_0x1fe144(0xc9)]()[_0x1fe144(0xe9)]();}catch(_0x5af491){console[_0x1fe144(0xf4)](_0x1fe144(0xe7),_0x5af491),_0x123300=_0x1fe144(0x104);}}addMemory(_0x2efbbf,_0x1fe144(0xbe),_0x123300);const _0x3e9db3=_0x1fe144(0xb9)+_0x4dddfe+_0x1fe144(0x102)+_0x4246df['map'](_0x489bbb=>_0x489bbb[_0x1fe144(0xca)])[_0x1fe144(0xaf)](',')+'\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}';try{const _0x2ecf17=await model[_0x1fe144(0xa5)](_0x3e9db3),_0x40a886=JSON[_0x1fe144(0xed)](_0x2ecf17['response']['text']());if(_0x40a886[_0x1fe144(0xfc)])REMEMBER[_0x1fe144(0xd8)][_0x2efbbf]=_0x40a886[_0x1fe144(0xfc)];if(_0x40a886[_0x1fe144(0xb5)])REMEMBER['global']=_0x40a886[_0x1fe144(0xb5)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x18224c=_0x123300+_0x1fe144(0xee);await _0x736226[_0x1fe144(0x100)](_0x18224c);}};