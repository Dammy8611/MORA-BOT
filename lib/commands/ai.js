const a0_0x42d12f=a0_0x3282;(function(_0x14fa18,_0x33f288){const _0x307488=a0_0x3282,_0x28a158=_0x14fa18();while(!![]){try{const _0x10eaab=parseInt(_0x307488(0xcd))/0x1*(-parseInt(_0x307488(0x9d))/0x2)+-parseInt(_0x307488(0xaf))/0x3*(parseInt(_0x307488(0xd8))/0x4)+parseInt(_0x307488(0xc3))/0x5*(-parseInt(_0x307488(0xea))/0x6)+parseInt(_0x307488(0xca))/0x7+parseInt(_0x307488(0xf6))/0x8+-parseInt(_0x307488(0xda))/0x9*(parseInt(_0x307488(0xa6))/0xa)+-parseInt(_0x307488(0xd7))/0xb;if(_0x10eaab===_0x33f288)break;else _0x28a158['push'](_0x28a158['shift']());}catch(_0x3b2603){_0x28a158['push'](_0x28a158['shift']());}}}(a0_0x1855,0x36039));const {GoogleGenerativeAI}=require(a0_0x42d12f(0xe3)),{getCommandMap}=require(a0_0x42d12f(0xab)),{executeAiCommand}=require(a0_0x42d12f(0xe6)),{StatusUpdater}=require(a0_0x42d12f(0xa2)),{loadMemory,saveMemory}=require(a0_0x42d12f(0xde)),logger={'info':(_0x295c27,_0x7b4d18)=>console['log'](a0_0x42d12f(0xbc)+_0x7b4d18,_0x295c27),'error':(_0x97b822,_0xdc0f4c)=>console['error'](a0_0x42d12f(0xc1)+_0xdc0f4c,_0x97b822)},genAI=new GoogleGenerativeAI('AIzaSyDO4v1a36TNgunFzm7N-FzT3WYJnwIpbRI');function a0_0x3282(_0xa17fd0,_0x55913f){const _0x18552a=a0_0x1855();return a0_0x3282=function(_0x3282d2,_0x5073fb){_0x3282d2=_0x3282d2-0x9a;let _0x573b8d=_0x18552a[_0x3282d2];return _0x573b8d;},a0_0x3282(_0xa17fd0,_0x55913f);}function a0_0x1855(){const _0xebc7f1=['[INFO]\x20','Running\x20command(s):\x20','description','Parsed\x20JSON\x20response','filter','[ERROR]\x20','extendedTextMessage','267690tussXZ','None','error','All\x20command\x20outputs\x20were\x20handled\x20directly.\x20Skipping\x20Remix.','Remix\x20Layer\x20received\x20context.','There\x20was\x20an\x20error\x20in\x20my\x20thinking\x20process.','text','2573060joojKF','No\x20commands\x20to\x20execute.','key','9123gQcQMj','Remix\x20Layer\x20context','\x0aYou\x20are\x20the\x20\x22Thinking\x20Layer\x22\x20for\x20a\x20bot\x20named\x20Mora.\x20Your\x20job\x20is\x20to\x20analyze\x20a\x20user\x27s\x20prompt\x20and\x20decide\x20which,\x20if\x20any,\x20of\x20the\x20available\x20commands\x20should\x20be\x20executed.\x0a\x0aYou\x20must\x20respond\x20in\x20a\x20JSON\x20format\x20with\x20two\x20properties:\x0a1.\x20\x22decision\x22:\x20A\x20string\x20explaining\x20your\x20reasoning.\x0a2.\x20\x22commands\x22:\x20An\x20array\x20of\x20strings,\x20where\x20each\x20string\x20is\x20the\x20full\x20command\x20to\x20execute\x20(e.g.,\x20\x22.weather\x20London\x22).\x0a\x0aHere\x20is\x20the\x20recent\x20conversation\x20history\x20(if\x20any):\x0a','info','prompt','length','audio','unknown','Thinking\x20Layer\x20received\x20prompt.','quotedMessage','2112242OooqFx','3892zilgCT','update','40410mehSVI','AI\x20command\x20invoked','Sending\x20system\x20prompt\x20to\x20Gemini','contextInfo','../memory.js','...','exports','\x22\x0aCommands\x20I\x20ran\x20and\x20their\x20output:\x0a','done','@google/generative-ai','isDirect','join','../core/executeCommand','I\x27m\x20a\x20bit\x20flustered\x20right\x20now,\x20something\x20went\x20wrong\x20while\x20I\x20was\x20trying\x20to\x20be\x20witty.','message','Entering\x20Command\x20Execution\x20phase','18fNweTL','usage','direct','conversation','split','The\x20prompt\x20for\x20the\x20AI.','trim','I\x20couldn\x27t\x20figure\x20out\x20what\x20to\x20do\x20from\x20that.','AI\x20command\x20failed','gemini-2.5-pro','values','push','3451328EAUnuw','commands','name','commandOutputs','Entering\x20Thinking\x20Layer...','sendMessage','getGenerativeModel','stringify','Command\x20returned\x20a\x20file.\x20Sending\x20directly.','response','Invalid\x20or\x20empty\x20Gemini\x20JSON\x20response','Uhh,\x20I\x20spaced\x20out\x20for\x20a\x20second\x20there\x20🤯','Cleaned\x20Gemini\x20response','20qWYHhS','Entering\x20Remix\x20Layer...','meta','map','A\x20friendly\x20AI\x20assistant\x20named\x20Mora.','../../utils/statusUpdater.js','Received\x20response\x20from\x20Gemini','\x0a\x0aHere\x20are\x20the\x20available\x20commands\x20you\x20can\x20use:\x0a','Command\x20execution\x20finished','140xYjkPQ','Remix\x20Layer\x20finished','\x22\x0aMy\x20internal\x20thought\x20process:\x20\x22','Thinking\x20Layer\x20finished','Error\x20in\x20Gemini\x20Remix\x20Layer','./index','replace','\x0a\x0aMessage\x20reply\x20(if\x20any).\x20If\x20null\x20then\x20reply\x20is\x20an\x20image\x20or\x20video\x20you\x20can\x27t\x20see\x20those\x20yet:\x0a','generateContent','219ALEBqa','start','[Sent\x20a\x20file:\x20','Gotcha,\x20all\x20commands\x20handled.\x20✨','decision','includes','Executing\x20command','Returning\x20from\x20Thinking\x20Layer','remoteJid','\x0a\x0aAnalyze\x20the\x20user\x27s\x20prompt\x20and\x20determine\x20the\x20most\x20appropriate\x20command(s)\x20to\x20run.\x0a-\x20If\x20a\x20command\x20needs\x20arguments,\x20extract\x20them\x20from\x20the\x20prompt.\x0a-\x20Understand\x20the\x20users\x20prompt\x20first\x20and\x20command\x20argument.\x20Don\x27t\x20just\x20use\x20the\x20users\x20prompt\x20word\x20for\x20word\x0a-\x20If\x20the\x20prompt\x20is\x20just\x20a\x20greeting\x20or\x20a\x20general\x20chat\x20message,\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20Do\x20not\x20try\x20to\x20run\x20commands\x20that\x20are\x20not\x20on\x20the\x20list.\x0a-\x20If\x20the\x20user\x20asks\x20for\x20something\x20that\x20requires\x20a\x20command,\x20but\x20doesn\x27t\x20provide\x20the\x20necessary\x20arguments\x20(e.g.,\x20\x22.weather\x22),\x20ask\x20them\x20for\x20the\x20missing\x20information\x20in\x20your\x20\x22decision\x22\x20and\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20If\x20the\x20user\x20asks\x20or\x20responds\x20to\x20something\x20in\x20the\x20recent\x20conversation\x20history,\x20your\x20response\x20decision\x20should\x20be\x20detailed\x20because\x20your\x20remix\x20layer\x20has\x20no\x20access\x20to\x20the\x20previuos\x20memory\x20and\x20so\x20it\x20knows\x20what\x20the\x20context\x20is\x20exactly\x0a\x0aUser\x20Prompt:\x20\x22','participant','command','Received\x20final\x20response\x20from\x20Gemini.'];a0_0x1855=function(){return _0xebc7f1;};return a0_0x1855();}module[a0_0x42d12f(0xe0)]={'meta':{'name':'ai','description':a0_0x42d12f(0xa1),'usage':'.ai\x20<prompt>','category':'AI','ownerOnly':![],'ai':![],'args':[{'name':a0_0x42d12f(0xd1),'required':!![],'greedy':!![],'description':a0_0x42d12f(0xef)}]},'run':async({m:_0x38cf51,sock:_0x1351e6,args:_0x237e96,flags:_0x10f386,executeCommand:_0x58dab8,metadata:_0x2d9528})=>{const _0x538c36=a0_0x42d12f,_0x55f418=_0x38cf51[_0x538c36(0xcc)]['remoteJid'],_0x25eaa7=_0x38cf51[_0x538c36(0xcc)][_0x538c36(0xb9)]||_0x55f418,_0x247155=_0x38cf51['pushName']||null,_0x3c9c29=_0x237e96[_0x538c36(0xd1)];logger[_0x538c36(0xd0)]({'user':_0x38cf51['pushName'],'prompt':_0x3c9c29},_0x538c36(0xdb));const _0x4fad86=new StatusUpdater(_0x1351e6,_0x55f418);await _0x4fad86[_0x538c36(0xb0)]();try{const _0x1d475b=await loadMemory(_0x55f418,_0x25eaa7);logger[_0x538c36(0xd0)]({},_0x538c36(0xfa)),await _0x4fad86[_0x538c36(0xd9)]('🤔\x20Thinking....');const _0x1c9a9b=await thinkingLayer(_0x3c9c29,_0x1d475b,_0x38cf51,_0x2d9528);logger['info'](_0x1c9a9b,_0x538c36(0xa9)),logger[_0x538c36(0xd0)]({'prompt':_0x3c9c29,'decision':_0x1c9a9b[_0x538c36(0xb3)],'commandsToRun':_0x1c9a9b['commands']},'AI\x20Thinking\x20Layer\x20Processed');let _0x1f6269=[];if(_0x1c9a9b[_0x538c36(0xf7)]&&_0x1c9a9b[_0x538c36(0xf7)][_0x538c36(0xd2)]>0x0){logger[_0x538c36(0xd0)]({'commands':_0x1c9a9b['commands']},_0x538c36(0xe9)),await _0x4fad86[_0x538c36(0xd9)](_0x538c36(0xbd)+_0x1c9a9b[_0x538c36(0xf7)][_0x538c36(0xe5)](',\x20')+_0x538c36(0xdf));for(const _0x558ee2 of _0x1c9a9b[_0x538c36(0xf7)]){logger[_0x538c36(0xd0)]({'commandString':_0x558ee2},_0x538c36(0xb5));const _0x435040=_0x558ee2['trim']()[_0x538c36(0xee)](/\s+/);_0x435040[0x0]=_0x435040[0x0]['slice'](0x1);const _0x5139a0=_0x435040[0x0],_0x42bf4f=await executeAiCommand({'m':_0x38cf51,'sock':_0x1351e6,'tokens':['!'+_0x5139a0,..._0x435040['slice'](0x1)],'metadata':_0x2d9528});if(_0x42bf4f&&!_0x42bf4f[_0x538c36(0xc9)]){logger[_0x538c36(0xd0)]({'command':_0x5139a0,'content':_0x42bf4f},_0x538c36(0xfe)),await _0x4fad86[_0x538c36(0xe2)](_0x538c36(0xe2)),await _0x1351e6[_0x538c36(0xfb)](_0x38cf51[_0x538c36(0xcc)][_0x538c36(0xb7)],_0x42bf4f),_0x1f6269[_0x538c36(0xf5)]({'command':_0x5139a0,'output':_0x538c36(0xb1)+(_0x42bf4f[_0x538c36(0xd3)]?_0x538c36(0xd3):_0x538c36(0xd4))+']','isDirect':!![]});continue;}const _0x429877=_0x42bf4f?_0x42bf4f[_0x538c36(0xc9)]:'No\x20textual\x20output.';_0x1f6269[_0x538c36(0xf5)]({'command':_0x5139a0,'output':_0x429877}),logger[_0x538c36(0xd0)]({'command':_0x5139a0,'output':_0x429877},_0x538c36(0xa5));}}else logger[_0x538c36(0xd0)]({},_0x538c36(0xcb));if(_0x1f6269['length']>0x0&&_0x1f6269['every'](_0xf48264=>_0xf48264[_0x538c36(0xe4)])){logger[_0x538c36(0xd0)]({},'All\x20commands\x20were\x20handled\x20directly.\x20Skipping\x20Remix\x20Layer.');return;}logger[_0x538c36(0xd0)]({},_0x538c36(0x9e));const _0x10cf87={'prompt':_0x3c9c29,'decision':_0x1c9a9b[_0x538c36(0xb3)],'commandOutputs':_0x1f6269};logger[_0x538c36(0xd0)]({'context':_0x10cf87},_0x538c36(0xce));const _0x2a353e=await remixLayer(_0x10cf87);logger[_0x538c36(0xd0)]({'finalResponse':_0x2a353e},_0x538c36(0xa7)),await saveMemory(_0x55f418,_0x25eaa7,_0x3c9c29,_0x2a353e,_0x247155,_0x1f6269),await _0x4fad86[_0x538c36(0xe2)](_0x2a353e);}catch(_0xb86c25){logger['error'](_0xb86c25,_0x538c36(0xf2)),await _0x4fad86['done']('Sorry,\x20something\x20went\x20wrong\x20with\x20my\x20circuits.\x20😵‍💫');}}};async function thinkingLayer(_0x191f14,_0x53abdc,_0x2ad4e1,_0x339a8d){const _0x3934e8=a0_0x42d12f;logger[_0x3934e8(0xd0)]({'prompt':_0x191f14},_0x3934e8(0xd5));const _0xb043b2=genAI[_0x3934e8(0xfc)]({'model':_0x3934e8(0xf3)}),_0x4599a1=getCommandMap(),_0x5c596c=Array['from'](_0x4599a1[_0x3934e8(0xf4)]())[_0x3934e8(0xc0)](_0x3f31cd=>_0x3f31cd[_0x3934e8(0x9f)]['ai']!==![])[_0x3934e8(0xa0)](_0x3b47e5=>({'name':_0x3b47e5['meta']['name'],'description':_0x3b47e5['meta'][_0x3934e8(0xbe)],'usage':_0x3b47e5['meta'][_0x3934e8(0xeb)],'direct':_0x3b47e5[_0x3934e8(0x9f)][_0x3934e8(0xec)]||![],'args':(_0x3b47e5[_0x3934e8(0x9f)]['args']||[])[_0x3934e8(0xa0)](_0x3634a2=>_0x3634a2[_0x3934e8(0xf8)]+'\x20('+_0x3634a2[_0x3934e8(0xbe)]+')')[_0x3934e8(0xe5)](',\x20')}));logger['info']({'count':_0x5c596c['length']},'Generated\x20callable\x20command\x20list\x20for\x20AI');const _0x35afcd=_0x3934e8(0xcf)+JSON[_0x3934e8(0xfd)](_0x53abdc,null,0x2)+_0x3934e8(0xa4)+JSON[_0x3934e8(0xfd)](_0x5c596c,null,0x2)+_0x3934e8(0xad)+(_0x2ad4e1[_0x3934e8(0xe8)][_0x3934e8(0xc2)]?.[_0x3934e8(0xdd)]?.[_0x3934e8(0xd6)]?.[_0x3934e8(0xed)]||_0x3934e8(0xc4))+_0x3934e8(0xb8)+_0x191f14+'\x22\x0a';logger[_0x3934e8(0xd0)](_0x3934e8(0xdc));try{const _0xffcd78=await _0xb043b2[_0x3934e8(0xae)](_0x35afcd),_0x53a96f=await _0xffcd78[_0x3934e8(0xff)][_0x3934e8(0xc9)]();logger[_0x3934e8(0xd0)]({'responseText':_0x53a96f},_0x3934e8(0xa3));const _0x4b34e9=_0x53a96f['replace'](/```json/g,'')[_0x3934e8(0xac)](/```/g,'')[_0x3934e8(0xf0)]();logger[_0x3934e8(0xd0)]({'cleanedText':_0x4b34e9},_0x3934e8(0x9c));if(!_0x4b34e9||!_0x4b34e9[_0x3934e8(0xb4)]('{')||!_0x4b34e9[_0x3934e8(0xb4)]('}'))return logger[_0x3934e8(0xc5)]({'cleanedText':_0x4b34e9},_0x3934e8(0x9a)),{'decision':_0x3934e8(0xf1),'commands':[]};const _0x1b4397=JSON['parse'](_0x4b34e9);logger[_0x3934e8(0xd0)]({'jsonResponse':_0x1b4397},_0x3934e8(0xbf));const _0x14cba6={'decision':_0x1b4397['decision'],'commands':_0x1b4397[_0x3934e8(0xf7)]||[]};return logger[_0x3934e8(0xd0)]({'thinkingResult':_0x14cba6},_0x3934e8(0xb6)),_0x14cba6;}catch(_0x1deb30){return logger[_0x3934e8(0xc5)](_0x1deb30,'Error\x20in\x20Gemini\x20Thinking\x20Layer'),{'decision':_0x3934e8(0xc8),'commands':[]};}}async function remixLayer(_0x13740){const _0x4b19a4=a0_0x42d12f;logger['info']({'context':_0x13740},_0x4b19a4(0xc7));const _0xb20bba=genAI['getGenerativeModel']({'model':_0x4b19a4(0xf3)}),_0x1f3725=_0x13740['commandOutputs']['filter'](_0x57c2be=>!_0x57c2be['isDirect']);if(_0x1f3725[_0x4b19a4(0xd2)]===0x0&&_0x13740[_0x4b19a4(0xf9)][_0x4b19a4(0xd2)]>0x0)return logger[_0x4b19a4(0xd0)]({},_0x4b19a4(0xc6)),_0x4b19a4(0xb2);const _0x346c35='\x0a\x20\x20You\x20are\x20Mora,\x20a\x20smart,\x20witty\x20Gen\x20Z\x20assistant.\x0aYour\x20personality\x20is\x20helpful,\x20a\x20little\x20sassy,\x20and\x20you\x20use\x20modern\x20slang.\x0aBased\x20on\x20the\x20following\x20information,\x20craft\x20a\x20response\x20to\x20the\x20user.\x0a\x0a---\x0aOriginal\x20User\x20Prompt:\x20\x22'+_0x13740[_0x4b19a4(0xd1)]+_0x4b19a4(0xa8)+_0x13740[_0x4b19a4(0xb3)]+_0x4b19a4(0xe1)+(_0x1f3725[_0x4b19a4(0xa0)](_0xa4fad7=>'-\x20'+_0xa4fad7[_0x4b19a4(0xba)]+':\x20'+_0xa4fad7['output'])['join']('\x0a')||'None')+'\x0a---\x0a\x0aYour\x20response\x20should\x20be\x20natural\x20and\x20conversational.\x20Don\x27t\x20just\x20state\x20the\x20facts,\x20remix\x20them\x20into\x20a\x20proper\x20answer.\x0aMake\x20your\x20responses\x20short\x20and\x20concise\x20like\x20you\x20are\x20talking\x20to\x20a\x20friend\x0aDont\x20make\x20refrences\x20to\x20your\x20thinking\x20layer,\x20your\x20output\x20should\x20be\x20as\x20though\x20you\x20already\x20know\x20it\x0a';logger[_0x4b19a4(0xd0)]('Sending\x20final\x20prompt\x20to\x20Gemini\x20for\x20remixing.');try{const _0x7d6133=await _0xb20bba[_0x4b19a4(0xae)](_0x346c35),_0x4f82df=await _0x7d6133[_0x4b19a4(0xff)],_0x33e3c4=_0x4f82df['text']()?.['trim']();if(!_0x33e3c4)return logger[_0x4b19a4(0xc5)]({},'Remix\x20layer\x20returned\x20empty\x20text'),_0x4b19a4(0x9b);return logger['info']({'response':_0x33e3c4},_0x4b19a4(0xbb)),_0x33e3c4;}catch(_0x551680){return logger[_0x4b19a4(0xc5)](_0x551680,_0x4b19a4(0xaa)),_0x4b19a4(0xe7);}}