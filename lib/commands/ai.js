const a0_0x1c1520=a0_0x2c78;(function(_0x49995f,_0x27bb57){const _0x975071=a0_0x2c78,_0xc60d7e=_0x49995f();while(!![]){try{const _0x191048=parseInt(_0x975071(0x21d))/0x1+-parseInt(_0x975071(0x1ee))/0x2*(-parseInt(_0x975071(0x1fa))/0x3)+parseInt(_0x975071(0x1e4))/0x4+-parseInt(_0x975071(0x225))/0x5*(parseInt(_0x975071(0x234))/0x6)+parseInt(_0x975071(0x236))/0x7*(parseInt(_0x975071(0x20f))/0x8)+parseInt(_0x975071(0x23b))/0x9+-parseInt(_0x975071(0x228))/0xa*(parseInt(_0x975071(0x1fd))/0xb);if(_0x191048===_0x27bb57)break;else _0xc60d7e['push'](_0xc60d7e['shift']());}catch(_0x2445a1){_0xc60d7e['push'](_0xc60d7e['shift']());}}}(a0_0x2ddd,0xbeacd));const fs=require('fs'),path=require(a0_0x1c1520(0x1ed)),{GoogleGenerativeAI}=require(a0_0x1c1520(0x202)),{parseArgs}=require(a0_0x1c1520(0x210)),{resolveCommand}=require(a0_0x1c1520(0x208)),{settings:botSettings}=require(a0_0x1c1520(0x1e5)),{StatusUpdater}=require(a0_0x1c1520(0x23d)),API_KEYS_FILE=path[a0_0x1c1520(0x204)](__dirname,'..',a0_0x1c1520(0x1f8),a0_0x1c1520(0x23a));function loadApiKeys(){const _0x2cf8f6=a0_0x1c1520;if(!fs[_0x2cf8f6(0x214)](API_KEYS_FILE))throw new Error(_0x2cf8f6(0x239));return fs['readFileSync'](API_KEYS_FILE,_0x2cf8f6(0x20a))['split'](/\r?\n/)['filter'](Boolean);}const apiKeys=loadApiKeys();function a0_0x2ddd(){const _0x2001e2=['[runCommand]\x20Resolved\x20to:','Command\x20failed','1624782ImBLdV','trim','21mCZpVJ','response','command','apiKeys.txt\x20not\x20found','apiKeys.txt','8806860rOLoxJ','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','../utils/statusUpdater.js','‚úÖ\x20Command(s)\x20completed','stringify','\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a','User:\x20','extendedTextMessage','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','message','sendMessage','now','1911656TJkndH','../settings','\x0aRespond\x20casually\x20and\x20helpfully:','‚öôÔ∏è\x20Running\x20/','length','direct','error','quotedMessage','\x20of\x20','path','2bAUPdy','[runCommand]\x20Trying\x20to\x20resolve:','user','pow','run','Command\x20used\x20direct:true\x20‚Äî\x20skipping\x20summary\x20AI\x20reply','Talk\x20to\x20MORA-AI','assistant','update','meta','secrets','gemini-2.5-flash','3836853bBEACf','Switched\x20to\x20key\x20','done','38109709yqydhp','Rate\x20limit\x20error:','ownerName','getGenerativeModel','.ai\x20<prompt>','@google/generative-ai','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','join','text','split','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','../lib/commands','Failed\x20to\x20process\x20your\x20request.','utf8','global','push',',\x20owned\x20by\x20','slice','4056872fbkadO','../utils/parseArgs','isArray','.\x0aUser\x20said:\x20\x22','exports','existsSync','log','\x0a\x0aUser:\x20','key','name','ai_memory.json','msg','participant','contextInfo','801183DhnBXz','\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201‚Äì2\x20lines.','üîç\x20Extracting\x20commands...','Error\x20with\x20current\x20API\x20key:','raw','parse','string','role','15AQhBZa','.\x0aTime\x20now:\x20','toLocaleString','10uzFfSk','data','extractCommands:\x20Expected\x20array,\x20got:','commandsToRun\x20is\x20not\x20an\x20array:','keys','Error\x20extracting\x20commands:','start','map','replace','generateContent'];a0_0x2ddd=function(){return _0x2001e2;};return a0_0x2ddd();}let currentKeyIndex=0x0;function setupGenAI(){const _0x21b120=a0_0x1c1520,_0x807e5b=apiKeys[currentKeyIndex],_0x6571cc=new GoogleGenerativeAI(_0x807e5b);return _0x6571cc[_0x21b120(0x200)]({'model':_0x21b120(0x1f9)});}let model=setupGenAI();function rotateKey(){const _0x1b7811=a0_0x1c1520;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys['length'],model=setupGenAI(),console[_0x1b7811(0x215)](_0x1b7811(0x1fb)+(currentKeyIndex+0x1)+_0x1b7811(0x1ec)+apiKeys[_0x1b7811(0x1e8)]);}const persona='You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20‚Äî\x20keep\x20replies\x20short\x20and\x20energetic.\x20üéßüî•',MEM_FILE=path[a0_0x1c1520(0x204)](__dirname,'..',a0_0x1c1520(0x1f8),a0_0x1c1520(0x219)),REM_FILE=path[a0_0x1c1520(0x204)](__dirname,'..','secrets','ai_remember.json'),loadJson=(_0x4a6f0f,_0x57d08e={})=>fs['existsSync'](_0x4a6f0f)?JSON[a0_0x1c1520(0x222)](fs['readFileSync'](_0x4a6f0f,a0_0x1c1520(0x20a))):_0x57d08e,saveJson=(_0x3ec370,_0x1dfba6)=>fs['writeFileSync'](_0x3ec370,JSON[a0_0x1c1520(0x23f)](_0x1dfba6,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x3a42af,_0x49598d,_0x2e0fd0)=>{const _0x3c0f5b=a0_0x1c1520;if(!MEMORY[_0x3a42af])MEMORY[_0x3a42af]=[];MEMORY[_0x3a42af][_0x3c0f5b(0x20c)]({'role':_0x49598d,'msg':_0x2e0fd0,'ts':Date[_0x3c0f5b(0x1e3)]()});if(MEMORY[_0x3a42af][_0x3c0f5b(0x1e8)]>MAX_MEMORY)MEMORY[_0x3a42af]['shift']();saveJson(MEM_FILE,MEMORY);},getMemory=_0x493f93=>(MEMORY[_0x493f93]||[])[a0_0x1c1520(0x20e)](-MAX_MEMORY)[a0_0x1c1520(0x22f)](_0x16cf30=>_0x16cf30[a0_0x1c1520(0x224)]+':\x20'+_0x16cf30[a0_0x1c1520(0x21a)])[a0_0x1c1520(0x204)]('\x0a');async function runCommand(_0x391560,_0x2b5afa,_0x22f09e,_0x13d8a6,_0x2380d2){const _0x568891=a0_0x1c1520;console[_0x568891(0x215)](_0x568891(0x1ef),_0x391560);const _0x5b892a=resolveCommand(_0x391560);console[_0x568891(0x215)](_0x568891(0x232),_0x5b892a?.[_0x568891(0x238)]?.['meta']?.['name']||'‚ùå\x20not\x20found');if(!_0x5b892a)return{'output':null,'directUsed':![]};const {command:_0xe245db}=_0x5b892a,_0x2fefd9=_0x2b5afa[_0x568891(0x235)]()[_0x568891(0x206)](/\s+/),{args:_0x14084a,flags:_0x4cae2a}=parseArgs(_0x2fefd9,_0xe245db[_0x568891(0x1f7)]['args']||[]);let _0x2a79ce='',_0x3132da=![];const _0x3fd264={'sendMessage':async(_0x4af6d9,_0x36251f)=>{const _0x2dc5d3=_0x568891,_0x123ffc=typeof _0x36251f===_0x2dc5d3(0x223)?_0x36251f:_0x36251f[_0x2dc5d3(0x205)]||'';_0x2a79ce+=_0x123ffc,_0xe245db[_0x2dc5d3(0x1f7)][_0x2dc5d3(0x1e9)]===!![]&&(await _0x13d8a6[_0x2dc5d3(0x1e2)](_0x22f09e,_0x36251f),_0x3132da=!![]);}};try{await _0xe245db[_0x568891(0x1f2)]({'m':{'key':{'remoteJid':_0x22f09e},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x2380d2}}}},'sock':_0x3fd264,'args':_0x14084a,'flags':_0x4cae2a,'executeCommand':()=>{}});if(!_0x2a79ce[_0x568891(0x235)]())_0x2a79ce='(command\x20ran\x20but\x20gave\x20no\x20output)';}catch(_0x1057b2){_0x2a79ce='‚ùå\x20'+(_0x1057b2[_0x568891(0x244)]||_0x568891(0x233));}return{'output':_0x2a79ce[_0x568891(0x235)](),'directUsed':_0x3132da};}async function extractCommands(_0x2d0c8a){const _0x39e07d=a0_0x1c1520,{commandMap:_0x46a0cb,aliasMap:_0x14afbd}=require('../lib/commands'),_0x42f3ee=[...new Set([..._0x46a0cb[_0x39e07d(0x22c)](),..._0x14afbd['keys']()])],_0x200083='\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22'+_0x2d0c8a+_0x39e07d(0x23c)+_0x42f3ee['join'](',\x20')+_0x39e07d(0x240);try{const _0x1329e6=await model[_0x39e07d(0x231)](_0x200083);let _0xf2aebe=_0x1329e6[_0x39e07d(0x237)][_0x39e07d(0x205)]()[_0x39e07d(0x235)]();_0xf2aebe=_0xf2aebe[_0x39e07d(0x230)](/`/g,'')[_0x39e07d(0x230)](/```json/g,'')['replace'](/```/g,''),console[_0x39e07d(0x215)]('[extractCommands]\x20Gemini\x20raw\x20output:\x0a',_0xf2aebe);const _0x2cfe5e=JSON[_0x39e07d(0x222)](_0xf2aebe);if(!Array[_0x39e07d(0x211)](_0x2cfe5e))return console[_0x39e07d(0x1ea)](_0x39e07d(0x22a),_0x2cfe5e),[];return _0x2cfe5e;}catch(_0x5d44ad){return console[_0x39e07d(0x1ea)](_0x39e07d(0x203),_0x5d44ad),[];}}function a0_0x2c78(_0xf9ff94,_0x3983c0){const _0x2ddd1f=a0_0x2ddd();return a0_0x2c78=function(_0x2c7814,_0x270594){_0x2c7814=_0x2c7814-0x1e2;let _0x4d62b8=_0x2ddd1f[_0x2c7814];return _0x4d62b8;},a0_0x2c78(_0xf9ff94,_0x3983c0);}module[a0_0x1c1520(0x213)]={'meta':{'name':'ai','description':a0_0x1c1520(0x1f4),'usage':a0_0x1c1520(0x201),'args':[{'name':a0_0x1c1520(0x205),'type':'string','greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x3d652f,sock:_0xebb370,args:_0x5f57c8})=>{const _0x54e2fa=a0_0x1c1520,_0x4c4f4f=_0x3d652f['key']['remoteJid'],_0x1924a4=_0x3d652f[_0x54e2fa(0x217)][_0x54e2fa(0x21b)]||_0x4c4f4f,_0x4d46d5=_0x5f57c8[_0x54e2fa(0x205)],_0x514610=_0x3d652f[_0x54e2fa(0x244)]?.[_0x54e2fa(0x242)]?.[_0x54e2fa(0x21c)]?.[_0x54e2fa(0x1eb)],_0x5f53c6=new StatusUpdater(_0xebb370,_0x4c4f4f);await _0x5f53c6[_0x54e2fa(0x22e)](),await _0x5f53c6['update']('ü§ñ\x20Thinking...'),addMemory(_0x1924a4,_0x54e2fa(0x1f0),_0x4d46d5);let _0x3b022e;try{await _0x5f53c6['update'](_0x54e2fa(0x21f)),_0x3b022e=await extractCommands(_0x4d46d5);}catch(_0x56b72f){return console[_0x54e2fa(0x1ea)](_0x54e2fa(0x22d),_0x56b72f),_0xebb370[_0x54e2fa(0x1e2)](_0x4c4f4f,{'text':_0x54e2fa(0x209)});}if(!Array['isArray'](_0x3b022e))return console[_0x54e2fa(0x1ea)](_0x54e2fa(0x22b),_0x3b022e),_0xebb370[_0x54e2fa(0x1e2)](_0x4c4f4f,{'text':'Failed\x20to\x20process\x20your\x20request.'});const _0x562f53=[];let _0x2ef8cf=![];for(const {name:_0x10b9cb,args:_0x1f65a5}of _0x3b022e){await _0x5f53c6[_0x54e2fa(0x1f6)](_0x54e2fa(0x1e7)+_0x10b9cb+'...');const {output:_0x483d76,directUsed:_0x2f5b45}=await runCommand(_0x10b9cb,_0x1f65a5,_0x4c4f4f,_0xebb370,_0x514610);if(_0x483d76)_0x562f53[_0x54e2fa(0x20c)]({'name':_0x10b9cb,'raw':_0x483d76});if(_0x2f5b45)_0x2ef8cf=!![];}const _0x337469=_0x562f53[_0x54e2fa(0x22f)](_0x6af338=>_0x6af338[_0x54e2fa(0x218)]+':\x20'+_0x6af338[_0x54e2fa(0x221)])['join']('\x0a');if(_0x2ef8cf){console[_0x54e2fa(0x215)](_0x54e2fa(0x1f3)),await _0x5f53c6[_0x54e2fa(0x1fc)](_0x54e2fa(0x23e));return;}const _0x310bdc=persona+'\x0a\x0aYou\x20are\x20'+botSettings['botName']+_0x54e2fa(0x20d)+botSettings[_0x54e2fa(0x1ff)]+_0x54e2fa(0x226)+new Date()[_0x54e2fa(0x227)]()+_0x54e2fa(0x212)+_0x4d46d5+'\x22\x0aCommand\x20output:\x0a'+_0x337469+_0x54e2fa(0x21e);let _0x33c31c='';const _0x43b0b2=0x3;let _0x1ac06e=0x0;while(_0x1ac06e<_0x43b0b2){try{await _0x5f53c6[_0x54e2fa(0x1f6)]('üß†\x20Remixing\x20with\x20AI...');const _0xd67837=await model['generateContent'](_0x310bdc);_0x33c31c=_0xd67837[_0x54e2fa(0x237)][_0x54e2fa(0x205)]()[_0x54e2fa(0x235)]();break;}catch(_0x5c4b9b){if(_0x5c4b9b[_0x54e2fa(0x229)]===0x1ad){console[_0x54e2fa(0x1ea)](_0x54e2fa(0x1fe),_0x5c4b9b),_0x1ac06e++;const _0x5bde7c=Math[_0x54e2fa(0x1f1)](0x2,_0x1ac06e)*0x3e8;await new Promise(_0x4ce8c4=>setTimeout(_0x4ce8c4,_0x5bde7c)),rotateKey();}else{console[_0x54e2fa(0x1ea)](_0x54e2fa(0x220),_0x5c4b9b),_0x33c31c='Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.';break;}}}if(!_0x562f53[_0x54e2fa(0x1e8)]){const _0x66aa96=persona+_0x54e2fa(0x216)+_0x4d46d5+_0x54e2fa(0x1e6);try{const _0x48981d=await model[_0x54e2fa(0x231)](_0x66aa96);_0x33c31c=_0x48981d['response'][_0x54e2fa(0x205)]()[_0x54e2fa(0x235)]();}catch(_0x57129d){console[_0x54e2fa(0x1ea)]('Error\x20with\x20current\x20API\x20key:',_0x57129d),_0x33c31c='Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.';}}addMemory(_0x1924a4,_0x54e2fa(0x1f5),_0x33c31c);const _0x596449=_0x54e2fa(0x241)+_0x4d46d5+'\x0aCommands\x20used:\x20'+_0x562f53['map'](_0x49928f=>_0x49928f['name'])['join'](',')+_0x54e2fa(0x207);try{const _0x88085c=await model[_0x54e2fa(0x231)](_0x596449),_0x3f4be4=JSON['parse'](_0x88085c['response'][_0x54e2fa(0x205)]());if(_0x3f4be4['user'])REMEMBER['users'][_0x1924a4]=_0x3f4be4[_0x54e2fa(0x1f0)];if(_0x3f4be4[_0x54e2fa(0x20b)])REMEMBER[_0x54e2fa(0x20b)]=_0x3f4be4['global'];saveJson(REM_FILE,REMEMBER);}catch{}const _0x9422f1=_0x33c31c+_0x54e2fa(0x243);await _0x5f53c6[_0x54e2fa(0x1fc)](_0x9422f1);}};