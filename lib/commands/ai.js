const a0_0x176af4=a0_0x33cc;(function(_0x43f643,_0x38e151){const _0x3898f8=a0_0x33cc,_0x50f5fe=_0x43f643();while(!![]){try{const _0x1e275e=parseInt(_0x3898f8(0x1a5))/0x1+-parseInt(_0x3898f8(0x183))/0x2*(parseInt(_0x3898f8(0x178))/0x3)+-parseInt(_0x3898f8(0x1b3))/0x4+parseInt(_0x3898f8(0x19d))/0x5*(parseInt(_0x3898f8(0x1b7))/0x6)+-parseInt(_0x3898f8(0x169))/0x7+parseInt(_0x3898f8(0x16a))/0x8*(-parseInt(_0x3898f8(0x199))/0x9)+-parseInt(_0x3898f8(0x180))/0xa*(-parseInt(_0x3898f8(0x1b8))/0xb);if(_0x1e275e===_0x38e151)break;else _0x50f5fe['push'](_0x50f5fe['shift']());}catch(_0x26aede){_0x50f5fe['push'](_0x50f5fe['shift']());}}}(a0_0x2df3,0xe3636));const {GoogleGenerativeAI}=require(a0_0x176af4(0x1aa)),{getCommandMap}=require(a0_0x176af4(0x18c)),{executeAiCommand}=require(a0_0x176af4(0x1ba)),{StatusUpdater}=require(a0_0x176af4(0x1a1)),{loadMemory,saveMemory}=require(a0_0x176af4(0x1bb)),logger={'info':(_0x5be36e,_0x264fe5)=>console[a0_0x176af4(0x1b1)](a0_0x176af4(0x1af)+_0x264fe5,_0x5be36e),'error':(_0x31be06,_0x5ef483)=>console[a0_0x176af4(0x173)](a0_0x176af4(0x1bc)+_0x5ef483,_0x31be06)},genAI=new GoogleGenerativeAI(a0_0x176af4(0x186));module[a0_0x176af4(0x168)]={'meta':{'name':'ai','description':'A\x20friendly\x20AI\x20assistant\x20named\x20Mora.','usage':a0_0x176af4(0x1bf),'category':'AI','ownerOnly':![],'ai':![],'args':[{'name':a0_0x176af4(0x1be),'required':!![],'greedy':!![],'description':a0_0x176af4(0x165)}]},'run':async({m:_0x1aabce,sock:_0x5d8c40,args:_0x26a5c9,flags:_0x54f394,executeCommand:_0x2f4593})=>{const _0x30915e=a0_0x176af4,_0x5a2455=_0x1aabce[_0x30915e(0x177)][_0x30915e(0x16e)],_0x2bae57=_0x1aabce[_0x30915e(0x177)][_0x30915e(0x179)]||_0x5a2455,_0x54d8a9=_0x1aabce[_0x30915e(0x185)]||null,_0x41f8c6=_0x26a5c9[_0x30915e(0x1be)];logger['info']({'user':_0x1aabce[_0x30915e(0x185)],'prompt':_0x41f8c6},_0x30915e(0x1b0));const _0x1c64e0=new StatusUpdater(_0x5d8c40,_0x5a2455);await _0x1c64e0[_0x30915e(0x17a)]();try{const _0x32e62c=await loadMemory(_0x5a2455,_0x2bae57);logger[_0x30915e(0x17e)]({},_0x30915e(0x19b)),await _0x1c64e0['update']('ðŸ¤”\x20Thinking....');const _0x36967a=await thinkingLayer(_0x41f8c6,_0x32e62c);logger['info'](_0x36967a,_0x30915e(0x196)),logger[_0x30915e(0x17e)]({'prompt':_0x41f8c6,'decision':_0x36967a['decision'],'commandsToRun':_0x36967a['commands']},_0x30915e(0x1c5));let _0x235426=[];if(_0x36967a[_0x30915e(0x1a0)]&&_0x36967a[_0x30915e(0x1a0)][_0x30915e(0x1bd)]>0x0){logger[_0x30915e(0x17e)]({'commands':_0x36967a['commands']},_0x30915e(0x194)),await _0x1c64e0[_0x30915e(0x18f)](_0x30915e(0x197)+_0x36967a[_0x30915e(0x1a0)]['join'](',\x20')+_0x30915e(0x1c3));for(const _0xb33ca5 of _0x36967a['commands']){logger[_0x30915e(0x17e)]({'commandString':_0xb33ca5},_0x30915e(0x162));const _0x252b94=_0xb33ca5[_0x30915e(0x167)]()[_0x30915e(0x1ab)](/\s+/);_0x252b94[0x0]=_0x252b94[0x0][_0x30915e(0x175)](0x1);const _0x35c51f=_0x252b94[0x0],_0x5bfc99=await executeAiCommand({'m':_0x1aabce,'sock':_0x5d8c40,'tokens':['!'+_0x35c51f,..._0x252b94[_0x30915e(0x175)](0x1)]});if(_0x5bfc99&&!_0x5bfc99[_0x30915e(0x1ae)]){logger['info']({'command':_0x35c51f,'content':_0x5bfc99},_0x30915e(0x1c4)),await _0x1c64e0[_0x30915e(0x176)](_0x30915e(0x176)),await _0x5d8c40[_0x30915e(0x166)](_0x1aabce[_0x30915e(0x177)]['remoteJid'],_0x5bfc99),_0x235426[_0x30915e(0x1b4)]({'command':_0x35c51f,'output':_0x30915e(0x17f)+(_0x5bfc99[_0x30915e(0x1a3)]?_0x30915e(0x1a3):_0x30915e(0x19e))+']','isDirect':!![]});continue;}const _0x546b23=_0x5bfc99?_0x5bfc99[_0x30915e(0x1ae)]:'No\x20textual\x20output.';_0x235426[_0x30915e(0x1b4)]({'command':_0x35c51f,'output':_0x546b23}),logger['info']({'command':_0x35c51f,'output':_0x546b23},_0x30915e(0x195));}}else logger[_0x30915e(0x17e)]({},_0x30915e(0x16b));if(_0x235426[_0x30915e(0x1bd)]>0x0&&_0x235426[_0x30915e(0x171)](_0x347795=>_0x347795['isDirect'])){logger[_0x30915e(0x17e)]({},'All\x20commands\x20were\x20handled\x20directly.\x20Skipping\x20Remix\x20Layer.');return;}logger[_0x30915e(0x17e)]({},_0x30915e(0x16c));const _0x262786={'prompt':_0x41f8c6,'decision':_0x36967a['decision'],'commandOutputs':_0x235426};logger[_0x30915e(0x17e)]({'context':_0x262786},_0x30915e(0x17d));const _0x536dc2=await remixLayer(_0x262786);logger[_0x30915e(0x17e)]({'finalResponse':_0x536dc2},'Remix\x20Layer\x20finished'),await saveMemory(_0x5a2455,_0x2bae57,_0x41f8c6,_0x536dc2,_0x54d8a9,_0x235426),await _0x1c64e0['done'](_0x536dc2);}catch(_0x355814){logger[_0x30915e(0x173)](_0x355814,'AI\x20command\x20failed'),await _0x1c64e0[_0x30915e(0x176)](_0x30915e(0x174));}}};async function thinkingLayer(_0x47a0a4,_0x3d089a){const _0x2d4fb0=a0_0x176af4;logger['info']({'prompt':_0x47a0a4},_0x2d4fb0(0x163));const _0x433351=genAI[_0x2d4fb0(0x1a8)]({'model':'gemini-2.5-pro'}),_0x2eb2cd=getCommandMap(),_0x2c31d0=Array[_0x2d4fb0(0x191)](_0x2eb2cd[_0x2d4fb0(0x1c0)]())[_0x2d4fb0(0x1a4)](_0x5a6752=>_0x5a6752['meta']['ai']!==![])[_0x2d4fb0(0x182)](_0x1756bf=>({'name':_0x1756bf['meta'][_0x2d4fb0(0x184)],'description':_0x1756bf[_0x2d4fb0(0x18e)]['description'],'usage':_0x1756bf['meta'][_0x2d4fb0(0x19c)],'direct':_0x1756bf[_0x2d4fb0(0x18e)]['direct']||![],'args':(_0x1756bf[_0x2d4fb0(0x18e)][_0x2d4fb0(0x16f)]||[])[_0x2d4fb0(0x182)](_0x19d9a7=>_0x19d9a7[_0x2d4fb0(0x184)]+'\x20('+_0x19d9a7['description']+')')[_0x2d4fb0(0x172)](',\x20')}));logger[_0x2d4fb0(0x17e)]({'count':_0x2c31d0[_0x2d4fb0(0x1bd)]},_0x2d4fb0(0x190));const _0x2a6de9=_0x2d4fb0(0x189)+JSON['stringify'](_0x3d089a,null,0x2)+_0x2d4fb0(0x1b5)+JSON[_0x2d4fb0(0x164)](_0x2c31d0,null,0x2)+_0x2d4fb0(0x18b)+_0x47a0a4+'\x22\x0a';logger[_0x2d4fb0(0x17e)](_0x2d4fb0(0x18d));try{const _0x21f603=await _0x433351[_0x2d4fb0(0x192)](_0x2a6de9),_0x793b27=await _0x21f603[_0x2d4fb0(0x1ac)]['text']();logger[_0x2d4fb0(0x17e)]({'responseText':_0x793b27},_0x2d4fb0(0x1a2));const _0x5b3425=_0x793b27[_0x2d4fb0(0x17c)](/```json/g,'')[_0x2d4fb0(0x17c)](/```/g,'')[_0x2d4fb0(0x167)]();logger[_0x2d4fb0(0x17e)]({'cleanedText':_0x5b3425},'Cleaned\x20Gemini\x20response');if(!_0x5b3425||!_0x5b3425[_0x2d4fb0(0x1b6)]('{')||!_0x5b3425[_0x2d4fb0(0x1b6)]('}'))return logger[_0x2d4fb0(0x173)]({'cleanedText':_0x5b3425},'Invalid\x20or\x20empty\x20Gemini\x20JSON\x20response'),{'decision':_0x2d4fb0(0x187),'commands':[]};const _0x28148b=JSON['parse'](_0x5b3425);logger[_0x2d4fb0(0x17e)]({'jsonResponse':_0x28148b},_0x2d4fb0(0x1c2));const _0x37990a={'decision':_0x28148b[_0x2d4fb0(0x1ad)],'commands':_0x28148b['commands']||[]};return logger['info']({'thinkingResult':_0x37990a},_0x2d4fb0(0x1a7)),_0x37990a;}catch(_0x1c3ea4){return logger[_0x2d4fb0(0x173)](_0x1c3ea4,_0x2d4fb0(0x1b2)),{'decision':_0x2d4fb0(0x19a),'commands':[]};}}function a0_0x33cc(_0x87c3a8,_0x3a6065){const _0x2df336=a0_0x2df3();return a0_0x33cc=function(_0x33cc14,_0x1739dc){_0x33cc14=_0x33cc14-0x161;let _0x5d0b68=_0x2df336[_0x33cc14];return _0x5d0b68;},a0_0x33cc(_0x87c3a8,_0x3a6065);}function a0_0x2df3(){const _0xa40afe=['generateContent','\x22\x0aMy\x20internal\x20thought\x20process:\x20\x22','Entering\x20Command\x20Execution\x20phase','Command\x20execution\x20finished','Thinking\x20Layer\x20finished','Running\x20command(s):\x20','Received\x20final\x20response\x20from\x20Gemini.','2890989cPyqVz','There\x20was\x20an\x20error\x20in\x20my\x20thinking\x20process.','Entering\x20Thinking\x20Layer...','usage','100130nBQRuK','unknown','gemini-2.5-pro','commands','../../utils/statusUpdater.js','Received\x20response\x20from\x20Gemini','audio','filter','910948taAdZu','command','Returning\x20from\x20Thinking\x20Layer','getGenerativeModel','Sending\x20final\x20prompt\x20to\x20Gemini\x20for\x20remixing.','@google/generative-ai','split','response','decision','text','[INFO]\x20','AI\x20command\x20invoked','log','Error\x20in\x20Gemini\x20Thinking\x20Layer','4792004pSKRIm','push','\x0a\x0aHere\x20are\x20the\x20available\x20commands\x20you\x20can\x20use:\x0a','includes','294ZAFvPR','33QXLPMg','\x22\x0aCommands\x20I\x20ran\x20and\x20their\x20output:\x0a','../core/executeCommand','../memory.js','[ERROR]\x20','length','prompt','.ai\x20<prompt>','values','Error\x20in\x20Gemini\x20Remix\x20Layer','Parsed\x20JSON\x20response','...','Command\x20returned\x20a\x20file.\x20Sending\x20directly.','AI\x20Thinking\x20Layer\x20Processed','Remix\x20layer\x20returned\x20empty\x20text','Executing\x20command','Thinking\x20Layer\x20received\x20prompt.','stringify','The\x20prompt\x20for\x20the\x20AI.','sendMessage','trim','exports','11393711gYNhki','16nMiBiP','No\x20commands\x20to\x20execute.','Entering\x20Remix\x20Layer...','isDirect','remoteJid','args','I\x27m\x20a\x20bit\x20flustered\x20right\x20now,\x20something\x20went\x20wrong\x20while\x20I\x20was\x20trying\x20to\x20be\x20witty.','every','join','error','Sorry,\x20something\x20went\x20wrong\x20with\x20my\x20circuits.\x20ðŸ˜µâ€ðŸ’«','slice','done','key','1579863AvYioR','participant','start','\x0a\x20\x20You\x20are\x20Mora,\x20a\x20smart,\x20witty\x20Gen\x20Z\x20assistant.\x0aYour\x20personality\x20is\x20helpful,\x20a\x20little\x20sassy,\x20and\x20you\x20use\x20modern\x20slang.\x0aBased\x20on\x20the\x20following\x20information,\x20craft\x20a\x20response\x20to\x20the\x20user.\x0a\x0a---\x0aOriginal\x20User\x20Prompt:\x20\x22','replace','Remix\x20Layer\x20context','info','[Sent\x20a\x20file:\x20','10112990CnGLUS','commandOutputs','map','2FObSao','name','pushName','AIzaSyDO4v1a36TNgunFzm7N-FzT3WYJnwIpbRI','I\x20couldn\x27t\x20figure\x20out\x20what\x20to\x20do\x20from\x20that.','Gotcha,\x20all\x20commands\x20handled.\x20âœ¨','\x0aYou\x20are\x20the\x20\x22Thinking\x20Layer\x22\x20for\x20a\x20bot\x20named\x20Mora.\x20Your\x20job\x20is\x20to\x20analyze\x20a\x20user\x27s\x20prompt\x20and\x20decide\x20which,\x20if\x20any,\x20of\x20the\x20available\x20commands\x20should\x20be\x20executed.\x0a\x0aYou\x20must\x20respond\x20in\x20a\x20JSON\x20format\x20with\x20two\x20properties:\x0a1.\x20\x22decision\x22:\x20A\x20string\x20explaining\x20your\x20reasoning.\x0a2.\x20\x22commands\x22:\x20An\x20array\x20of\x20strings,\x20where\x20each\x20string\x20is\x20the\x20full\x20command\x20to\x20execute\x20(e.g.,\x20\x22.weather\x20London\x22).\x0a\x0aHere\x20is\x20the\x20recent\x20conversation\x20history\x20(if\x20any):\x0a','Uhh,\x20I\x20spaced\x20out\x20for\x20a\x20second\x20there\x20ðŸ¤¯','\x0a\x0aAnalyze\x20the\x20user\x27s\x20prompt\x20and\x20determine\x20the\x20most\x20appropriate\x20command(s)\x20to\x20run.\x0a-\x20If\x20a\x20command\x20needs\x20arguments,\x20extract\x20them\x20from\x20the\x20prompt.\x0a-\x20Understand\x20the\x20users\x20prompt\x20first\x20and\x20command\x20argument.\x20Don\x27t\x20just\x20use\x20the\x20users\x20prompt\x20word\x20for\x20word\x0a-\x20If\x20the\x20prompt\x20is\x20just\x20a\x20greeting\x20or\x20a\x20general\x20chat\x20message,\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20Do\x20not\x20try\x20to\x20run\x20commands\x20that\x20are\x20not\x20on\x20the\x20list.\x0a-\x20If\x20the\x20user\x20asks\x20for\x20something\x20that\x20requires\x20a\x20command,\x20but\x20doesn\x27t\x20provide\x20the\x20necessary\x20arguments\x20(e.g.,\x20\x22.weather\x22),\x20ask\x20them\x20for\x20the\x20missing\x20information\x20in\x20your\x20\x22decision\x22\x20and\x20return\x20an\x20empty\x20\x22commands\x22\x20array.\x0a-\x20If\x20the\x20user\x20asks\x20or\x20responds\x20to\x20something\x20in\x20the\x20recent\x20conversation\x20history,\x20your\x20response\x20decision\x20should\x20be\x20detailed\x20because\x20your\x20remix\x20layer\x20has\x20no\x20access\x20to\x20the\x20previuos\x20memory\x20and\x20so\x20it\x20knows\x20what\x20the\x20context\x20is\x20exactly\x0a\x0aUser\x20Prompt:\x20\x22','./index','Sending\x20system\x20prompt\x20to\x20Gemini','meta','update','Generated\x20callable\x20command\x20list\x20for\x20AI','from'];a0_0x2df3=function(){return _0xa40afe;};return a0_0x2df3();}async function remixLayer(_0x100637){const _0x29db5e=a0_0x176af4;logger[_0x29db5e(0x17e)]({'context':_0x100637},'Remix\x20Layer\x20received\x20context.');const _0x19f95e=genAI[_0x29db5e(0x1a8)]({'model':_0x29db5e(0x19f)}),_0xeb83b4=_0x100637[_0x29db5e(0x181)][_0x29db5e(0x1a4)](_0x3de9ae=>!_0x3de9ae[_0x29db5e(0x16d)]);if(_0xeb83b4[_0x29db5e(0x1bd)]===0x0&&_0x100637['commandOutputs'][_0x29db5e(0x1bd)]>0x0)return logger[_0x29db5e(0x17e)]({},'All\x20command\x20outputs\x20were\x20handled\x20directly.\x20Skipping\x20Remix.'),_0x29db5e(0x188);const _0x57da76=_0x29db5e(0x17b)+_0x100637[_0x29db5e(0x1be)]+_0x29db5e(0x193)+_0x100637[_0x29db5e(0x1ad)]+_0x29db5e(0x1b9)+(_0xeb83b4[_0x29db5e(0x182)](_0x5079f6=>'-\x20'+_0x5079f6[_0x29db5e(0x1a6)]+':\x20'+_0x5079f6['output'])[_0x29db5e(0x172)]('\x0a')||'None')+'\x0a---\x0a\x0aYour\x20response\x20should\x20be\x20natural\x20and\x20conversational.\x20Don\x27t\x20just\x20state\x20the\x20facts,\x20remix\x20them\x20into\x20a\x20proper\x20answer.\x0aMake\x20your\x20responses\x20short\x20and\x20concise\x20like\x20you\x20are\x20talking\x20to\x20a\x20friend\x0aDont\x20make\x20refrences\x20to\x20your\x20thinking\x20layer,\x20your\x20output\x20should\x20be\x20as\x20though\x20you\x20already\x20know\x20it\x0a';logger[_0x29db5e(0x17e)](_0x29db5e(0x1a9));try{const _0x23c653=await _0x19f95e['generateContent'](_0x57da76),_0x4a9a19=await _0x23c653[_0x29db5e(0x1ac)],_0x18a621=_0x4a9a19[_0x29db5e(0x1ae)]()?.['trim']();if(!_0x18a621)return logger[_0x29db5e(0x173)]({},_0x29db5e(0x161)),_0x29db5e(0x18a);return logger[_0x29db5e(0x17e)]({'response':_0x18a621},_0x29db5e(0x198)),_0x18a621;}catch(_0x416b5e){return logger[_0x29db5e(0x173)](_0x416b5e,_0x29db5e(0x1c1)),_0x29db5e(0x170);}}