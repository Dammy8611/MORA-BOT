const a0_0x2cb0d8=a0_0x30c2;(function(_0x4a1dda,_0x3657f8){const _0xb93a2d=a0_0x30c2,_0x11d349=_0x4a1dda();while(!![]){try{const _0x262057=parseInt(_0xb93a2d(0x14a))/0x1*(parseInt(_0xb93a2d(0x13d))/0x2)+-parseInt(_0xb93a2d(0x133))/0x3*(parseInt(_0xb93a2d(0x140))/0x4)+parseInt(_0xb93a2d(0x143))/0x5*(-parseInt(_0xb93a2d(0x127))/0x6)+parseInt(_0xb93a2d(0x146))/0x7*(-parseInt(_0xb93a2d(0x121))/0x8)+-parseInt(_0xb93a2d(0x168))/0x9+-parseInt(_0xb93a2d(0x136))/0xa*(parseInt(_0xb93a2d(0x14f))/0xb)+parseInt(_0xb93a2d(0x12f))/0xc*(parseInt(_0xb93a2d(0x150))/0xd);if(_0x262057===_0x3657f8)break;else _0x11d349['push'](_0x11d349['shift']());}catch(_0xd1c23f){_0x11d349['push'](_0x11d349['shift']());}}}(a0_0x3bb0,0xcbeff));const fs=require('fs'),path=require(a0_0x2cb0d8(0x15d)),{GoogleGenerativeAI}=require('@google/generative-ai'),{parseArgs}=require('../utils/parseArgs'),{resolveCommand}=require(a0_0x2cb0d8(0x120)),{settings:botSettings}=require('../settings'),{StatusUpdater}=require(a0_0x2cb0d8(0x16a)),API_KEYS_FILE=path[a0_0x2cb0d8(0x137)](__dirname,'..',a0_0x2cb0d8(0x17a),a0_0x2cb0d8(0x12c));function a0_0x3bb0(){const _0x43f6d7=['role','error','226362cEQRYX','participant','pow','replace','slice','apiKeys.txt','commandsToRun\x20is\x20not\x20an\x20array:','existsSync','1563180YumpMf','Talk\x20to\x20MORA-AI','response','exports','112911PMLYXA','assistant','[extractCommands]\x20Gemini\x20raw\x20output:\x0a','5450hntshr','join','ai_memory.json','msg','...','args','key','1456410AuzjoP','quotedMessage','extractCommands:\x20Expected\x20array,\x20got:','40nfwHDQ','[runCommand]\x20Resolved\x20to:','\x0aRespond\x20casually\x20and\x20helpfully:','115JiCunD','toLocaleString','stringify','4487uSxXPS','meta','done','botName','2aLOqLP','\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201â€“2\x20lines.','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','âœ…\x20Command(s)\x20completed','length','27511ykfqZN','364jcnMwN','message','user','.ai\x20<prompt>','Failed\x20to\x20process\x20your\x20request.','update','users','raw','extendedTextMessage','Error\x20extracting\x20commands:','apiKeys.txt\x20not\x20found','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','map','path','\x22\x0aCommand\x20output:\x0a','log','parse','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','Command\x20failed','contextInfo','âš™ï¸\x20Running\x20/','filter','isArray','\x0a\x0aUser:\x20','1423998JOpYlS','keys','../utils/statusUpdater.js','remoteJid','text','global','\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22','generateContent','start','string','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','shift','âŒ\x20not\x20found','ðŸ§ \x20Remixing\x20with\x20AI...','Command\x20used\x20direct:true\x20â€”\x20skipping\x20summary\x20AI\x20reply','sendMessage','\x20of\x20','\x0aCommands\x20used:\x20','secrets','\x0a\x0aYou\x20are\x20','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','Error\x20with\x20current\x20API\x20key:','trim','ðŸ”\x20Extracting\x20commands...','ownerName','name','gemini-2.5-flash','Switched\x20to\x20key\x20','ai_remember.json','data','../lib/commands','18760tznQVv','\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a','push','split'];a0_0x3bb0=function(){return _0x43f6d7;};return a0_0x3bb0();}function loadApiKeys(){const _0x237f59=a0_0x2cb0d8;if(!fs[_0x237f59(0x12e)](API_KEYS_FILE))throw new Error(_0x237f59(0x15a));return fs['readFileSync'](API_KEYS_FILE,'utf8')[_0x237f59(0x124)](/\r?\n/)[_0x237f59(0x165)](Boolean);}const apiKeys=loadApiKeys();function a0_0x30c2(_0x279848,_0x720799){const _0x3bb0fd=a0_0x3bb0();return a0_0x30c2=function(_0x30c256,_0x1b2772){_0x30c256=_0x30c256-0x115;let _0x51046d=_0x3bb0fd[_0x30c256];return _0x51046d;},a0_0x30c2(_0x279848,_0x720799);}let currentKeyIndex=0x0;function setupGenAI(){const _0x3c1120=a0_0x2cb0d8,_0x31e72c=apiKeys[currentKeyIndex],_0x43113c=new GoogleGenerativeAI(_0x31e72c);return _0x43113c['getGenerativeModel']({'model':_0x3c1120(0x11c)});}let model=setupGenAI();function rotateKey(){const _0x48c1c9=a0_0x2cb0d8;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys[_0x48c1c9(0x14e)],model=setupGenAI(),console[_0x48c1c9(0x15f)](_0x48c1c9(0x11d)+(currentKeyIndex+0x1)+_0x48c1c9(0x178)+apiKeys[_0x48c1c9(0x14e)]);}const persona='You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20â€”\x20keep\x20replies\x20short\x20and\x20energetic.\x20ðŸŽ§ðŸ”¥',MEM_FILE=path['join'](__dirname,'..','secrets',a0_0x2cb0d8(0x138)),REM_FILE=path[a0_0x2cb0d8(0x137)](__dirname,'..',a0_0x2cb0d8(0x17a),a0_0x2cb0d8(0x11e)),loadJson=(_0x2d76d2,_0x4a4d0c={})=>fs[a0_0x2cb0d8(0x12e)](_0x2d76d2)?JSON[a0_0x2cb0d8(0x160)](fs['readFileSync'](_0x2d76d2,'utf8')):_0x4a4d0c,saveJson=(_0x249a47,_0x1c4033)=>fs['writeFileSync'](_0x249a47,JSON[a0_0x2cb0d8(0x145)](_0x1c4033,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x1040b1,_0x1849b3,_0x1c5979)=>{const _0x422f09=a0_0x2cb0d8;if(!MEMORY[_0x1040b1])MEMORY[_0x1040b1]=[];MEMORY[_0x1040b1][_0x422f09(0x123)]({'role':_0x1849b3,'msg':_0x1c5979,'ts':Date['now']()});if(MEMORY[_0x1040b1]['length']>MAX_MEMORY)MEMORY[_0x1040b1][_0x422f09(0x173)]();saveJson(MEM_FILE,MEMORY);},getMemory=_0x2be8a9=>(MEMORY[_0x2be8a9]||[])[a0_0x2cb0d8(0x12b)](-MAX_MEMORY)['map'](_0x1eca4f=>_0x1eca4f[a0_0x2cb0d8(0x125)]+':\x20'+_0x1eca4f[a0_0x2cb0d8(0x139)])[a0_0x2cb0d8(0x137)]('\x0a');async function runCommand(_0x1c8e99,_0x131a9d,_0x593727,_0x46360d,_0x366686){const _0x553f8e=a0_0x2cb0d8;console['log']('[runCommand]\x20Trying\x20to\x20resolve:',_0x1c8e99);const _0x1e0d8f=resolveCommand(_0x1c8e99);console[_0x553f8e(0x15f)](_0x553f8e(0x141),_0x1e0d8f?.['command']?.['meta']?.[_0x553f8e(0x11b)]||_0x553f8e(0x174));if(!_0x1e0d8f)return{'output':null,'directUsed':![]};const {command:_0x4ae1bb}=_0x1e0d8f,_0x403466=_0x131a9d[_0x553f8e(0x118)]()[_0x553f8e(0x124)](/\s+/),{args:_0x46a591,flags:_0x538f16}=parseArgs(_0x403466,_0x4ae1bb[_0x553f8e(0x147)][_0x553f8e(0x13b)]||[]);let _0x29c136='',_0x2f9a15=![];const _0x15c5ce={'sendMessage':async(_0x5e16fa,_0x4127a7)=>{const _0xdc1fe9=_0x553f8e,_0x498a40=typeof _0x4127a7===_0xdc1fe9(0x171)?_0x4127a7:_0x4127a7[_0xdc1fe9(0x16c)]||'';_0x29c136+=_0x498a40,_0x4ae1bb['meta']['direct']===!![]&&(await _0x46360d[_0xdc1fe9(0x177)](_0x593727,_0x4127a7),_0x2f9a15=!![]);}};try{await _0x4ae1bb['run']({'m':{'key':{'remoteJid':_0x593727},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x366686}}}},'sock':_0x15c5ce,'args':_0x46a591,'flags':_0x538f16,'executeCommand':()=>{}});if(!_0x29c136[_0x553f8e(0x118)]())_0x29c136='(command\x20ran\x20but\x20gave\x20no\x20output)';}catch(_0x2509c9){_0x29c136='âŒ\x20'+(_0x2509c9[_0x553f8e(0x151)]||_0x553f8e(0x162));}return{'output':_0x29c136[_0x553f8e(0x118)](),'directUsed':_0x2f9a15};}async function extractCommands(_0x5b77c0){const _0x535ba1=a0_0x2cb0d8,{commandMap:_0x5c59dc,aliasMap:_0xabd12a}=require('../lib/commands'),_0x59504d=[...new Set([..._0x5c59dc[_0x535ba1(0x169)](),..._0xabd12a[_0x535ba1(0x169)]()])],_0x46c774=_0x535ba1(0x16e)+_0x5b77c0+_0x535ba1(0x15b)+_0x59504d[_0x535ba1(0x137)](',\x20')+_0x535ba1(0x122);try{const _0x38c992=await model[_0x535ba1(0x16f)](_0x46c774);let _0x62681=_0x38c992[_0x535ba1(0x131)]['text']()[_0x535ba1(0x118)]();_0x62681=_0x62681[_0x535ba1(0x12a)](/`/g,'')[_0x535ba1(0x12a)](/```json/g,'')[_0x535ba1(0x12a)](/```/g,''),console['log'](_0x535ba1(0x135),_0x62681);const _0x44367c=JSON[_0x535ba1(0x160)](_0x62681);if(!Array[_0x535ba1(0x166)](_0x44367c))return console[_0x535ba1(0x126)](_0x535ba1(0x13f),_0x44367c),[];return _0x44367c;}catch(_0x199e82){return console[_0x535ba1(0x126)](_0x535ba1(0x161),_0x199e82),[];}}module[a0_0x2cb0d8(0x132)]={'meta':{'name':'ai','description':a0_0x2cb0d8(0x130),'usage':a0_0x2cb0d8(0x153),'args':[{'name':a0_0x2cb0d8(0x16c),'type':a0_0x2cb0d8(0x171),'greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x2cf3f3,sock:_0xedeb55,args:_0x2ddf1b})=>{const _0xfca825=a0_0x2cb0d8,_0x790480=_0x2cf3f3['key'][_0xfca825(0x16b)],_0x115c94=_0x2cf3f3[_0xfca825(0x13c)][_0xfca825(0x128)]||_0x790480,_0x31b77b=_0x2ddf1b[_0xfca825(0x16c)],_0x1b4edb=_0x2cf3f3[_0xfca825(0x151)]?.[_0xfca825(0x158)]?.[_0xfca825(0x163)]?.[_0xfca825(0x13e)],_0x39ecdf=new StatusUpdater(_0xedeb55,_0x790480);await _0x39ecdf[_0xfca825(0x170)](),await _0x39ecdf[_0xfca825(0x155)]('ðŸ¤–\x20Thinking...'),addMemory(_0x115c94,'user',_0x31b77b);let _0x3e9924;try{await _0x39ecdf[_0xfca825(0x155)](_0xfca825(0x119)),_0x3e9924=await extractCommands(_0x31b77b);}catch(_0x4dd469){return console[_0xfca825(0x126)](_0xfca825(0x159),_0x4dd469),_0xedeb55['sendMessage'](_0x790480,{'text':_0xfca825(0x154)});}if(!Array[_0xfca825(0x166)](_0x3e9924))return console[_0xfca825(0x126)](_0xfca825(0x12d),_0x3e9924),_0xedeb55['sendMessage'](_0x790480,{'text':_0xfca825(0x154)});const _0x453fd5=[];let _0x4c3a1c=![];for(const {name:_0x5040fc,args:_0x43ec68}of _0x3e9924){await _0x39ecdf['update'](_0xfca825(0x164)+_0x5040fc+_0xfca825(0x13a));const {output:_0x45ae27,directUsed:_0x4aeab0}=await runCommand(_0x5040fc,_0x43ec68,_0x790480,_0xedeb55,_0x1b4edb);if(_0x45ae27)_0x453fd5[_0xfca825(0x123)]({'name':_0x5040fc,'raw':_0x45ae27});if(_0x4aeab0)_0x4c3a1c=!![];}const _0x16226b=_0x453fd5[_0xfca825(0x15c)](_0xcaea42=>_0xcaea42[_0xfca825(0x11b)]+':\x20'+_0xcaea42[_0xfca825(0x157)])[_0xfca825(0x137)]('\x0a');if(_0x4c3a1c){console[_0xfca825(0x15f)](_0xfca825(0x176)),await _0x39ecdf[_0xfca825(0x148)](_0xfca825(0x14d));return;}const _0x18698e=persona+_0xfca825(0x115)+botSettings[_0xfca825(0x149)]+',\x20owned\x20by\x20'+botSettings[_0xfca825(0x11a)]+'.\x0aTime\x20now:\x20'+new Date()[_0xfca825(0x144)]()+'.\x0aUser\x20said:\x20\x22'+_0x31b77b+_0xfca825(0x15e)+_0x16226b+_0xfca825(0x14b);let _0x498404='';const _0x193387=0x3;let _0x4780e3=0x0;while(_0x4780e3<_0x193387){try{await _0x39ecdf[_0xfca825(0x155)](_0xfca825(0x175));const _0x8bfd44=await model[_0xfca825(0x16f)](_0x18698e);_0x498404=_0x8bfd44[_0xfca825(0x131)][_0xfca825(0x16c)]()['trim']();break;}catch(_0x58263){if(_0x58263[_0xfca825(0x11f)]===0x1ad){console['error']('Rate\x20limit\x20error:',_0x58263),_0x4780e3++;const _0x52aee4=Math[_0xfca825(0x129)](0x2,_0x4780e3)*0x3e8;await new Promise(_0x2a0e60=>setTimeout(_0x2a0e60,_0x52aee4)),rotateKey();}else{console['error'](_0xfca825(0x117),_0x58263),_0x498404=_0xfca825(0x172);break;}}}if(!_0x453fd5['length']){const _0x413ae3=persona+_0xfca825(0x167)+_0x31b77b+_0xfca825(0x142);try{const _0x1fa944=await model[_0xfca825(0x16f)](_0x413ae3);_0x498404=_0x1fa944['response']['text']()[_0xfca825(0x118)]();}catch(_0x4f5f14){console['error']('Error\x20with\x20current\x20API\x20key:',_0x4f5f14),_0x498404='Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.';}}addMemory(_0x115c94,_0xfca825(0x134),_0x498404);const _0x1eab14='User:\x20'+_0x31b77b+_0xfca825(0x179)+_0x453fd5['map'](_0x31087a=>_0x31087a[_0xfca825(0x11b)])[_0xfca825(0x137)](',')+_0xfca825(0x14c);try{const _0x251e33=await model['generateContent'](_0x1eab14),_0x47e007=JSON[_0xfca825(0x160)](_0x251e33[_0xfca825(0x131)][_0xfca825(0x16c)]());if(_0x47e007['user'])REMEMBER[_0xfca825(0x156)][_0x115c94]=_0x47e007[_0xfca825(0x152)];if(_0x47e007['global'])REMEMBER[_0xfca825(0x16d)]=_0x47e007[_0xfca825(0x16d)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x1eeb8b=_0x498404+_0xfca825(0x116);await _0x39ecdf[_0xfca825(0x148)](_0x1eeb8b);}};