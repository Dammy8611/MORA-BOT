const a0_0x5decd4=a0_0x205f;(function(_0x4713ba,_0x44f4bd){const _0xb5a975=a0_0x205f,_0x3d499f=_0x4713ba();while(!![]){try{const _0x3f356e=-parseInt(_0xb5a975(0x14e))/0x1*(parseInt(_0xb5a975(0xff))/0x2)+parseInt(_0xb5a975(0x152))/0x3+-parseInt(_0xb5a975(0x159))/0x4+-parseInt(_0xb5a975(0xfb))/0x5*(-parseInt(_0xb5a975(0x121))/0x6)+-parseInt(_0xb5a975(0x14b))/0x7*(-parseInt(_0xb5a975(0x12d))/0x8)+parseInt(_0xb5a975(0x123))/0x9+-parseInt(_0xb5a975(0x13d))/0xa*(-parseInt(_0xb5a975(0x147))/0xb);if(_0x3f356e===_0x44f4bd)break;else _0x3d499f['push'](_0x3d499f['shift']());}catch(_0x4e68f2){_0x3d499f['push'](_0x3d499f['shift']());}}}(a0_0x14ef,0x6d20f));const fs=require('fs'),path=require(a0_0x5decd4(0x127)),{GoogleGenerativeAI}=require('@google/generative-ai'),{parseArgs}=require(a0_0x5decd4(0xf8)),{resolveCommand}=require(a0_0x5decd4(0x143)),{settings:botSettings}=require(a0_0x5decd4(0x12e)),{StatusUpdater}=require('../../utils/statusUpdater.js'),API_KEYS_FILE=path[a0_0x5decd4(0x139)](__dirname,'..','..',a0_0x5decd4(0x103),a0_0x5decd4(0x11a));function loadApiKeys(){const _0x1bf8c0=a0_0x5decd4;if(!fs[_0x1bf8c0(0x129)](API_KEYS_FILE))throw new Error(_0x1bf8c0(0x11c));return fs['readFileSync'](API_KEYS_FILE,_0x1bf8c0(0x130))['split'](/\r?\n/)[_0x1bf8c0(0x102)](Boolean);}const apiKeys=loadApiKeys();function a0_0x205f(_0x9ea426,_0x1d3ba8){const _0x14ef01=a0_0x14ef();return a0_0x205f=function(_0x205f78,_0x4b63fb){_0x205f78=_0x205f78-0xf2;let _0x24c133=_0x14ef01[_0x205f78];return _0x24c133;},a0_0x205f(_0x9ea426,_0x1d3ba8);}let currentKeyIndex=0x0;function setupGenAI(){const _0x4c7248=a0_0x5decd4,_0x56673a=apiKeys[currentKeyIndex],_0x430512=new GoogleGenerativeAI(_0x56673a);return _0x430512[_0x4c7248(0x149)]({'model':_0x4c7248(0x115)});}function a0_0x14ef(){const _0x46c172=['...','./index','readFileSync','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','raw','1573bVoyux','participant','getGenerativeModel','map','174461xtQldW','Failed\x20to\x20process\x20your\x20request.','response','7EaXhwq','User:\x20','Switched\x20to\x20key\x20','ai_memory.json','1623927BaMJhN','shift','done','.\x0aUser\x20said:\x20\x22','Talk\x20to\x20MORA-AI','\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201‚Äì2\x20lines.','sendMessage','3431512HwNXLQ','Error\x20with\x20current\x20API\x20key:','Command\x20used\x20direct:true\x20‚Äî\x20skipping\x20summary\x20AI\x20reply','role','‚ùå\x20not\x20found','name','\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a','(command\x20ran\x20but\x20gave\x20no\x20output)','[extractCommands]\x20Gemini\x20raw\x20output:\x0a','exports','../../utils/parseArgs','command','key','65iviNvP','\x20of\x20','Command\x20failed','error','239678eImuEo','direct','keys','filter','secrets','message','slice','now','.\x0aTime\x20now:\x20','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','assistant','generateContent','remoteJid','Rate\x20limit\x20error:','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','\x0aRespond\x20casually\x20and\x20helpfully:','users','user','botName','replace','data','push','gemini-2.5-flash','args','extractCommands:\x20Expected\x20array,\x20got:','length','[runCommand]\x20Resolved\x20to:','apiKeys.txt','log','apiKeys.txt\x20not\x20found','parse','global','.ai\x20<prompt>','ai_remember.json','4854MhBcxT','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','2848464PbGQKA','\x0a\x0aUser:\x20','msg','isArray','path','üîç\x20Extracting\x20commands...','existsSync','[runCommand]\x20Trying\x20to\x20resolve:','trim','run','168swcIrX','../../settings','\x0aCommands\x20used:\x20','utf8','contextInfo','ü§ñ\x20Thinking...','extendedTextMessage','meta','You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20‚Äî\x20keep\x20replies\x20short\x20and\x20energetic.\x20üéßüî•','text','update','split','join','Error\x20extracting\x20commands:','\x0a\x0aYou\x20are\x20','üß†\x20Remixing\x20with\x20AI...','52590qXwQEf','\x22\x0aCommand\x20output:\x0a','‚úÖ\x20Command(s)\x20completed','toLocaleString','pow'];a0_0x14ef=function(){return _0x46c172;};return a0_0x14ef();}let model=setupGenAI();function rotateKey(){const _0x5ca717=a0_0x5decd4;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys[_0x5ca717(0x118)],model=setupGenAI(),console['log'](_0x5ca717(0x150)+(currentKeyIndex+0x1)+_0x5ca717(0xfc)+apiKeys['length']);}const persona=a0_0x5decd4(0x135),MEM_FILE=path[a0_0x5decd4(0x139)](__dirname,'..','..','secrets',a0_0x5decd4(0x151)),REM_FILE=path[a0_0x5decd4(0x139)](__dirname,'..','..',a0_0x5decd4(0x103),a0_0x5decd4(0x120)),loadJson=(_0x208f63,_0x3927f7={})=>fs[a0_0x5decd4(0x129)](_0x208f63)?JSON[a0_0x5decd4(0x11d)](fs[a0_0x5decd4(0x144)](_0x208f63,a0_0x5decd4(0x130))):_0x3927f7,saveJson=(_0x22c90a,_0x4d2edf)=>fs['writeFileSync'](_0x22c90a,JSON['stringify'](_0x4d2edf,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x49e238,_0x181e50,_0x580204)=>{const _0x485b5a=a0_0x5decd4;if(!MEMORY[_0x49e238])MEMORY[_0x49e238]=[];MEMORY[_0x49e238][_0x485b5a(0x114)]({'role':_0x181e50,'msg':_0x580204,'ts':Date[_0x485b5a(0x106)]()});if(MEMORY[_0x49e238][_0x485b5a(0x118)]>MAX_MEMORY)MEMORY[_0x49e238][_0x485b5a(0x153)]();saveJson(MEM_FILE,MEMORY);},getMemory=_0x1d357c=>(MEMORY[_0x1d357c]||[])[a0_0x5decd4(0x105)](-MAX_MEMORY)[a0_0x5decd4(0x14a)](_0x173e4a=>_0x173e4a[a0_0x5decd4(0x15c)]+':\x20'+_0x173e4a[a0_0x5decd4(0x125)])[a0_0x5decd4(0x139)]('\x0a');async function runCommand(_0x153c05,_0x2cae8e,_0x16ef24,_0x3d8819,_0x26f043){const _0x4c58b4=a0_0x5decd4;console['log'](_0x4c58b4(0x12a),_0x153c05);const _0x47cd16=resolveCommand(_0x153c05);console['log'](_0x4c58b4(0x119),_0x47cd16?.[_0x4c58b4(0xf9)]?.[_0x4c58b4(0x134)]?.['name']||_0x4c58b4(0xf2));if(!_0x47cd16)return{'output':null,'directUsed':![]};const {command:_0x5c7665}=_0x47cd16,_0x3ffd51=_0x2cae8e['trim']()[_0x4c58b4(0x138)](/\s+/),{args:_0x55285e,flags:_0x189654}=parseArgs(_0x3ffd51,_0x5c7665['meta'][_0x4c58b4(0x116)]||[]);let _0x41e5d9='',_0x39eb72=![];const _0x296768={'sendMessage':async(_0x30c8a9,_0xf8dd66)=>{const _0xa9d02f=_0x4c58b4,_0x17abd3=typeof _0xf8dd66==='string'?_0xf8dd66:_0xf8dd66[_0xa9d02f(0x136)]||'';_0x41e5d9+=_0x17abd3,_0x5c7665['meta'][_0xa9d02f(0x100)]===!![]&&(await _0x3d8819[_0xa9d02f(0x158)](_0x16ef24,_0xf8dd66),_0x39eb72=!![]);}};try{await _0x5c7665[_0x4c58b4(0x12c)]({'m':{'key':{'remoteJid':_0x16ef24},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x26f043}}}},'sock':_0x296768,'args':_0x55285e,'flags':_0x189654,'executeCommand':()=>{}});if(!_0x41e5d9['trim']())_0x41e5d9=_0x4c58b4(0xf5);}catch(_0x5a1e3c){_0x41e5d9='‚ùå\x20'+(_0x5a1e3c[_0x4c58b4(0x104)]||_0x4c58b4(0xfd));}return{'output':_0x41e5d9[_0x4c58b4(0x12b)](),'directUsed':_0x39eb72};}async function extractCommands(_0x21458d){const _0x431adf=a0_0x5decd4,{commandMap:_0x1ed48a,aliasMap:_0x296a4c}=require('./index'),_0x266f44=[...new Set([..._0x1ed48a[_0x431adf(0x101)](),..._0x296a4c['keys']()])],_0x2863cc='\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22'+_0x21458d+_0x431adf(0xf4)+_0x266f44[_0x431adf(0x139)](',\x20')+'\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a';try{const _0x189f2a=await model[_0x431adf(0x10a)](_0x2863cc);let _0x3389a4=_0x189f2a[_0x431adf(0x14d)][_0x431adf(0x136)]()['trim']();_0x3389a4=_0x3389a4[_0x431adf(0x112)](/`/g,'')[_0x431adf(0x112)](/```json/g,'')[_0x431adf(0x112)](/```/g,''),console['log'](_0x431adf(0xf6),_0x3389a4);const _0x1d0d35=JSON[_0x431adf(0x11d)](_0x3389a4);if(!Array['isArray'](_0x1d0d35))return console[_0x431adf(0xfe)](_0x431adf(0x117),_0x1d0d35),[];return _0x1d0d35;}catch(_0x5793ee){return console[_0x431adf(0xfe)](_0x431adf(0x145),_0x5793ee),[];}}module[a0_0x5decd4(0xf7)]={'meta':{'name':'ai','description':a0_0x5decd4(0x156),'usage':a0_0x5decd4(0x11f),'args':[{'name':a0_0x5decd4(0x136),'type':'string','greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x44cad5,sock:_0x5cda5e,args:_0x167366})=>{const _0x37d4aa=a0_0x5decd4,_0x58118b=_0x44cad5[_0x37d4aa(0xfa)][_0x37d4aa(0x10b)],_0x31bc49=_0x44cad5[_0x37d4aa(0xfa)][_0x37d4aa(0x148)]||_0x58118b,_0x469998=_0x167366[_0x37d4aa(0x136)],_0x334f3e=_0x44cad5['message']?.[_0x37d4aa(0x133)]?.[_0x37d4aa(0x131)]?.['quotedMessage'],_0x55ba9f=new StatusUpdater(_0x5cda5e,_0x58118b);await _0x55ba9f['start'](),await _0x55ba9f['update'](_0x37d4aa(0x132)),addMemory(_0x31bc49,_0x37d4aa(0x110),_0x469998);let _0xed0c8c;try{await _0x55ba9f[_0x37d4aa(0x137)](_0x37d4aa(0x128)),_0xed0c8c=await extractCommands(_0x469998);}catch(_0x2091b8){return console['error'](_0x37d4aa(0x13a),_0x2091b8),_0x5cda5e[_0x37d4aa(0x158)](_0x58118b,{'text':_0x37d4aa(0x14c)});}if(!Array[_0x37d4aa(0x126)](_0xed0c8c))return console[_0x37d4aa(0xfe)]('commandsToRun\x20is\x20not\x20an\x20array:',_0xed0c8c),_0x5cda5e['sendMessage'](_0x58118b,{'text':_0x37d4aa(0x14c)});const _0x1edc54=[];let _0x1ab216=![];for(const {name:_0x593d9f,args:_0x125add}of _0xed0c8c){await _0x55ba9f[_0x37d4aa(0x137)]('‚öôÔ∏è\x20Running\x20/'+_0x593d9f+_0x37d4aa(0x142));const {output:_0x281645,directUsed:_0x3bd215}=await runCommand(_0x593d9f,_0x125add,_0x58118b,_0x5cda5e,_0x334f3e);if(_0x281645)_0x1edc54['push']({'name':_0x593d9f,'raw':_0x281645});if(_0x3bd215)_0x1ab216=!![];}const _0x13f5ce=_0x1edc54['map'](_0x19e1b6=>_0x19e1b6[_0x37d4aa(0xf3)]+':\x20'+_0x19e1b6[_0x37d4aa(0x146)])[_0x37d4aa(0x139)]('\x0a');if(_0x1ab216){console[_0x37d4aa(0x11b)](_0x37d4aa(0x15b)),await _0x55ba9f[_0x37d4aa(0x154)](_0x37d4aa(0x13f));return;}const _0x41e78d=persona+_0x37d4aa(0x13b)+botSettings[_0x37d4aa(0x111)]+',\x20owned\x20by\x20'+botSettings['ownerName']+_0x37d4aa(0x107)+new Date()[_0x37d4aa(0x140)]()+_0x37d4aa(0x155)+_0x469998+_0x37d4aa(0x13e)+_0x13f5ce+_0x37d4aa(0x157);let _0x1406d9='';const _0x739dfa=0x3;let _0x1e3e90=0x0;while(_0x1e3e90<_0x739dfa){try{await _0x55ba9f[_0x37d4aa(0x137)](_0x37d4aa(0x13c));const _0x339002=await model['generateContent'](_0x41e78d);_0x1406d9=_0x339002[_0x37d4aa(0x14d)][_0x37d4aa(0x136)]()['trim']();break;}catch(_0x490f67){if(_0x490f67[_0x37d4aa(0x113)]===0x1ad){console[_0x37d4aa(0xfe)](_0x37d4aa(0x10c),_0x490f67),_0x1e3e90++;const _0x1db026=Math[_0x37d4aa(0x141)](0x2,_0x1e3e90)*0x3e8;await new Promise(_0x2b7fe6=>setTimeout(_0x2b7fe6,_0x1db026)),rotateKey();}else{console['error'](_0x37d4aa(0x15a),_0x490f67),_0x1406d9=_0x37d4aa(0x108);break;}}}if(!_0x1edc54['length']){const _0x572d76=persona+_0x37d4aa(0x124)+_0x469998+_0x37d4aa(0x10e);try{const _0x40e3f6=await model[_0x37d4aa(0x10a)](_0x572d76);_0x1406d9=_0x40e3f6['response'][_0x37d4aa(0x136)]()[_0x37d4aa(0x12b)]();}catch(_0x59e1b9){console[_0x37d4aa(0xfe)](_0x37d4aa(0x15a),_0x59e1b9),_0x1406d9=_0x37d4aa(0x108);}}addMemory(_0x31bc49,_0x37d4aa(0x109),_0x1406d9);const _0x1092c4=_0x37d4aa(0x14f)+_0x469998+_0x37d4aa(0x12f)+_0x1edc54[_0x37d4aa(0x14a)](_0xd273d0=>_0xd273d0['name'])[_0x37d4aa(0x139)](',')+_0x37d4aa(0x10d);try{const _0x3b962c=await model['generateContent'](_0x1092c4),_0x3c8ca3=JSON[_0x37d4aa(0x11d)](_0x3b962c[_0x37d4aa(0x14d)]['text']());if(_0x3c8ca3[_0x37d4aa(0x110)])REMEMBER[_0x37d4aa(0x10f)][_0x31bc49]=_0x3c8ca3['user'];if(_0x3c8ca3[_0x37d4aa(0x11e)])REMEMBER[_0x37d4aa(0x11e)]=_0x3c8ca3[_0x37d4aa(0x11e)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x1d7632=_0x1406d9+_0x37d4aa(0x122);await _0x55ba9f['done'](_0x1d7632);}};