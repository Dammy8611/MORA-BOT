const a0_0x51848a=a0_0x2d0f;(function(_0x3962c1,_0x14294a){const _0x3c9e1e=a0_0x2d0f,_0x2bada8=_0x3962c1();while(!![]){try{const _0x5b5c71=-parseInt(_0x3c9e1e(0x1da))/0x1*(-parseInt(_0x3c9e1e(0x1f5))/0x2)+parseInt(_0x3c9e1e(0x217))/0x3+-parseInt(_0x3c9e1e(0x208))/0x4*(-parseInt(_0x3c9e1e(0x1e0))/0x5)+-parseInt(_0x3c9e1e(0x21e))/0x6+-parseInt(_0x3c9e1e(0x1f8))/0x7+-parseInt(_0x3c9e1e(0x1d5))/0x8*(parseInt(_0x3c9e1e(0x206))/0x9)+parseInt(_0x3c9e1e(0x1f7))/0xa;if(_0x5b5c71===_0x14294a)break;else _0x2bada8['push'](_0x2bada8['shift']());}catch(_0x336163){_0x2bada8['push'](_0x2bada8['shift']());}}}(a0_0x54ae,0x34b9d));const fs=require('fs'),path=require(a0_0x51848a(0x1dc)),{GoogleGenerativeAI}=require(a0_0x51848a(0x209)),{parseArgs}=require(a0_0x51848a(0x1d6)),{resolveCommand}=require('./index'),{settings:botSettings}=require('../../settings'),{StatusUpdater}=require(a0_0x51848a(0x1db)),API_KEYS_FILE=path[a0_0x51848a(0x1c3)](__dirname,'..','..',a0_0x51848a(0x1fa),a0_0x51848a(0x20b));function loadApiKeys(){const _0x4fcf3f=a0_0x51848a;if(!fs[_0x4fcf3f(0x1c5)](API_KEYS_FILE))throw new Error(_0x4fcf3f(0x1f2));return fs[_0x4fcf3f(0x201)](API_KEYS_FILE,'utf8')[_0x4fcf3f(0x1f4)](/\r?\n/)['filter'](Boolean);}const apiKeys=loadApiKeys();let currentKeyIndex=0x0;function a0_0x2d0f(_0xd195a4,_0x2d7c0a){const _0x54aeed=a0_0x54ae();return a0_0x2d0f=function(_0x2d0f3b,_0xb7ef2d){_0x2d0f3b=_0x2d0f3b-0x1c0;let _0x1ec82a=_0x54aeed[_0x2d0f3b];return _0x1ec82a;},a0_0x2d0f(_0xd195a4,_0x2d7c0a);}function setupGenAI(){const _0x38f2eb=a0_0x51848a,_0x55d00b=apiKeys[currentKeyIndex],_0x136f6f=new GoogleGenerativeAI(_0x55d00b);return _0x136f6f[_0x38f2eb(0x216)]({'model':'gemini-2.5-flash'});}let model=setupGenAI();function rotateKey(){const _0x3c0eb3=a0_0x51848a;currentKeyIndex=(currentKeyIndex+0x1)%apiKeys[_0x3c0eb3(0x21b)],model=setupGenAI(),console[_0x3c0eb3(0x1c4)](_0x3c0eb3(0x1d0)+(currentKeyIndex+0x1)+_0x3c0eb3(0x1df)+apiKeys[_0x3c0eb3(0x21b)]);}const persona=a0_0x51848a(0x205),MEM_FILE=path['join'](__dirname,'..','..',a0_0x51848a(0x1fa),'ai_memory.json'),REM_FILE=path['join'](__dirname,'..','..','secrets',a0_0x51848a(0x20e)),loadJson=(_0x59c4b2,_0x40e443={})=>fs[a0_0x51848a(0x1c5)](_0x59c4b2)?JSON[a0_0x51848a(0x210)](fs[a0_0x51848a(0x201)](_0x59c4b2,a0_0x51848a(0x221))):_0x40e443,saveJson=(_0x168361,_0x3e4b50)=>fs['writeFileSync'](_0x168361,JSON['stringify'](_0x3e4b50,null,0x2)),MEMORY=loadJson(MEM_FILE,{}),REMEMBER=loadJson(REM_FILE,{'users':{},'global':''}),MAX_MEMORY=0xf,addMemory=(_0x56ae03,_0x5631c0,_0x11168d)=>{const _0x492152=a0_0x51848a;if(!MEMORY[_0x56ae03])MEMORY[_0x56ae03]=[];MEMORY[_0x56ae03][_0x492152(0x1d1)]({'role':_0x5631c0,'msg':_0x11168d,'ts':Date[_0x492152(0x1fb)]()});if(MEMORY[_0x56ae03][_0x492152(0x21b)]>MAX_MEMORY)MEMORY[_0x56ae03]['shift']();saveJson(MEM_FILE,MEMORY);},getMemory=_0x1ca7ad=>(MEMORY[_0x1ca7ad]||[])[a0_0x51848a(0x202)](-MAX_MEMORY)[a0_0x51848a(0x21a)](_0x2d3473=>_0x2d3473[a0_0x51848a(0x1d2)]+':\x20'+_0x2d3473[a0_0x51848a(0x207)])[a0_0x51848a(0x1c3)]('\x0a');async function runCommand(_0x1268cd,_0x37a028,_0x44df35,_0x46d1e1,_0x114339){const _0x5a3e56=a0_0x51848a;console[_0x5a3e56(0x1c4)](_0x5a3e56(0x1ee),_0x1268cd);const _0x3bd3e2=resolveCommand(_0x1268cd);console[_0x5a3e56(0x1c4)](_0x5a3e56(0x204),_0x3bd3e2?.[_0x5a3e56(0x1d4)]?.['meta']?.[_0x5a3e56(0x1c2)]||_0x5a3e56(0x1cb));if(!_0x3bd3e2)return{'output':null,'directUsed':![]};const {command:_0x1fc90b}=_0x3bd3e2,_0x3ced7b=_0x37a028[_0x5a3e56(0x1c0)]()[_0x5a3e56(0x1f4)](/\s+/),{args:_0x2d5df9,flags:_0x2ba736}=parseArgs(_0x3ced7b,_0x1fc90b[_0x5a3e56(0x1ed)][_0x5a3e56(0x1e2)]||[]);let _0xf3685='',_0x198f40=![];const _0x479b37={'sendMessage':async(_0xce781c,_0x3a69e8)=>{const _0x71878=_0x5a3e56,_0x3741b0=typeof _0x3a69e8===_0x71878(0x214)?_0x3a69e8:_0x3a69e8[_0x71878(0x1cf)]||'';_0xf3685+=_0x3741b0,_0x1fc90b[_0x71878(0x1ed)]['direct']===!![]&&(await _0x46d1e1[_0x71878(0x1eb)](_0x44df35,_0x3a69e8),_0x198f40=!![]);}};try{await _0x1fc90b[_0x5a3e56(0x1c1)]({'m':{'key':{'remoteJid':_0x44df35},'message':{'extendedTextMessage':{'contextInfo':{'quotedMessage':_0x114339}}}},'sock':_0x479b37,'args':_0x2d5df9,'flags':_0x2ba736,'executeCommand':()=>{}});if(!_0xf3685['trim']())_0xf3685=_0x5a3e56(0x1f0);}catch(_0x59f44c){_0xf3685='‚ùå\x20'+(_0x59f44c[_0x5a3e56(0x1e4)]||_0x5a3e56(0x1ef));}return{'output':_0xf3685['trim'](),'directUsed':_0x198f40};}function a0_0x54ae(){const _0x465787=['ü§ñ\x20Thinking...','error','contextInfo','sendMessage','users','meta','[runCommand]\x20Trying\x20to\x20resolve:','Command\x20failed','(command\x20ran\x20but\x20gave\x20no\x20output)','\x0aDo\x20you\x20want\x20to\x20store\x20anything?\x20Respond\x20with\x20JSON\x20{\x22user\x22:\x20\x22\x22,\x20\x22global\x22:\x20\x22\x22}','apiKeys.txt\x20not\x20found','Failed\x20to\x20process\x20your\x20request.','split','146066ZHRzom','\x0aYou\x20are\x20a\x20command\x20interpreter\x20for\x20a\x20chatbot.\x0a\x0aFrom\x20the\x20user\x27s\x20message:\x20\x22','5089790LHiuNM','930622cNScXI','...','secrets','now','Talk\x20to\x20MORA-AI','start','quotedMessage','toLocaleString','raw','readFileSync','slice','\x0aRespond\x20casually\x20and\x20helpfully:','[runCommand]\x20Resolved\x20to:','You\x27re\x20a\x20smart,\x20witty,\x20Gen-Z\x20chatbot\x20with\x20a\x20chill,\x20upbeat\x20tone.\x0aYou\x20use\x20modern\x20slang\x20casually\x20(e.g.,\x20\x22bet\x22,\x20\x22vibe\x22,\x20\x22real\x20talk\x22,\x20\x22fr\x22,\x20\x22no\x20cap\x22\x20etc.\x20Use\x20sensibly).\x0aYou\x27re\x20still\x20helpful\x20and\x20concise\x20‚Äî\x20keep\x20replies\x20short\x20and\x20energetic.\x20üéßüî•','115227zqjYGF','msg','713772VSyQJD','@google/generative-ai','generateContent','apiKeys.txt','isArray','update','ai_remember.json','[extractCommands]\x20Gemini\x20raw\x20output:\x0a','parse',',\x20owned\x20by\x20','Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.','exports','string','Error\x20with\x20current\x20API\x20key:','getGenerativeModel','275151vjLXrW','\x20\x0a\x0a>\x20MORA\x20AI.\x20Generated\x20by\x20AI.\x20Don\x27t\x20take\x20responses\x20too\x20seriously','\x0a\x0aFor\x20each\x20command,\x20generate\x20useful\x20arguments\x20based\x20on\x20what\x20the\x20user\x20is\x20asking.\x20Expand\x20short\x20or\x20vague\x20requests\x20into\x20rich,\x20descriptive\x20arguments.\x0aFor\x20example,\x20if\x20a\x20user\x20says:\x0a\x22make\x20a\x20detailed\x20image\x20of\x20a\x20cat\x22\x0a\x0aYou\x20should\x20return:\x0a[\x0a\x20\x20{\x0a\x20\x20\x20\x20\x22name\x22:\x20\x22image\x22,\x0a\x20\x20\x20\x20\x22args\x22:\x20\x22a\x20highly\x20detailed\x20digital\x20painting\x20of\x20a\x20cat\x20sitting\x20on\x20a\x20glowing\x20throne,\x20intricate\x20lighting\x20and\x20dramatic\x20shadows\x22\x0a\x20\x20}\x0a]\x0a\x0aAvoid\x20returning\x20\x22ai\x22\x20as\x20a\x20command\x20unless\x20the\x20user\x20explicitly\x20asks\x20to\x20chat\x20or\x20talk\x20with\x20the\x20bot.\x0a\x0aRespond\x20ONLY\x20with\x20raw\x20JSON\x20like:\x0a[\x0a\x20\x20{\x20\x22name\x22:\x20\x22commandName\x22,\x20\x22args\x22:\x20\x22argument\x20string\x22\x20}\x0a]\x0a\x0aNo\x20explanations,\x20no\x20markdown,\x20no\x20code\x20blocks.\x0a','map','length','response','extractCommands:\x20Expected\x20array,\x20got:','2020932osnroi','replace','\x0aCommands\x20used:\x20','utf8','trim','run','name','join','log','existsSync','key','Failed\x20to\x20extract\x20commands\x20from\x20prompt:','user','üß†\x20Remixing\x20with\x20AI...','remoteJid','‚ùå\x20not\x20found','.ai\x20<prompt>','‚úÖ\x20Command(s)\x20completed','\x22\x0aCommand\x20output:\x0a','text','Switched\x20to\x20key\x20','push','role','keys','command','104zXpENo','../../utils/parseArgs','done','data','botName','1noiOxB','../../utils/statusUpdater.js','path','.\x0aTime\x20now:\x20','./index','\x20of\x20','5iNQBSo','‚öôÔ∏è\x20Running\x20/','args','global','message','Rate\x20limit\x20error:','ownerName','assistant'];a0_0x54ae=function(){return _0x465787;};return a0_0x54ae();}async function extractCommands(_0x29fed2){const _0x22cf5a=a0_0x51848a,{commandMap:_0xd90dac,aliasMap:_0x1fec43}=require(_0x22cf5a(0x1de)),_0x4a830c=[...new Set([..._0xd90dac[_0x22cf5a(0x1d3)](),..._0x1fec43[_0x22cf5a(0x1d3)]()])],_0x4aa115=_0x22cf5a(0x1f6)+_0x29fed2+'\x22\x0a\x0aMatch\x20it\x20to\x20one\x20or\x20more\x20commands\x20from\x20this\x20list:\x0a'+_0x4a830c[_0x22cf5a(0x1c3)](',\x20')+_0x22cf5a(0x219);try{const _0x3ae547=await model[_0x22cf5a(0x20a)](_0x4aa115);let _0x31863e=_0x3ae547[_0x22cf5a(0x21c)][_0x22cf5a(0x1cf)]()[_0x22cf5a(0x1c0)]();_0x31863e=_0x31863e[_0x22cf5a(0x21f)](/`/g,'')[_0x22cf5a(0x21f)](/```json/g,'')['replace'](/```/g,''),console['log'](_0x22cf5a(0x20f),_0x31863e);const _0x2d0be2=JSON[_0x22cf5a(0x210)](_0x31863e);if(!Array[_0x22cf5a(0x20c)](_0x2d0be2))return console[_0x22cf5a(0x1e9)](_0x22cf5a(0x21d),_0x2d0be2),[];return _0x2d0be2;}catch(_0x56fe0f){return console['error'](_0x22cf5a(0x1c7),_0x56fe0f),[];}}module[a0_0x51848a(0x213)]={'meta':{'name':'ai','description':a0_0x51848a(0x1fc),'usage':a0_0x51848a(0x1cc),'args':[{'name':'text','type':a0_0x51848a(0x214),'greedy':!![],'required':!![]}],'category':'AI'},'run':async({m:_0x47dddd,sock:_0x220f03,args:_0x3b6e79})=>{const _0x332bad=a0_0x51848a,_0x39fe05=_0x47dddd[_0x332bad(0x1c6)][_0x332bad(0x1ca)],_0x369d94=_0x47dddd['key']['participant']||_0x39fe05,_0x3f83fd=_0x3b6e79[_0x332bad(0x1cf)],_0x552e6b=_0x47dddd[_0x332bad(0x1e4)]?.['extendedTextMessage']?.[_0x332bad(0x1ea)]?.[_0x332bad(0x1fe)],_0x578177=new StatusUpdater(_0x220f03,_0x39fe05);await _0x578177[_0x332bad(0x1fd)](),await _0x578177[_0x332bad(0x20d)](_0x332bad(0x1e8)),addMemory(_0x369d94,_0x332bad(0x1c8),_0x3f83fd);let _0x348f36;try{await _0x578177[_0x332bad(0x20d)]('üîç\x20Extracting\x20commands...'),_0x348f36=await extractCommands(_0x3f83fd);}catch(_0xf8b010){return console[_0x332bad(0x1e9)]('Error\x20extracting\x20commands:',_0xf8b010),_0x220f03[_0x332bad(0x1eb)](_0x39fe05,{'text':_0x332bad(0x1f3)});}if(!Array[_0x332bad(0x20c)](_0x348f36))return console['error']('commandsToRun\x20is\x20not\x20an\x20array:',_0x348f36),_0x220f03['sendMessage'](_0x39fe05,{'text':_0x332bad(0x1f3)});const _0x1216d8=[];let _0x200113=![];for(const {name:_0x36b97d,args:_0x331397}of _0x348f36){await _0x578177[_0x332bad(0x20d)](_0x332bad(0x1e1)+_0x36b97d+_0x332bad(0x1f9));const {output:_0x363aec,directUsed:_0x2857a8}=await runCommand(_0x36b97d,_0x331397,_0x39fe05,_0x220f03,_0x552e6b);if(_0x363aec)_0x1216d8[_0x332bad(0x1d1)]({'name':_0x36b97d,'raw':_0x363aec});if(_0x2857a8)_0x200113=!![];}const _0x33181b=_0x1216d8['map'](_0x509f24=>_0x509f24['name']+':\x20'+_0x509f24[_0x332bad(0x200)])[_0x332bad(0x1c3)]('\x0a');if(_0x200113){console[_0x332bad(0x1c4)]('Command\x20used\x20direct:true\x20‚Äî\x20skipping\x20summary\x20AI\x20reply'),await _0x578177[_0x332bad(0x1d7)](_0x332bad(0x1cd));return;}const _0x1da59b=persona+'\x0a\x0aYou\x20are\x20'+botSettings[_0x332bad(0x1d9)]+_0x332bad(0x211)+botSettings[_0x332bad(0x1e6)]+_0x332bad(0x1dd)+new Date()[_0x332bad(0x1ff)]()+'.\x0aUser\x20said:\x20\x22'+_0x3f83fd+_0x332bad(0x1ce)+_0x33181b+'\x0aReply\x20with\x20Gen-Z\x20style\x20in\x201‚Äì2\x20lines.';let _0xf76653='';const _0x576a47=0x3;let _0x56ae30=0x0;while(_0x56ae30<_0x576a47){try{await _0x578177['update'](_0x332bad(0x1c9));const _0x5562f5=await model['generateContent'](_0x1da59b);_0xf76653=_0x5562f5[_0x332bad(0x21c)][_0x332bad(0x1cf)]()[_0x332bad(0x1c0)]();break;}catch(_0x58987b){if(_0x58987b[_0x332bad(0x1d8)]===0x1ad){console['error'](_0x332bad(0x1e5),_0x58987b),_0x56ae30++;const _0x172a5c=Math['pow'](0x2,_0x56ae30)*0x3e8;await new Promise(_0x42ea75=>setTimeout(_0x42ea75,_0x172a5c)),rotateKey();}else{console[_0x332bad(0x1e9)]('Error\x20with\x20current\x20API\x20key:',_0x58987b),_0xf76653=_0x332bad(0x212);break;}}}if(!_0x1216d8[_0x332bad(0x21b)]){const _0x164f52=persona+'\x0a\x0aUser:\x20'+_0x3f83fd+_0x332bad(0x203);try{const _0x3c7244=await model[_0x332bad(0x20a)](_0x164f52);_0xf76653=_0x3c7244[_0x332bad(0x21c)]['text']()[_0x332bad(0x1c0)]();}catch(_0x4b3ebf){console['error'](_0x332bad(0x215),_0x4b3ebf),_0xf76653='Sorry,\x20I\x27m\x20having\x20trouble\x20processing\x20your\x20request\x20right\x20now.';}}addMemory(_0x369d94,_0x332bad(0x1e7),_0xf76653);const _0x28d3e2='User:\x20'+_0x3f83fd+_0x332bad(0x220)+_0x1216d8[_0x332bad(0x21a)](_0x4cf84e=>_0x4cf84e[_0x332bad(0x1c2)])[_0x332bad(0x1c3)](',')+_0x332bad(0x1f1);try{const _0x46fabc=await model[_0x332bad(0x20a)](_0x28d3e2),_0x49c6f3=JSON[_0x332bad(0x210)](_0x46fabc['response']['text']());if(_0x49c6f3['user'])REMEMBER[_0x332bad(0x1ec)][_0x369d94]=_0x49c6f3[_0x332bad(0x1c8)];if(_0x49c6f3['global'])REMEMBER[_0x332bad(0x1e3)]=_0x49c6f3[_0x332bad(0x1e3)];saveJson(REM_FILE,REMEMBER);}catch{}const _0x16ff56=_0xf76653+_0x332bad(0x218);await _0x578177[_0x332bad(0x1d7)](_0x16ff56);}};