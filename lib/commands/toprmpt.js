const a0_0x3d30cc=a0_0x37b3;function a0_0x1c0c(){const _0x174fdd=['contextInfo','image/','Analyze\x20command\x20error:','0\x20B','9toRzuf','match','text','HTTP\x20error!\x20status:\x20','API\x20service\x20unavailable.','3561672PkEHIe','Invalid\x20response\x20format','What\x27s\x20in\x20this\x20image?\x20Describe\x20it\x20in\x20detail.','530fmvnmg','log','startsWith','toFixed','imageMessage','content','Analyze\x20this\x20image\x20and\x20give\x20a\x20prompt\x20to\x20generate\x20an\x20image\x20similar\x20to\x20this','•\x20Format:\x20','🔗\x20*Source:*\x20Image\x20URL','buffer','5649376CwUqsA','Get\x20an\x20image\x20as\x20a\x20prompt\x20that\x20can\x20be\x20passed\x20to\x20an\x20AI\x20generator\x20to\x20get\x20the\x20same\x20image.(reply\x20to\x20image,\x20use\x20as\x20caption,\x20or\x20provide\x20URL)','7277417iThmob','•\x20Source:\x20','📝\x20Example:\x20!analyze\x20What\x20animals\x20are\x20in\x20this\x20picture?\x0a','❌\x20Image\x20too\x20large!\x20Maximum\x20size\x20is\x2010MB.\x0aYour\x20image:\x20','•\x20Reply\x20to\x20an\x20image\x20document\x0a','json','27084KFzkgj','mimetype','jpeg','png','toString','21208870DAOTKP','stringify','length',';base64,','Network\x20error\x20occurred.','❌\x20An\x20error\x20occurred\x20while\x20processing\x20your\x20request.\x20Please\x20try\x20again.','HTTP\x20error','ascii','webp','3226554ZEMBTE','data:image/','🔗\x20Example:\x20!analyze\x20https://example.com/image.jpg\x20What\x20do\x20you\x20see?','Document\x20attachment','Please\x20try\x20again\x20later.','•\x20Size:\x20','4OmZltd','❓\x20*Question:*\x20','error','application/json','status','Image\x20analysis\x20error:','WEBP','pow','POST','quotedMessage','openai','user','📊\x20*Image\x20Info:*\x0a','1351703cqvTZK','choices','includes','extendedTextMessage','@yupra/baileys','exports','remoteJid','key','message','image_url','!toprompt\x20(reply\x20to\x20image/document\x20or\x20use\x20as\x20caption\x20or\x20provide\x20image\x20URL)','toprompt','slice','❌\x20The\x20URL\x20doesn\x27t\x20appear\x20to\x20be\x20a\x20direct\x20image\x20link.\x20Please\x20provide\x20a\x20direct\x20link\x20to\x20an\x20image\x20file\x20(jpg,\x20png,\x20gif,\x20webp).','replace','fetch','RIFF','network','https://text.pollinations.ai/openai','base64','🔍\x20Analyzing\x20image\x20from\x20URL...\x20Please\x20wait...','•\x20Reply\x20to\x20an\x20image\x20with\x20this\x20command\x0a','🤖\x20*Analysis:*\x0a','sendMessage','❌\x20Failed\x20to\x20download\x20the\x20image.\x20Please\x20try\x20again.','floor','documentMessage'];a0_0x1c0c=function(){return _0x174fdd;};return a0_0x1c0c();}(function(_0x460c30,_0x4c15f2){const _0x5eb9a0=a0_0x37b3,_0x2df1dc=_0x460c30();while(!![]){try{const _0x5dd825=parseInt(_0x5eb9a0(0x194))/0x1+-parseInt(_0x5eb9a0(0x181))/0x2+parseInt(_0x5eb9a0(0x1b8))/0x3*(parseInt(_0x5eb9a0(0x187))/0x4)+-parseInt(_0x5eb9a0(0x1bb))/0x5*(parseInt(_0x5eb9a0(0x1cd))/0x6)+-parseInt(_0x5eb9a0(0x1c7))/0x7+-parseInt(_0x5eb9a0(0x1c5))/0x8+parseInt(_0x5eb9a0(0x1b3))/0x9*(parseInt(_0x5eb9a0(0x178))/0xa);if(_0x5dd825===_0x4c15f2)break;else _0x2df1dc['push'](_0x2df1dc['shift']());}catch(_0x232c4d){_0x2df1dc['push'](_0x2df1dc['shift']());}}}(a0_0x1c0c,0xc8bea));const {downloadMediaMessage}=require(a0_0x3d30cc(0x198));module[a0_0x3d30cc(0x199)]={'meta':{'name':a0_0x3d30cc(0x19f),'description':a0_0x3d30cc(0x1c6),'usage':a0_0x3d30cc(0x19e),'category':'ai'},'run':async({m:_0x3430f3,sock:_0x19353d,args:_0x511175})=>{const _0xd74faf=a0_0x3d30cc;try{let _0x50f1f4=null,_0x4b8afe=null,_0xcf1e8f=![],_0x2565b3=![];const _0x403a04=_0xd74faf(0x1c1);if(_0x3430f3[_0xd74faf(0x19c)]?.['extendedTextMessage']?.[_0xd74faf(0x1af)]?.['quotedMessage']){const _0x33edef=_0x3430f3[_0xd74faf(0x19c)][_0xd74faf(0x197)][_0xd74faf(0x1af)]['quotedMessage'];if(_0x33edef[_0xd74faf(0x1bf)])_0xcf1e8f=!![];else{if(_0x33edef[_0xd74faf(0x1ae)]){const _0x557eee=_0x33edef[_0xd74faf(0x1ae)][_0xd74faf(0x174)]||'';_0x557eee[_0xd74faf(0x1bd)](_0xd74faf(0x1b0))&&(_0xcf1e8f=!![],_0x2565b3=!![]);}}}if(!_0xcf1e8f&&_0x3430f3['message']?.[_0xd74faf(0x1bf)]){}else{if(!_0xcf1e8f&&_0x3430f3[_0xd74faf(0x19c)]?.[_0xd74faf(0x1ae)]){const _0x4b2273=_0x3430f3[_0xd74faf(0x19c)][_0xd74faf(0x1ae)]['mimetype']||'';_0x4b2273[_0xd74faf(0x1bd)]('image/')&&(_0x2565b3=!![]);}}const _0x21648a=/(https?:\/\/[^\s]+)/g,_0xc7004c=_0x403a04[_0xd74faf(0x1b4)](_0x21648a);if(_0xc7004c&&!_0xcf1e8f&&!_0x3430f3['message']?.[_0xd74faf(0x1bf)]&&!_0x3430f3[_0xd74faf(0x19c)]?.[_0xd74faf(0x1ae)]){_0x50f1f4=_0xc7004c[0x0];const _0x2289e5=_0x403a04[_0xd74faf(0x1a2)](_0x21648a,'')['trim']()||_0xd74faf(0x1ba);if(!_0x50f1f4[_0xd74faf(0x1b4)](/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i))return _0x19353d[_0xd74faf(0x1ab)](_0x3430f3[_0xd74faf(0x19b)][_0xd74faf(0x19a)],{'text':_0xd74faf(0x1a1)});return analyzeImageUrl(_0x50f1f4,_0x2289e5,_0x3430f3,_0x19353d);}if(!_0xcf1e8f&&!_0x3430f3[_0xd74faf(0x19c)]?.[_0xd74faf(0x1bf)]&&!_0x3430f3[_0xd74faf(0x19c)]?.[_0xd74faf(0x1ae)])return _0x19353d[_0xd74faf(0x1ab)](_0x3430f3[_0xd74faf(0x19b)][_0xd74faf(0x19a)],{'text':'❌\x20No\x20image\x20found!\x20Please:\x0a'+_0xd74faf(0x1a9)+'•\x20Use\x20this\x20command\x20as\x20a\x20caption\x20on\x20an\x20image\x0a'+_0xd74faf(0x1cb)+'•\x20Provide\x20an\x20image\x20URL\x20in\x20your\x20question\x0a\x0a'+_0xd74faf(0x1c9)+_0xd74faf(0x183)});const _0x27d29b=await _0x19353d[_0xd74faf(0x1ab)](_0x3430f3[_0xd74faf(0x19b)]['remoteJid'],{'text':'🔍\x20Analyzing\x20image...\x20Please\x20wait...'});try{if(_0xcf1e8f){const _0x11329a={'key':_0x3430f3[_0xd74faf(0x19b)],'message':_0x3430f3[_0xd74faf(0x19c)][_0xd74faf(0x197)]['contextInfo'][_0xd74faf(0x190)]};_0x4b8afe=await downloadMediaMessage(_0x11329a,_0xd74faf(0x1c4),{});}else _0x4b8afe=await downloadMediaMessage(_0x3430f3,_0xd74faf(0x1c4),{});const _0x5b4b18=0xa*0x400*0x400;if(_0x4b8afe[_0xd74faf(0x17a)]>_0x5b4b18)return _0x19353d[_0xd74faf(0x1ab)](_0x3430f3[_0xd74faf(0x19b)][_0xd74faf(0x19a)],{'text':_0xd74faf(0x1ca)+(_0x4b8afe[_0xd74faf(0x17a)]/(0x400*0x400))['toFixed'](0x2)+'MB'},{'quoted':_0x27d29b});}catch(_0xeb0981){return console[_0xd74faf(0x189)]('Download\x20error:',_0xeb0981),_0x19353d['sendMessage'](_0x3430f3['key'][_0xd74faf(0x19a)],{'text':_0xd74faf(0x1ac)},{'quoted':_0x27d29b});}return analyzeImageBuffer(_0x4b8afe,_0x403a04,_0x3430f3,_0x19353d,_0x27d29b,_0x2565b3);}catch(_0x21136d){return console[_0xd74faf(0x189)](_0xd74faf(0x1b1),_0x21136d),_0x19353d[_0xd74faf(0x1ab)](_0x3430f3[_0xd74faf(0x19b)]['remoteJid'],{'text':_0xd74faf(0x17d)});}}};async function analyzeImageUrl(_0x44c489,_0x3eeff6,_0x137345,_0x31df4a){const _0x3ff491=a0_0x3d30cc,_0x4a17c8=await _0x31df4a[_0x3ff491(0x1ab)](_0x137345[_0x3ff491(0x19b)]['remoteJid'],{'text':_0x3ff491(0x1a8)}),_0x1fe0b7={'model':'openai','messages':[{'role':_0x3ff491(0x192),'content':[{'type':_0x3ff491(0x1b5),'text':_0x3eeff6},{'type':_0x3ff491(0x19d),'image_url':{'url':_0x44c489}}]}],'max_tokens':0x1f4};try{const _0x2e1982=await fetch('https://text.pollinations.ai/openai',{'method':_0x3ff491(0x18f),'headers':{'Content-Type':_0x3ff491(0x18a)},'body':JSON[_0x3ff491(0x179)](_0x1fe0b7)});if(!_0x2e1982['ok'])throw new Error(_0x3ff491(0x1b6)+_0x2e1982[_0x3ff491(0x18b)]);const _0x5bac26=await _0x2e1982[_0x3ff491(0x1cc)]();if(_0x5bac26[_0x3ff491(0x195)]&&_0x5bac26[_0x3ff491(0x195)][0x0]&&_0x5bac26['choices'][0x0][_0x3ff491(0x19c)]){const _0x24c4a9=_0x5bac26['choices'][0x0][_0x3ff491(0x19c)][_0x3ff491(0x1c0)];let _0x2390fa='🖼️\x20*Image\x20Analysis*\x0a\x0a';return _0x2390fa+=_0x3ff491(0x188)+_0x3eeff6+'\x0a\x0a',_0x2390fa+=_0x3ff491(0x1aa)+_0x24c4a9+'\x0a\x0a',_0x2390fa+=_0x3ff491(0x1c3),_0x31df4a['sendMessage'](_0x137345[_0x3ff491(0x19b)][_0x3ff491(0x19a)],{'text':_0x2390fa},{'quoted':_0x4a17c8});}else throw new Error(_0x3ff491(0x1b9));}catch(_0x1b3f04){console[_0x3ff491(0x189)](_0x3ff491(0x18c),_0x1b3f04);let _0x9c88fc='❌\x20Failed\x20to\x20analyze\x20image!\x20';if(_0x1b3f04[_0x3ff491(0x19c)]?.[_0x3ff491(0x196)]('HTTP\x20error'))_0x9c88fc+='API\x20service\x20unavailable.';else _0x1b3f04[_0x3ff491(0x19c)]?.[_0x3ff491(0x196)]('network')||_0x1b3f04['message']?.[_0x3ff491(0x196)](_0x3ff491(0x1a3))?_0x9c88fc+=_0x3ff491(0x17c):_0x9c88fc+=_0x3ff491(0x185);return _0x31df4a[_0x3ff491(0x1ab)](_0x137345[_0x3ff491(0x19b)][_0x3ff491(0x19a)],{'text':_0x9c88fc},{'quoted':_0x4a17c8});}}function a0_0x37b3(_0x317802,_0x44b14b){const _0x1c0cb4=a0_0x1c0c();return a0_0x37b3=function(_0x37b32c,_0x219b66){_0x37b32c=_0x37b32c-0x174;let _0xfe7bfa=_0x1c0cb4[_0x37b32c];return _0xfe7bfa;},a0_0x37b3(_0x317802,_0x44b14b);}async function analyzeImageBuffer(_0x367ce7,_0x47d56a,_0x563990,_0x1f4f0c,_0x49dd7a,_0x48886e){const _0x2b1f3e=a0_0x3d30cc,_0x3914be=_0x367ce7[_0x2b1f3e(0x177)](_0x2b1f3e(0x1a7));let _0x5df6ad=_0x2b1f3e(0x175);if(_0x367ce7[0x0]===0xff&&_0x367ce7[0x1]===0xd8)_0x5df6ad='jpeg';else{if(_0x367ce7[0x0]===0x89&&_0x367ce7[0x1]===0x50&&_0x367ce7[0x2]===0x4e&&_0x367ce7[0x3]===0x47)_0x5df6ad=_0x2b1f3e(0x176);else{if(_0x367ce7[0x0]===0x47&&_0x367ce7[0x1]===0x49&&_0x367ce7[0x2]===0x46)_0x5df6ad='gif';else _0x367ce7[_0x2b1f3e(0x1a0)](0x0,0x4)[_0x2b1f3e(0x177)](_0x2b1f3e(0x17f))===_0x2b1f3e(0x1a4)&&_0x367ce7[_0x2b1f3e(0x1a0)](0x8,0xc)[_0x2b1f3e(0x177)]('ascii')===_0x2b1f3e(0x18d)&&(_0x5df6ad=_0x2b1f3e(0x180));}}const _0xd14687={'model':_0x2b1f3e(0x191),'messages':[{'role':'user','content':[{'type':_0x2b1f3e(0x1b5),'text':_0x47d56a},{'type':_0x2b1f3e(0x19d),'image_url':{'url':_0x2b1f3e(0x182)+_0x5df6ad+_0x2b1f3e(0x17b)+_0x3914be}}]}],'max_tokens':0x1f4};try{const _0x15e83a=await fetch(_0x2b1f3e(0x1a6),{'method':_0x2b1f3e(0x18f),'headers':{'Content-Type':_0x2b1f3e(0x18a)},'body':JSON[_0x2b1f3e(0x179)](_0xd14687)});if(!_0x15e83a['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x15e83a[_0x2b1f3e(0x18b)]);const _0x1c917a=await _0x15e83a['json']();if(_0x1c917a[_0x2b1f3e(0x195)]&&_0x1c917a[_0x2b1f3e(0x195)][0x0]&&_0x1c917a[_0x2b1f3e(0x195)][0x0][_0x2b1f3e(0x19c)]){const _0x12092e=_0x1c917a[_0x2b1f3e(0x195)][0x0][_0x2b1f3e(0x19c)]['content'],_0x1328df=_0x3ff77d=>{const _0x16fd43=_0x2b1f3e;if(_0x3ff77d===0x0)return _0x16fd43(0x1b2);const _0x1cf045=0x400,_0xdab07=['B','KB','MB','GB'],_0x513561=Math[_0x16fd43(0x1ad)](Math[_0x16fd43(0x1bc)](_0x3ff77d)/Math[_0x16fd43(0x1bc)](_0x1cf045));return parseFloat((_0x3ff77d/Math[_0x16fd43(0x18e)](_0x1cf045,_0x513561))[_0x16fd43(0x1be)](0x2))+'\x20'+_0xdab07[_0x513561];};let _0x59b607='🖼️\x20*Image\x20Analysis*\x0a\x0a';return _0x59b607+='❓\x20*Question:*\x20'+_0x47d56a+'\x0a\x0a',_0x59b607+='🤖\x20*Analysis:*\x0a'+_0x12092e+'\x0a\x0a',_0x59b607+=_0x2b1f3e(0x193),_0x59b607+=_0x2b1f3e(0x1c2)+_0x5df6ad['toUpperCase']()+'\x0a',_0x59b607+=_0x2b1f3e(0x186)+_0x1328df(_0x367ce7['length'])+'\x0a',_0x59b607+=_0x2b1f3e(0x1c8)+(_0x48886e?_0x2b1f3e(0x184):'WhatsApp\x20media'),_0x1f4f0c['sendMessage'](_0x563990[_0x2b1f3e(0x19b)][_0x2b1f3e(0x19a)],{'text':_0x59b607},{'quoted':_0x49dd7a});}else throw new Error('Invalid\x20response\x20format');}catch(_0x106697){console[_0x2b1f3e(0x189)](_0x2b1f3e(0x18c),_0x106697);let _0x29511b='❌\x20Failed\x20to\x20analyze\x20image!\x20';if(_0x106697[_0x2b1f3e(0x19c)]?.[_0x2b1f3e(0x196)](_0x2b1f3e(0x17e)))_0x29511b+=_0x2b1f3e(0x1b7);else _0x106697[_0x2b1f3e(0x19c)]?.[_0x2b1f3e(0x196)](_0x2b1f3e(0x1a5))||_0x106697[_0x2b1f3e(0x19c)]?.['includes'](_0x2b1f3e(0x1a3))?_0x29511b+='Network\x20error\x20occurred.':_0x29511b+='Please\x20try\x20again\x20later.';return _0x1f4f0c[_0x2b1f3e(0x1ab)](_0x563990[_0x2b1f3e(0x19b)][_0x2b1f3e(0x19a)],{'text':_0x29511b},{'quoted':_0x49dd7a});}}