const a0_0x490272=a0_0x5631;(function(_0xbe3887,_0x6029fd){const _0xf0b2b9=a0_0x5631,_0x367dc6=_0xbe3887();while(!![]){try{const _0x4c69b5=parseInt(_0xf0b2b9(0xb1))/0x1*(parseInt(_0xf0b2b9(0xd1))/0x2)+-parseInt(_0xf0b2b9(0xfa))/0x3+-parseInt(_0xf0b2b9(0xf3))/0x4*(-parseInt(_0xf0b2b9(0xaa))/0x5)+parseInt(_0xf0b2b9(0xc1))/0x6+parseInt(_0xf0b2b9(0xdb))/0x7*(-parseInt(_0xf0b2b9(0xcd))/0x8)+parseInt(_0xf0b2b9(0xab))/0x9*(-parseInt(_0xf0b2b9(0xb0))/0xa)+parseInt(_0xf0b2b9(0xd3))/0xb;if(_0x4c69b5===_0x6029fd)break;else _0x367dc6['push'](_0x367dc6['shift']());}catch(_0x149510){_0x367dc6['push'](_0x367dc6['shift']());}}}(a0_0x28bc,0xee6d2));function a0_0x28bc(){const _0x403d4f=['mimetype','message','text','🔗\x20*Source:*\x20Image\x20URL','image/','slice','Network\x20error\x20occurred.','❌\x20Failed\x20to\x20analyze\x20image!\x20','4330IFCUOz','456831xTooWF','image_url','https://text.pollinations.ai/openai','🔗\x20Example:\x20!analyze\x20https://example.com/image.jpg\x20What\x20do\x20you\x20see?','•\x20Reply\x20to\x20an\x20image\x20with\x20this\x20command\x0a','40GTmNrL','4153ICbyzW','HTTP\x20error!\x20status:\x20','vision','stringify','floor','toUpperCase','Analyze\x20command\x20error:','Document\x20attachment','length','extendedTextMessage','replace','data:image/','key',';base64,','match','•\x20Use\x20this\x20command\x20as\x20a\x20caption\x20on\x20an\x20image\x0a','9286056ieadxA','toFixed','•\x20Size:\x20','❓\x20*Question:*\x20','ascii','includes','network','choices','startsWith','content','Download\x20error:','openai','9848KKINuI','gif','question','json','488aBhbZR','log','9625121HLyslq','API\x20service\x20unavailable.','jpeg','error','analyze','remoteJid','Image\x20analysis\x20error:','❌\x20No\x20image\x20found!\x20Please:\x0a','5145vurtpf','❌\x20Image\x20too\x20large!\x20Maximum\x20size\x20is\x2010MB.\x0aYour\x20image:\x20','trim','❌\x20An\x20error\x20occurred\x20while\x20processing\x20your\x20request.\x20Please\x20try\x20again.','📊\x20*Image\x20Info:*\x0a','imageMessage','Invalid\x20response\x20format','toString','string','status','📝\x20Example:\x20!analyze\x20What\x20animals\x20are\x20in\x20this\x20picture?\x0a','contextInfo','🔍\x20Analyzing\x20image\x20from\x20URL...\x20Please\x20wait...','sendMessage','RIFF','WhatsApp\x20media','•\x20Format:\x20','HTTP\x20error','What\x27s\x20in\x20this\x20image?\x20Describe\x20it\x20in\x20detail.','quotedMessage','pow','🤖\x20*Analysis:*\x0a','Please\x20try\x20again\x20later.','whatisthis','212dKuvBj','❌\x20The\x20URL\x20doesn\x27t\x20appear\x20to\x20be\x20a\x20direct\x20image\x20link.\x20Please\x20provide\x20a\x20direct\x20link\x20to\x20an\x20image\x20file\x20(jpg,\x20png,\x20gif,\x20webp).','describe','application/json','POST','WEBP','documentMessage','4192506UNFVkR','•\x20Source:\x20','buffer'];a0_0x28bc=function(){return _0x403d4f;};return a0_0x28bc();}const {downloadMediaMessage}=require('@yupra/baileys');function a0_0x5631(_0x4cb640,_0x179df5){const _0x28bc05=a0_0x28bc();return a0_0x5631=function(_0x56314c,_0x156677){_0x56314c=_0x56314c-0xa0;let _0x24a9a0=_0x28bc05[_0x56314c];return _0x24a9a0;},a0_0x5631(_0x4cb640,_0x179df5);}module['exports']={'meta':{'name':a0_0x490272(0xd7),'description':'Analyze\x20images\x20using\x20AI\x20vision\x20(reply\x20to\x20image,\x20use\x20as\x20caption,\x20or\x20provide\x20URL)','aliases':[a0_0x490272(0xb3),a0_0x490272(0xf5),a0_0x490272(0xf2)],'usage':'!analyze\x20[question]\x20(reply\x20to\x20image/document\x20or\x20use\x20as\x20caption\x20or\x20provide\x20image\x20URL)','category':'ai','args':[{'name':a0_0x490272(0xcf),'type':a0_0x490272(0xe3),'greedy':!![],'required':![]}]},'run':async({m:_0x4ac3a2,sock:_0x212d3f,args:_0x363a71})=>{const _0x26e5aa=a0_0x490272;try{let _0xbe80a5=null,_0x1490d7=null,_0x401b83=![],_0x2a923e=![];const _0x1aaef7=_0x363a71['question']||_0x26e5aa(0xed);if(_0x4ac3a2[_0x26e5aa(0xa3)]?.[_0x26e5aa(0xba)]?.['contextInfo']?.[_0x26e5aa(0xee)]){const _0x574c46=_0x4ac3a2[_0x26e5aa(0xa3)][_0x26e5aa(0xba)][_0x26e5aa(0xe6)][_0x26e5aa(0xee)];if(_0x574c46[_0x26e5aa(0xe0)])_0x401b83=!![];else{if(_0x574c46[_0x26e5aa(0xf9)]){const _0x549322=_0x574c46[_0x26e5aa(0xf9)][_0x26e5aa(0xa2)]||'';_0x549322[_0x26e5aa(0xc9)](_0x26e5aa(0xa6))&&(_0x401b83=!![],_0x2a923e=!![]);}}}if(!_0x401b83&&_0x4ac3a2['message']?.[_0x26e5aa(0xe0)]){}else{if(!_0x401b83&&_0x4ac3a2['message']?.[_0x26e5aa(0xf9)]){const _0x5da6aa=_0x4ac3a2['message'][_0x26e5aa(0xf9)][_0x26e5aa(0xa2)]||'';_0x5da6aa['startsWith']('image/')&&(_0x2a923e=!![]);}}const _0x1a0a24=/(https?:\/\/[^\s]+)/g,_0x20dc37=_0x1aaef7[_0x26e5aa(0xbf)](_0x1a0a24);if(_0x20dc37&&!_0x401b83&&!_0x4ac3a2[_0x26e5aa(0xa3)]?.[_0x26e5aa(0xe0)]&&!_0x4ac3a2[_0x26e5aa(0xa3)]?.[_0x26e5aa(0xf9)]){_0xbe80a5=_0x20dc37[0x0];const _0x59e47b=_0x1aaef7[_0x26e5aa(0xbb)](_0x1a0a24,'')[_0x26e5aa(0xdd)]()||_0x26e5aa(0xed);if(!_0xbe80a5['match'](/\.(jpg|jpeg|png|gif|webp)(\?.*)?$/i))return _0x212d3f[_0x26e5aa(0xe8)](_0x4ac3a2[_0x26e5aa(0xbd)]['remoteJid'],{'text':_0x26e5aa(0xf4)});return analyzeImageUrl(_0xbe80a5,_0x59e47b,_0x4ac3a2,_0x212d3f);}if(!_0x401b83&&!_0x4ac3a2[_0x26e5aa(0xa3)]?.[_0x26e5aa(0xe0)]&&!_0x4ac3a2[_0x26e5aa(0xa3)]?.[_0x26e5aa(0xf9)])return _0x212d3f[_0x26e5aa(0xe8)](_0x4ac3a2[_0x26e5aa(0xbd)]['remoteJid'],{'text':_0x26e5aa(0xda)+_0x26e5aa(0xaf)+_0x26e5aa(0xc0)+'•\x20Reply\x20to\x20an\x20image\x20document\x0a'+'•\x20Provide\x20an\x20image\x20URL\x20in\x20your\x20question\x0a\x0a'+_0x26e5aa(0xe5)+_0x26e5aa(0xae)});const _0x33ec04=await _0x212d3f[_0x26e5aa(0xe8)](_0x4ac3a2['key'][_0x26e5aa(0xd8)],{'text':'🔍\x20Analyzing\x20image...\x20Please\x20wait...'});try{if(_0x401b83){const _0x44e5b2={'key':_0x4ac3a2[_0x26e5aa(0xbd)],'message':_0x4ac3a2['message'][_0x26e5aa(0xba)]['contextInfo'][_0x26e5aa(0xee)]};_0x1490d7=await downloadMediaMessage(_0x44e5b2,_0x26e5aa(0xa1),{});}else _0x1490d7=await downloadMediaMessage(_0x4ac3a2,_0x26e5aa(0xa1),{});const _0x499929=0xa*0x400*0x400;if(_0x1490d7[_0x26e5aa(0xb9)]>_0x499929)return _0x212d3f[_0x26e5aa(0xe8)](_0x4ac3a2[_0x26e5aa(0xbd)]['remoteJid'],{'text':_0x26e5aa(0xdc)+(_0x1490d7[_0x26e5aa(0xb9)]/(0x400*0x400))[_0x26e5aa(0xc2)](0x2)+'MB'},{'quoted':_0x33ec04});}catch(_0x8614db){return console[_0x26e5aa(0xd6)](_0x26e5aa(0xcb),_0x8614db),_0x212d3f['sendMessage'](_0x4ac3a2['key'][_0x26e5aa(0xd8)],{'text':'❌\x20Failed\x20to\x20download\x20the\x20image.\x20Please\x20try\x20again.'},{'quoted':_0x33ec04});}return analyzeImageBuffer(_0x1490d7,_0x1aaef7,_0x4ac3a2,_0x212d3f,_0x33ec04,_0x2a923e);}catch(_0x54f6ca){return console[_0x26e5aa(0xd6)](_0x26e5aa(0xb7),_0x54f6ca),_0x212d3f[_0x26e5aa(0xe8)](_0x4ac3a2[_0x26e5aa(0xbd)][_0x26e5aa(0xd8)],{'text':_0x26e5aa(0xde)});}}};async function analyzeImageUrl(_0x5007d8,_0x744c5d,_0x19e576,_0xb44efe){const _0x2862ed=a0_0x490272,_0x105d15=await _0xb44efe[_0x2862ed(0xe8)](_0x19e576[_0x2862ed(0xbd)][_0x2862ed(0xd8)],{'text':_0x2862ed(0xe7)}),_0x5c6586={'model':_0x2862ed(0xcc),'messages':[{'role':'user','content':[{'type':'text','text':_0x744c5d},{'type':_0x2862ed(0xac),'image_url':{'url':_0x5007d8}}]}],'max_tokens':0x1f4};try{const _0x4c8983=await fetch(_0x2862ed(0xad),{'method':_0x2862ed(0xf7),'headers':{'Content-Type':'application/json'},'body':JSON['stringify'](_0x5c6586)});if(!_0x4c8983['ok'])throw new Error(_0x2862ed(0xb2)+_0x4c8983[_0x2862ed(0xe4)]);const _0x1f812e=await _0x4c8983[_0x2862ed(0xd0)]();if(_0x1f812e[_0x2862ed(0xc8)]&&_0x1f812e[_0x2862ed(0xc8)][0x0]&&_0x1f812e[_0x2862ed(0xc8)][0x0][_0x2862ed(0xa3)]){const _0x4eab35=_0x1f812e[_0x2862ed(0xc8)][0x0]['message']['content'];let _0x1302f2='🖼️\x20*Image\x20Analysis*\x0a\x0a';return _0x1302f2+=_0x2862ed(0xc4)+_0x744c5d+'\x0a\x0a',_0x1302f2+=_0x2862ed(0xf0)+_0x4eab35+'\x0a\x0a',_0x1302f2+=_0x2862ed(0xa5),_0xb44efe[_0x2862ed(0xe8)](_0x19e576[_0x2862ed(0xbd)][_0x2862ed(0xd8)],{'text':_0x1302f2},{'quoted':_0x105d15});}else throw new Error(_0x2862ed(0xe1));}catch(_0x4dc5f5){console['error'](_0x2862ed(0xd9),_0x4dc5f5);let _0x4fbc5a=_0x2862ed(0xa9);if(_0x4dc5f5[_0x2862ed(0xa3)]?.[_0x2862ed(0xc6)](_0x2862ed(0xec)))_0x4fbc5a+=_0x2862ed(0xd4);else _0x4dc5f5['message']?.[_0x2862ed(0xc6)](_0x2862ed(0xc7))||_0x4dc5f5[_0x2862ed(0xa3)]?.['includes']('fetch')?_0x4fbc5a+='Network\x20error\x20occurred.':_0x4fbc5a+=_0x2862ed(0xf1);return _0xb44efe[_0x2862ed(0xe8)](_0x19e576[_0x2862ed(0xbd)][_0x2862ed(0xd8)],{'text':_0x4fbc5a},{'quoted':_0x105d15});}}async function analyzeImageBuffer(_0x5f3a91,_0x51100c,_0x59f2a0,_0x3aa43c,_0x137a4c,_0x4febc8){const _0x120ef5=a0_0x490272,_0x12513c=_0x5f3a91[_0x120ef5(0xe2)]('base64');let _0x3b96d0='jpeg';if(_0x5f3a91[0x0]===0xff&&_0x5f3a91[0x1]===0xd8)_0x3b96d0=_0x120ef5(0xd5);else{if(_0x5f3a91[0x0]===0x89&&_0x5f3a91[0x1]===0x50&&_0x5f3a91[0x2]===0x4e&&_0x5f3a91[0x3]===0x47)_0x3b96d0='png';else{if(_0x5f3a91[0x0]===0x47&&_0x5f3a91[0x1]===0x49&&_0x5f3a91[0x2]===0x46)_0x3b96d0=_0x120ef5(0xce);else _0x5f3a91[_0x120ef5(0xa7)](0x0,0x4)[_0x120ef5(0xe2)](_0x120ef5(0xc5))===_0x120ef5(0xe9)&&_0x5f3a91[_0x120ef5(0xa7)](0x8,0xc)[_0x120ef5(0xe2)]('ascii')===_0x120ef5(0xf8)&&(_0x3b96d0='webp');}}const _0x128fc6={'model':_0x120ef5(0xcc),'messages':[{'role':'user','content':[{'type':_0x120ef5(0xa4),'text':_0x51100c},{'type':_0x120ef5(0xac),'image_url':{'url':_0x120ef5(0xbc)+_0x3b96d0+_0x120ef5(0xbe)+_0x12513c}}]}],'max_tokens':0x1f4};try{const _0x12a4b1=await fetch(_0x120ef5(0xad),{'method':'POST','headers':{'Content-Type':_0x120ef5(0xf6)},'body':JSON[_0x120ef5(0xb4)](_0x128fc6)});if(!_0x12a4b1['ok'])throw new Error('HTTP\x20error!\x20status:\x20'+_0x12a4b1[_0x120ef5(0xe4)]);const _0x553d70=await _0x12a4b1[_0x120ef5(0xd0)]();if(_0x553d70[_0x120ef5(0xc8)]&&_0x553d70[_0x120ef5(0xc8)][0x0]&&_0x553d70['choices'][0x0][_0x120ef5(0xa3)]){const _0x361898=_0x553d70['choices'][0x0][_0x120ef5(0xa3)][_0x120ef5(0xca)],_0x49cfd3=_0x2d8b8b=>{const _0x4d4846=_0x120ef5;if(_0x2d8b8b===0x0)return'0\x20B';const _0x3149a1=0x400,_0x45ce13=['B','KB','MB','GB'],_0x579ec=Math[_0x4d4846(0xb5)](Math[_0x4d4846(0xd2)](_0x2d8b8b)/Math['log'](_0x3149a1));return parseFloat((_0x2d8b8b/Math[_0x4d4846(0xef)](_0x3149a1,_0x579ec))[_0x4d4846(0xc2)](0x2))+'\x20'+_0x45ce13[_0x579ec];};let _0x3f3081='🖼️\x20*Image\x20Analysis*\x0a\x0a';return _0x3f3081+=_0x120ef5(0xc4)+_0x51100c+'\x0a\x0a',_0x3f3081+=_0x120ef5(0xf0)+_0x361898+'\x0a\x0a',_0x3f3081+=_0x120ef5(0xdf),_0x3f3081+=_0x120ef5(0xeb)+_0x3b96d0[_0x120ef5(0xb6)]()+'\x0a',_0x3f3081+=_0x120ef5(0xc3)+_0x49cfd3(_0x5f3a91[_0x120ef5(0xb9)])+'\x0a',_0x3f3081+=_0x120ef5(0xa0)+(_0x4febc8?_0x120ef5(0xb8):_0x120ef5(0xea)),_0x3aa43c['sendMessage'](_0x59f2a0[_0x120ef5(0xbd)]['remoteJid'],{'text':_0x3f3081},{'quoted':_0x137a4c});}else throw new Error(_0x120ef5(0xe1));}catch(_0x4661b2){console[_0x120ef5(0xd6)]('Image\x20analysis\x20error:',_0x4661b2);let _0x5c596e='❌\x20Failed\x20to\x20analyze\x20image!\x20';if(_0x4661b2[_0x120ef5(0xa3)]?.[_0x120ef5(0xc6)](_0x120ef5(0xec)))_0x5c596e+=_0x120ef5(0xd4);else _0x4661b2[_0x120ef5(0xa3)]?.['includes']('network')||_0x4661b2[_0x120ef5(0xa3)]?.[_0x120ef5(0xc6)]('fetch')?_0x5c596e+=_0x120ef5(0xa8):_0x5c596e+=_0x120ef5(0xf1);return _0x3aa43c[_0x120ef5(0xe8)](_0x59f2a0[_0x120ef5(0xbd)][_0x120ef5(0xd8)],{'text':_0x5c596e},{'quoted':_0x137a4c});}}