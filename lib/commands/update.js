const a0_0x254159=a0_0x2cc6;function a0_0x21aa(){const _0x76e745=['\x0a-\x20','utf8','owner','158rsGHPc','extractAllTo','end','adm-zip','üîÑ\x20New\x20version\x20available:\x20v','\x20‚Üí\x20','length','840ICPPCv','writeFileSync','push','toString','mode','startsWith','.update\x20or\x20.update\x20now','close','1666441nyPlsP','Content:','createWriteStream','key','237372xUWbKm','repo-extracted','error','now','3720icmlHj','path','message','448668BSXrcf','‚ùå\x20Update\x20failed.\x0a','finish','dependencies','10mLtFgb','\x0a‚ôªÔ∏è\x20Restarting\x20bot\x20to\x20apply\x20changes...','Dammy8611/MORA-BOT','location','isDirectory','parse','\x20(from\x20','https://raw.githubusercontent.com/','1693824wlZLxJ','exit','https://github.com/','mkdirSync','data','readFileSync','unlinkSync','.zip','headers','üÜï\x20','üîÅ\x20','string','NodeJS\x20Updater','sendMessage','Too\x20many\x20redirects','üñ•Ô∏è\x20If\x20on\x20local\x20PC/server,\x20run:\x20`npm\x20install`\x0a\x0a‚õî\x20Shutting\x20down...','match','statusCode','devDependencies','find','join','0.0.0','existsSync','repo.zip','entries','5624973mgMyCL','\x0a\x0a>\x20Use\x20\x27update\x20now\x27\x20to\x20get\x20the\x20latest\x20version.','\x0aVersion\x20details:\x0a','https','copyFileSync','Check\x20for\x20updates\x20or\x20apply\x20them','‚ùå\x20Failed\x20to\x20check\x20version.\x0a','rmSync','get','/archive/refs/heads/','152jeyayD','package.json','readdirSync','pipe','trim','\x0aüì¶\x20The\x20following\x20packages\x20were\x20added\x20or\x20changed:\x0a-\x20','name','Failed\x20to\x20download\x20zip:\x20'];a0_0x21aa=function(){return _0x76e745;};return a0_0x21aa();}(function(_0x3380b3,_0x2c05bf){const _0x158d44=a0_0x2cc6,_0x1e88f9=_0x3380b3();while(!![]){try{const _0x59fc55=-parseInt(_0x158d44(0x151))/0x1+parseInt(_0x158d44(0x13e))/0x2*(-parseInt(_0x158d44(0x145))/0x3)+parseInt(_0x158d44(0x133))/0x4*(-parseInt(_0x158d44(0x155))/0x5)+parseInt(_0x158d44(0x158))/0x6+parseInt(_0x158d44(0x14d))/0x7+-parseInt(_0x158d44(0x110))/0x8+-parseInt(_0x158d44(0x129))/0x9*(-parseInt(_0x158d44(0x15c))/0xa);if(_0x59fc55===_0x2c05bf)break;else _0x1e88f9['push'](_0x1e88f9['shift']());}catch(_0x351db4){_0x1e88f9['push'](_0x1e88f9['shift']());}}}(a0_0x21aa,0x6b04a));const fs=require('fs'),path=require(a0_0x254159(0x156)),https=require(a0_0x254159(0x12c)),AdmZip=require(a0_0x254159(0x141)),CURRENT_VERSION_FILE=path['join'](__dirname,'..','version.txt'),GITHUB_REPO=a0_0x254159(0x15e),GITHUB_BRANCH='main',VERSION_URL=a0_0x254159(0x10f)+GITHUB_REPO+'/'+GITHUB_BRANCH+'/version.txt',ZIP_URL=a0_0x254159(0x112)+GITHUB_REPO+a0_0x254159(0x132)+GITHUB_BRANCH+a0_0x254159(0x117);function getCurrentVersion(){const _0x1c5f89=a0_0x254159;if(!fs[_0x1c5f89(0x126)](CURRENT_VERSION_FILE))return _0x1c5f89(0x125);const _0x4e6cab=fs['readFileSync'](CURRENT_VERSION_FILE,_0x1c5f89(0x13c)),_0x5e07e4=_0x4e6cab[_0x1c5f89(0x120)](/Version:\s*([^\n]+)/);return _0x5e07e4?.[0x1]?.[_0x1c5f89(0x137)]()||_0x1c5f89(0x125);}async function fetchRemoteVersionFile(){return new Promise((_0x1e3dc7,_0x16420a)=>{const _0x55e5f7=a0_0x2cc6;https['get'](VERSION_URL,_0x3b3dc3=>{const _0x254e31=a0_0x2cc6;let _0x475d6b='';_0x3b3dc3['on'](_0x254e31(0x114),_0x5ef239=>_0x475d6b+=_0x5ef239),_0x3b3dc3['on'](_0x254e31(0x140),()=>_0x1e3dc7(_0x475d6b));})['on'](_0x55e5f7(0x153),_0x16420a);});}function parseVersionInfo(_0x388111){const _0x42a26b=a0_0x254159,_0x52b56a=_0x388111[_0x42a26b(0x120)](/Version:\s*([^\n]+)/)?.[0x1]?.[_0x42a26b(0x137)](),_0x2b70fa=_0x388111['split'](_0x42a26b(0x14e))[0x1]?.['trim']();return{'version':_0x52b56a,'content':_0x2b70fa};}const followRedirect=(_0x286740,_0x32bd7b=0x5)=>{return new Promise((_0x51285f,_0x337f29)=>{const _0x416cd0=(_0x35fb43,_0x5bb7ca)=>{const _0x5bdbf5=a0_0x2cc6,_0xb1a09c={'headers':{'User-Agent':_0x5bdbf5(0x11c)}};https[_0x5bdbf5(0x131)](_0x35fb43,_0xb1a09c,_0x2d8f35=>{const _0x5a0ed1=_0x5bdbf5;if(_0x2d8f35[_0x5a0ed1(0x121)]>=0x12c&&_0x2d8f35[_0x5a0ed1(0x121)]<0x190&&_0x2d8f35[_0x5a0ed1(0x118)][_0x5a0ed1(0x15f)]){if(_0x5bb7ca>=_0x32bd7b)return _0x337f29(new Error(_0x5a0ed1(0x11e)));const _0x8d68d3=_0x2d8f35[_0x5a0ed1(0x118)][_0x5a0ed1(0x15f)][_0x5a0ed1(0x14a)]('http')?_0x2d8f35[_0x5a0ed1(0x118)]['location']:new URL(_0x2d8f35[_0x5a0ed1(0x118)][_0x5a0ed1(0x15f)],_0x35fb43)[_0x5a0ed1(0x148)]();_0x416cd0(_0x8d68d3,_0x5bb7ca+0x1);}else _0x51285f(_0x2d8f35);})['on']('error',_0x337f29);};_0x416cd0(_0x286740,0x0);});};async function downloadAndExtractRepo(){const _0x1b4d7b=a0_0x254159,_0x40a3d4=path[_0x1b4d7b(0x124)]('temp',_0x1b4d7b(0x127)),_0x622275=path[_0x1b4d7b(0x124)]('temp',_0x1b4d7b(0x152));if(!fs[_0x1b4d7b(0x126)]('temp'))fs[_0x1b4d7b(0x113)]('temp');if(fs['existsSync'](_0x40a3d4))fs[_0x1b4d7b(0x116)](_0x40a3d4);if(fs[_0x1b4d7b(0x126)](_0x622275))fs[_0x1b4d7b(0x130)](_0x622275,{'recursive':!![],'force':!![]});return new Promise(async(_0x4a1140,_0xae29b0)=>{const _0x1dc074=_0x1b4d7b;try{const _0x7ed883=await followRedirect(ZIP_URL),_0x19e7cc=fs[_0x1dc074(0x14f)](_0x40a3d4);_0x7ed883[_0x1dc074(0x136)](_0x19e7cc),_0x19e7cc['on'](_0x1dc074(0x15a),()=>{const _0x2a8bf6=_0x1dc074;_0x19e7cc[_0x2a8bf6(0x14c)]();try{const _0x2e186c=new AdmZip(_0x40a3d4);_0x2e186c[_0x2a8bf6(0x13f)](_0x622275,!![]);const _0x29d7b9=fs[_0x2a8bf6(0x135)](_0x622275)[_0x2a8bf6(0x123)](_0x43578c=>fs['lstatSync'](path[_0x2a8bf6(0x124)](_0x622275,_0x43578c))[_0x2a8bf6(0x160)]()),_0x11b2a0=path['join'](_0x622275,_0x29d7b9);_0x4a1140({'fullExtracted':_0x11b2a0,'zipPath':_0x40a3d4,'extractPath':_0x622275});}catch(_0x49efe2){_0xae29b0(_0x49efe2);}});}catch(_0x306306){_0xae29b0(new Error(_0x1dc074(0x13a)+_0x306306[_0x1dc074(0x157)]));}});}function a0_0x2cc6(_0x3ea57d,_0x53c360){const _0x21aa2f=a0_0x21aa();return a0_0x2cc6=function(_0x2cc656,_0xd71808){_0x2cc656=_0x2cc656-0x10d;let _0x15a212=_0x21aa2f[_0x2cc656];return _0x15a212;},a0_0x2cc6(_0x3ea57d,_0x53c360);}function copyFiles(_0x10b7d8,_0x4f621e){const _0x489307=a0_0x254159,_0x3795e6=fs[_0x489307(0x135)](_0x10b7d8,{'withFileTypes':!![]});for(const _0x50f93c of _0x3795e6){const _0x509e69=path[_0x489307(0x124)](_0x10b7d8,_0x50f93c[_0x489307(0x139)]),_0x476beb=path[_0x489307(0x124)](_0x4f621e,_0x50f93c[_0x489307(0x139)]);if(_0x50f93c[_0x489307(0x160)]()){if(!fs[_0x489307(0x126)](_0x476beb))fs['mkdirSync'](_0x476beb);copyFiles(_0x509e69,_0x476beb);}else fs[_0x489307(0x12d)](_0x509e69,_0x476beb);}}function getDependencies(_0x235cf0){const _0x1cc54a=a0_0x254159;if(!fs[_0x1cc54a(0x126)](_0x235cf0))return{};const _0x12b472=JSON[_0x1cc54a(0x10d)](fs[_0x1cc54a(0x115)](_0x235cf0,'utf8'));return{'dependencies':_0x12b472[_0x1cc54a(0x15b)]||{},'devDependencies':_0x12b472[_0x1cc54a(0x122)]||{}};}function diffDeps(_0x3ca929,_0x87b947){const _0x6e2d65=a0_0x254159,_0x4b5e67=[];for(const [_0x1e9493,_0x3b9f22]of Object[_0x6e2d65(0x128)](_0x87b947)){if(!_0x3ca929[_0x1e9493])_0x4b5e67['push'](_0x6e2d65(0x119)+_0x1e9493+'@'+_0x3b9f22);else{if(_0x3ca929[_0x1e9493]!==_0x3b9f22)_0x4b5e67[_0x6e2d65(0x147)](_0x6e2d65(0x11a)+_0x1e9493+_0x6e2d65(0x10e)+_0x3ca929[_0x1e9493]+_0x6e2d65(0x143)+_0x3b9f22+')');}}return _0x4b5e67;}module['exports']={'meta':{'name':'update','description':a0_0x254159(0x12e),'usage':a0_0x254159(0x14b),'args':[{'name':a0_0x254159(0x149),'type':a0_0x254159(0x11b),'required':![]}],'ownerOnly':!![],'category':a0_0x254159(0x13d)},'run':async({sock:_0x27d3c6,m:_0x5a930e,args:_0x5314a9})=>{const _0x2fa566=a0_0x254159,_0x575604=_0x5a930e[_0x2fa566(0x150)]['remoteJid'],_0x23e7b5=(_0x5314a9[_0x2fa566(0x149)]||'')['toLowerCase']()===_0x2fa566(0x154);if(!_0x23e7b5)try{const _0x51f554=await fetchRemoteVersionFile(),{version:_0x590e21,content:_0x5c58ab}=parseVersionInfo(_0x51f554),_0x5a454c=getCurrentVersion();return _0x590e21===_0x5a454c?_0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':'‚úÖ\x20You\x27re\x20up\x20to\x20date\x20(v'+_0x5a454c+')'}):_0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':_0x2fa566(0x142)+_0x590e21+_0x2fa566(0x12b)+_0x5c58ab+_0x2fa566(0x12a)});}catch(_0x49f37a){return _0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':_0x2fa566(0x12f)+_0x49f37a['message']});}await _0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':'üì•\x20Downloading\x20latest\x20version...'});try{const {fullExtracted:_0x4b7508,zipPath:_0x17f9d9,extractPath:_0x32e77f}=await downloadAndExtractRepo(),_0x23ae09=getDependencies(path[_0x2fa566(0x124)](__dirname,'..',_0x2fa566(0x134))),_0x337b8=getDependencies(path[_0x2fa566(0x124)](_0x4b7508,_0x2fa566(0x134))),_0x47c85e=diffDeps(_0x23ae09['dependencies'],_0x337b8[_0x2fa566(0x15b)]),_0x145c91=diffDeps(_0x23ae09[_0x2fa566(0x122)],_0x337b8[_0x2fa566(0x122)]),_0x549ea4=_0x47c85e[_0x2fa566(0x144)]||_0x145c91[_0x2fa566(0x144)];copyFiles(_0x4b7508,path[_0x2fa566(0x124)](__dirname,'..'));const _0x154b7b=await fetchRemoteVersionFile();fs[_0x2fa566(0x146)](CURRENT_VERSION_FILE,_0x154b7b);if(fs['existsSync'](_0x17f9d9))fs['unlinkSync'](_0x17f9d9);if(fs[_0x2fa566(0x126)](_0x32e77f))fs[_0x2fa566(0x130)](_0x32e77f,{'recursive':!![],'force':!![]});const {version:_0x1a2447}=parseVersionInfo(_0x154b7b);let _0x41ab77='‚úÖ\x20Updated\x20successfully\x20to\x20v'+_0x1a2447+'\x0a';if(_0x549ea4){const _0x487699=[..._0x47c85e,..._0x145c91];_0x41ab77+=_0x2fa566(0x138)+_0x487699['join'](_0x2fa566(0x13b)),_0x41ab77+='\x0a\x0aüí°\x20Please\x20install\x20updated\x20dependencies\x20before\x20starting\x20the\x20bot\x20again.\x0a',_0x41ab77+='üîÅ\x20If\x20using\x20a\x20panel\x20(e.g.,\x20Railway,\x20Replit),\x20it\x20may\x20auto-reinstall\x20on\x20restart.\x0a',_0x41ab77+=_0x2fa566(0x11f),await _0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':_0x41ab77}),process[_0x2fa566(0x111)](0x0);}else _0x41ab77+=_0x2fa566(0x15d),await _0x27d3c6['sendMessage'](_0x575604,{'text':_0x41ab77}),process[_0x2fa566(0x111)](0x64);}catch(_0x10b9e8){return _0x27d3c6[_0x2fa566(0x11d)](_0x575604,{'text':_0x2fa566(0x159)+_0x10b9e8['message']});}}};