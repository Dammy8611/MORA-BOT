const a0_0x39ea15=a0_0x2a06;(function(_0x165c07,_0x2dc78e){const _0x17bd3b=a0_0x2a06,_0x2e7ddb=_0x165c07();while(!![]){try{const _0x572d31=-parseInt(_0x17bd3b(0x234))/0x1+-parseInt(_0x17bd3b(0x203))/0x2*(parseInt(_0x17bd3b(0x1f1))/0x3)+parseInt(_0x17bd3b(0x22f))/0x4*(-parseInt(_0x17bd3b(0x21e))/0x5)+parseInt(_0x17bd3b(0x1f5))/0x6*(-parseInt(_0x17bd3b(0x212))/0x7)+parseInt(_0x17bd3b(0x20a))/0x8*(parseInt(_0x17bd3b(0x210))/0x9)+-parseInt(_0x17bd3b(0x223))/0xa+parseInt(_0x17bd3b(0x20b))/0xb;if(_0x572d31===_0x2dc78e)break;else _0x2e7ddb['push'](_0x2e7ddb['shift']());}catch(_0x9e54b5){_0x2e7ddb['push'](_0x2e7ddb['shift']());}}}(a0_0x4ae3,0x3e605));const fs=require('fs'),path=require(a0_0x39ea15(0x232)),https=require(a0_0x39ea15(0x237)),AdmZip=require(a0_0x39ea15(0x1f3)),CURRENT_VERSION_FILE=path[a0_0x39ea15(0x1fd)](__dirname,'..','version.txt'),GITHUB_REPO=a0_0x39ea15(0x1fa),GITHUB_BRANCH='main',VERSION_URL='https://raw.githubusercontent.com/'+GITHUB_REPO+'/'+GITHUB_BRANCH+'/version.txt',ZIP_URL=a0_0x39ea15(0x213)+GITHUB_REPO+a0_0x39ea15(0x22b)+GITHUB_BRANCH+a0_0x39ea15(0x20d);function getCurrentVersion(){const _0x5d7808=a0_0x39ea15;if(!fs[_0x5d7808(0x222)](CURRENT_VERSION_FILE))return _0x5d7808(0x20c);const _0x5b1edc=fs[_0x5d7808(0x200)](CURRENT_VERSION_FILE,'utf8'),_0x880c5e=_0x5b1edc[_0x5d7808(0x220)](/Version:\s*([^\n]+)/);return _0x880c5e?.[0x1]?.[_0x5d7808(0x211)]()||_0x5d7808(0x20c);}function a0_0x2a06(_0x11700c,_0x1bb47a){const _0x4ae333=a0_0x4ae3();return a0_0x2a06=function(_0x2a06ed,_0x3970f2){_0x2a06ed=_0x2a06ed-0x1f0;let _0x29890d=_0x4ae333[_0x2a06ed];return _0x29890d;},a0_0x2a06(_0x11700c,_0x1bb47a);}async function fetchRemoteVersionFile(){return new Promise((_0x294fce,_0x18bbfd)=>{const _0x24d7c7=a0_0x2a06;https[_0x24d7c7(0x21d)](VERSION_URL,_0x3fee2e=>{const _0x2b6ee2=_0x24d7c7;let _0x2ee972='';_0x3fee2e['on'](_0x2b6ee2(0x228),_0x2b3a68=>_0x2ee972+=_0x2b3a68),_0x3fee2e['on']('end',()=>_0x294fce(_0x2ee972));})['on'](_0x24d7c7(0x235),_0x18bbfd);});}function a0_0x4ae3(){const _0x2ce6d7=['âŒ\x20Update\x20failed.\x0a','ðŸ”\x20If\x20using\x20a\x20panel\x20(e.g.,\x20Railway,\x20Replit),\x20it\x20may\x20auto-reinstall\x20on\x20restart.\x0a','\x0a-\x20','writeFileSync','âœ…\x20You\x27re\x20up\x20to\x20date\x20(v','get','2100005bwQGrB','ðŸ”\x20','match','createWriteStream','existsSync','4425060xEDBVD','repo-extracted','split','push','entries','data','now','exit','/archive/refs/heads/','Content:','devDependencies','rmSync','4rJjXCi','mode','âœ…\x20Updated\x20successfully\x20to\x20v','path','copyFileSync','456797XNBcCI','error','\x0a\x0a>\x20Use\x20\x27update\x20now\x27\x20to\x20get\x20the\x20latest\x20version.','https','temp','ðŸ–¥ï¸\x20If\x20on\x20local\x20PC/server,\x20run:\x20`npm\x20install`\x0a\x0aâ›”\x20Shutting\x20down...','package.json','message','extractAllTo','sendMessage','28233chtbtj','\x0aðŸ“¦\x20The\x20following\x20packages\x20were\x20added\x20or\x20changed:\x0a-\x20','adm-zip','parse','24MQPuvv','unlinkSync','length','âŒ\x20Failed\x20to\x20check\x20version.\x0a','NodeJS\x20Updater\x20Script','Dammy8611/MORA-BOT','dependencies','close','join','toLowerCase','lstatSync','readFileSync','isDirectory','\x20â†’\x20','66WrMajB','ðŸ“¥\x20Downloading\x20latest\x20version...','\x0aâ™»ï¸\x20Restarting\x20bot\x20to\x20apply\x20changes...','statusCode','exports','repo.zip','readdirSync','3713536ATpIre','18486776njieOI','0.0.0','.zip','name','\x0aVersion\x20details:\x0a','9SyMPjh','trim','454034kimuHP','https://github.com/','\x20(from\x20','ðŸ†•\x20','owner','\x0a\x0aðŸ’¡\x20Please\x20install\x20updated\x20dependencies\x20before\x20starting\x20the\x20bot\x20again.\x0a'];a0_0x4ae3=function(){return _0x2ce6d7;};return a0_0x4ae3();}function parseVersionInfo(_0x3f9d6e){const _0x3aa3cd=a0_0x39ea15,_0x55a1e5=_0x3f9d6e[_0x3aa3cd(0x220)](/Version:\s*([^\n]+)/)?.[0x1]?.[_0x3aa3cd(0x211)](),_0x157489=_0x3f9d6e[_0x3aa3cd(0x225)](_0x3aa3cd(0x22c))[0x1]?.[_0x3aa3cd(0x211)]();return{'version':_0x55a1e5,'content':_0x157489};}async function downloadAndExtractRepo(){const _0x5caf81=a0_0x39ea15,_0x1b7099=path['join']('temp',_0x5caf81(0x208)),_0x220b26=path[_0x5caf81(0x1fd)](_0x5caf81(0x238),_0x5caf81(0x224));if(fs[_0x5caf81(0x222)](_0x1b7099))fs['unlinkSync'](_0x1b7099);if(fs['existsSync'](_0x220b26))fs[_0x5caf81(0x22e)](_0x220b26,{'recursive':!![],'force':!![]});return new Promise((_0x5b6fcc,_0x4ff5ce)=>{const _0x3fb16a=_0x5caf81,_0x4db455=fs[_0x3fb16a(0x221)](_0x1b7099),_0x4805fa={'headers':{'User-Agent':_0x3fb16a(0x1f9)}};https['get'](ZIP_URL,_0x4805fa,_0x61e27=>{const _0x122137=_0x3fb16a;if(_0x61e27[_0x122137(0x206)]!==0xc8)return _0x4ff5ce(new Error('Failed\x20to\x20download\x20zip\x20(status\x20'+_0x61e27[_0x122137(0x206)]+')'));_0x61e27['pipe'](_0x4db455),_0x4db455['on']('finish',()=>{const _0x255ed2=_0x122137;_0x4db455[_0x255ed2(0x1fc)]();try{const _0x403d75=new AdmZip(_0x1b7099);_0x403d75[_0x255ed2(0x23c)](_0x220b26,!![]);const _0x3ef20c=fs[_0x255ed2(0x209)](_0x220b26)['find'](_0x390b97=>fs[_0x255ed2(0x1ff)](path[_0x255ed2(0x1fd)](_0x220b26,_0x390b97))[_0x255ed2(0x201)]()),_0x1aabaf=path['join'](_0x220b26,_0x3ef20c);_0x5b6fcc({'fullExtracted':_0x1aabaf,'zipPath':_0x1b7099,'extractPath':_0x220b26});}catch(_0x442003){_0x4ff5ce(_0x442003);}});})['on'](_0x3fb16a(0x235),_0x4ff5ce);});}function copyFiles(_0x19222f,_0xaa4e5b){const _0xd7b743=a0_0x39ea15,_0x5bd561=fs[_0xd7b743(0x209)](_0x19222f,{'withFileTypes':!![]});for(const _0xb26e79 of _0x5bd561){const _0x2fd406=path['join'](_0x19222f,_0xb26e79[_0xd7b743(0x20e)]),_0x583465=path['join'](_0xaa4e5b,_0xb26e79[_0xd7b743(0x20e)]);if(_0xb26e79[_0xd7b743(0x201)]()){if(!fs['existsSync'](_0x583465))fs['mkdirSync'](_0x583465);copyFiles(_0x2fd406,_0x583465);}else fs[_0xd7b743(0x233)](_0x2fd406,_0x583465);}}function getDependencies(_0xee4bca){const _0x12c4eb=a0_0x39ea15;if(!fs[_0x12c4eb(0x222)](_0xee4bca))return{};const _0x3f205c=JSON[_0x12c4eb(0x1f4)](fs[_0x12c4eb(0x200)](_0xee4bca,'utf8'));return{'dependencies':_0x3f205c[_0x12c4eb(0x1fb)]||{},'devDependencies':_0x3f205c['devDependencies']||{}};}function diffDeps(_0x24e59c,_0x2f851a){const _0x32bcae=a0_0x39ea15,_0x113074=[];for(const [_0x1398dd,_0x3bbd51]of Object[_0x32bcae(0x227)](_0x2f851a)){if(!_0x24e59c[_0x1398dd])_0x113074[_0x32bcae(0x226)](_0x32bcae(0x215)+_0x1398dd+'@'+_0x3bbd51);else{if(_0x24e59c[_0x1398dd]!==_0x3bbd51)_0x113074[_0x32bcae(0x226)](_0x32bcae(0x21f)+_0x1398dd+_0x32bcae(0x214)+_0x24e59c[_0x1398dd]+_0x32bcae(0x202)+_0x3bbd51+')');}}return _0x113074;}module[a0_0x39ea15(0x207)]={'meta':{'name':'update','description':'Check\x20for\x20updates\x20or\x20apply\x20them','usage':'.update\x20or\x20.update\x20now','args':[{'name':a0_0x39ea15(0x230),'type':'string','required':![]}],'ownerOnly':!![],'category':a0_0x39ea15(0x216)},'run':async({sock:_0x52ea18,m:_0x167223,args:_0xcffc17})=>{const _0x58478f=a0_0x39ea15,_0x31f9ed=_0x167223['key']['remoteJid'],_0x19a3f8=(_0xcffc17[_0x58478f(0x230)]||'')[_0x58478f(0x1fe)]()===_0x58478f(0x229);if(!_0x19a3f8)try{const _0xfb4254=await fetchRemoteVersionFile(),{version:_0x2af2ae,content:_0x14bc55}=parseVersionInfo(_0xfb4254),_0x1425fd=getCurrentVersion();return _0x2af2ae===_0x1425fd?_0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x58478f(0x21c)+_0x1425fd+')'}):_0x52ea18['sendMessage'](_0x31f9ed,{'text':'ðŸ”„\x20New\x20version\x20available:\x20v'+_0x2af2ae+_0x58478f(0x20f)+_0x14bc55+_0x58478f(0x236)});}catch(_0x1e2483){return _0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x58478f(0x1f8)+_0x1e2483['message']});}await _0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x58478f(0x204)});try{const {fullExtracted:_0x5606fa,zipPath:_0x2130d2,extractPath:_0x2185b1}=await downloadAndExtractRepo(),_0x4c2bca=getDependencies(path[_0x58478f(0x1fd)](__dirname,'..',_0x58478f(0x23a))),_0x556f1d=getDependencies(path[_0x58478f(0x1fd)](_0x5606fa,_0x58478f(0x23a))),_0x2611d2=diffDeps(_0x4c2bca[_0x58478f(0x1fb)],_0x556f1d['dependencies']),_0x222ac5=diffDeps(_0x4c2bca[_0x58478f(0x22d)],_0x556f1d[_0x58478f(0x22d)]),_0x191e56=_0x2611d2[_0x58478f(0x1f7)]||_0x222ac5[_0x58478f(0x1f7)];copyFiles(_0x5606fa,path[_0x58478f(0x1fd)](__dirname,'..'));const _0x44f45f=await fetchRemoteVersionFile();fs[_0x58478f(0x21b)](CURRENT_VERSION_FILE,_0x44f45f);if(fs['existsSync'](_0x2130d2))fs[_0x58478f(0x1f6)](_0x2130d2);if(fs[_0x58478f(0x222)](_0x2185b1))fs[_0x58478f(0x22e)](_0x2185b1,{'recursive':!![],'force':!![]});const {version:_0x54ebf1}=parseVersionInfo(_0x44f45f);let _0x447e31=_0x58478f(0x231)+_0x54ebf1+'\x0a';if(_0x191e56){const _0x5110b1=[..._0x2611d2,..._0x222ac5];_0x447e31+=_0x58478f(0x1f2)+_0x5110b1['join'](_0x58478f(0x21a)),_0x447e31+=_0x58478f(0x217),_0x447e31+=_0x58478f(0x219),_0x447e31+=_0x58478f(0x239),await _0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x447e31}),process[_0x58478f(0x22a)](0x0);}else _0x447e31+=_0x58478f(0x205),await _0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x447e31}),process[_0x58478f(0x22a)](0x64);}catch(_0x19407a){return _0x52ea18[_0x58478f(0x1f0)](_0x31f9ed,{'text':_0x58478f(0x218)+_0x19407a[_0x58478f(0x23b)]});}}};