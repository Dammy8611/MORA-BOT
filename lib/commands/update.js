const a0_0xaecd59=a0_0x1c7e;(function(_0x355864,_0x57058a){const _0x4dc071=a0_0x1c7e,_0x4ac0eb=_0x355864();while(!![]){try{const _0x34cbd2=parseInt(_0x4dc071(0x160))/0x1*(parseInt(_0x4dc071(0x145))/0x2)+-parseInt(_0x4dc071(0x142))/0x3+-parseInt(_0x4dc071(0x170))/0x4+-parseInt(_0x4dc071(0x158))/0x5*(parseInt(_0x4dc071(0x186))/0x6)+parseInt(_0x4dc071(0x156))/0x7*(parseInt(_0x4dc071(0x14b))/0x8)+-parseInt(_0x4dc071(0x162))/0x9*(parseInt(_0x4dc071(0x14a))/0xa)+parseInt(_0x4dc071(0x15b))/0xb;if(_0x34cbd2===_0x57058a)break;else _0x4ac0eb['push'](_0x4ac0eb['shift']());}catch(_0x4a4a9e){_0x4ac0eb['push'](_0x4ac0eb['shift']());}}}(a0_0x24f4,0x75781));const fs=require('fs'),path=require(a0_0xaecd59(0x163)),https=require(a0_0xaecd59(0x173)),AdmZip=require(a0_0xaecd59(0x171)),semver=require(a0_0xaecd59(0x161)),CURRENT_VERSION_FILE=path['join'](__dirname,'..',a0_0xaecd59(0x140)),GITHUB_REPO='Dammy8611/MORA-BOT',GITHUB_BRANCH=a0_0xaecd59(0x17a),VERSION_URL=a0_0xaecd59(0x177)+GITHUB_REPO+'/'+GITHUB_BRANCH+a0_0xaecd59(0x154),ZIP_URL=a0_0xaecd59(0x15d)+GITHUB_REPO+'/archive/refs/heads/'+GITHUB_BRANCH+a0_0xaecd59(0x13d);function a0_0x24f4(){const _0x31a94f=['üì•\x20Downloading\x20latest\x20version...','owner','parse','split','mkdirSync','üîÅ\x20','message','existsSync','package.json','.zip','utf8','0.0.0','version.txt','‚úÖ\x20Updated\x20successfully\x20to\x20v','1320432EqMTJw','lstatSync','exports','2neloRg','NodeJS\x20Updater','valid','.update\x20or\x20.update\x20now','‚ùå\x20Failed\x20to\x20check\x20version.\x0a','10fNzGeF','58056twsgkT','startsWith','Check\x20for\x20updates\x20or\x20apply\x20them','unlinkSync','headers','remoteJid','close','statusCode','end','/version.txt','push','133atzfsY','readFileSync','1465qyGJzl','‚ö†Ô∏è\x20Could\x20not\x20parse\x20','join','11356730LqRFxR','dependencies','https://github.com/','repo.zip','Too\x20many\x20redirects','866374wFMEMf','semver','7885431OpelrP','path','\x0a-\x20','now','location','toString','\x0a\x0aüí°\x20Please\x20install\x20updated\x20dependencies\x20before\x20starting\x20the\x20bot\x20again.\x0a','Content:','error','\x0a\x0a>\x20Use\x20\x27update\x20now\x27\x20to\x20get\x20the\x20latest\x20version.','\x20(from\x20','\x0aVersion\x20details:\x0a','üîÅ\x20If\x20using\x20a\x20panel\x20(e.g.,\x20Railway,\x20Replit),\x20it\x20may\x20auto-reinstall\x20on\x20restart.\x0a','entries','887776eXUyvU','adm-zip','update','https','pipe','repo-extracted','exit','https://raw.githubusercontent.com/','sendMessage','isDirectory','main','toLowerCase','get','length','http','rmSync','string','match','devDependencies','name','temp','readdirSync','354tvLBSr','data','üñ•Ô∏è\x20If\x20on\x20local\x20PC/server,\x20run:\x20`npm\x20install`\x0a\x0a‚õî\x20Shutting\x20down...','Failed\x20to\x20download\x20zip:\x20'];a0_0x24f4=function(){return _0x31a94f;};return a0_0x24f4();}function getCurrentVersion(){const _0x4232fa=a0_0xaecd59;if(!fs[_0x4232fa(0x13b)](CURRENT_VERSION_FILE))return _0x4232fa(0x13f);const _0x183354=fs[_0x4232fa(0x157)](CURRENT_VERSION_FILE,_0x4232fa(0x13e)),_0x4ee661=_0x183354['match'](/Version:\s*([^\n]+)/);return _0x4ee661?.[0x1]?.['trim']()||'0.0.0';}function a0_0x1c7e(_0x41cd25,_0x35c8e2){const _0x24f43d=a0_0x24f4();return a0_0x1c7e=function(_0x1c7e28,_0x4c7be7){_0x1c7e28=_0x1c7e28-0x133;let _0x1462c2=_0x24f43d[_0x1c7e28];return _0x1462c2;},a0_0x1c7e(_0x41cd25,_0x35c8e2);}async function fetchRemoteVersionFile(){return new Promise((_0xc017d4,_0x1791fd)=>{const _0x11f6ad=a0_0x1c7e;https[_0x11f6ad(0x17c)](VERSION_URL,_0x36349a=>{const _0x2de2e3=_0x11f6ad;let _0x373a6a='';_0x36349a['on'](_0x2de2e3(0x187),_0x31611b=>_0x373a6a+=_0x31611b),_0x36349a['on'](_0x2de2e3(0x153),()=>_0xc017d4(_0x373a6a));})['on'](_0x11f6ad(0x16a),_0x1791fd);});}function parseVersionInfo(_0x1a07c9){const _0x54f494=a0_0xaecd59,_0x1cc16a=_0x1a07c9[_0x54f494(0x181)](/Version:\s*([^\n]+)/)?.[0x1]?.['trim'](),_0xe3f8d8=_0x1a07c9[_0x54f494(0x137)](_0x54f494(0x169))[0x1]?.['trim']();return{'version':_0x1cc16a,'content':_0xe3f8d8};}const followRedirect=(_0x1ea705,_0x45fb53=0x5)=>{return new Promise((_0x44fc4e,_0x351863)=>{const _0x194f83=(_0x23c693,_0x2fa48c)=>{const _0x5997b7=a0_0x1c7e;https[_0x5997b7(0x17c)](_0x23c693,{'headers':{'User-Agent':_0x5997b7(0x146)}},_0x16c870=>{const _0x4925cc=_0x5997b7;if(_0x16c870[_0x4925cc(0x152)]>=0x12c&&_0x16c870[_0x4925cc(0x152)]<0x190&&_0x16c870['headers'][_0x4925cc(0x166)]){if(_0x2fa48c>=_0x45fb53)return _0x351863(new Error(_0x4925cc(0x15f)));const _0x4f3879=_0x16c870[_0x4925cc(0x14f)]['location'][_0x4925cc(0x14c)](_0x4925cc(0x17e))?_0x16c870[_0x4925cc(0x14f)]['location']:new URL(_0x16c870[_0x4925cc(0x14f)][_0x4925cc(0x166)],_0x23c693)[_0x4925cc(0x167)]();_0x194f83(_0x4f3879,_0x2fa48c+0x1);}else _0x44fc4e(_0x16c870);})['on']('error',_0x351863);};_0x194f83(_0x1ea705,0x0);});};async function downloadAndExtractRepo(){const _0x57f482=a0_0xaecd59,_0x48e236=path[_0x57f482(0x15a)](_0x57f482(0x184),_0x57f482(0x15e)),_0x4f6800=path['join']('temp',_0x57f482(0x175));if(!fs[_0x57f482(0x13b)](_0x57f482(0x184)))fs[_0x57f482(0x138)]('temp');if(fs[_0x57f482(0x13b)](_0x48e236))fs[_0x57f482(0x14e)](_0x48e236);if(fs['existsSync'](_0x4f6800))fs[_0x57f482(0x17f)](_0x4f6800,{'recursive':!![],'force':!![]});return new Promise(async(_0xde79f8,_0x5ad77d)=>{const _0x2f6a15=_0x57f482;try{const _0x1c79c9=await followRedirect(ZIP_URL),_0x146de6=fs['createWriteStream'](_0x48e236);_0x1c79c9[_0x2f6a15(0x174)](_0x146de6),_0x146de6['on']('finish',()=>{const _0x4ebeef=_0x2f6a15;_0x146de6[_0x4ebeef(0x151)]();try{const _0x221e86=new AdmZip(_0x48e236);_0x221e86['extractAllTo'](_0x4f6800,!![]);const _0x4eadcb=fs['readdirSync'](_0x4f6800)['find'](_0x35d253=>fs[_0x4ebeef(0x143)](path[_0x4ebeef(0x15a)](_0x4f6800,_0x35d253))[_0x4ebeef(0x179)]()),_0x492359=path[_0x4ebeef(0x15a)](_0x4f6800,_0x4eadcb);_0xde79f8({'fullExtracted':_0x492359,'zipPath':_0x48e236,'extractPath':_0x4f6800});}catch(_0xf47554){_0x5ad77d(_0xf47554);}});}catch(_0x17cbb1){_0x5ad77d(new Error(_0x2f6a15(0x133)+_0x17cbb1[_0x2f6a15(0x13a)]));}});}function copyFiles(_0x32443a,_0x560fa3){const _0x4207c2=a0_0xaecd59,_0x448d15=fs[_0x4207c2(0x185)](_0x32443a,{'withFileTypes':!![]});for(const _0x6bad50 of _0x448d15){const _0x3b6786=path[_0x4207c2(0x15a)](_0x32443a,_0x6bad50[_0x4207c2(0x183)]),_0x12351f=path[_0x4207c2(0x15a)](_0x560fa3,_0x6bad50[_0x4207c2(0x183)]);if(_0x6bad50[_0x4207c2(0x179)]()){if(!fs[_0x4207c2(0x13b)](_0x12351f))fs[_0x4207c2(0x138)](_0x12351f);copyFiles(_0x3b6786,_0x12351f);}else fs['copyFileSync'](_0x3b6786,_0x12351f);}}function getDependencies(_0x1e66ee){const _0xcc006=a0_0xaecd59;if(!fs['existsSync'](_0x1e66ee))return{'dependencies':{},'devDependencies':{}};try{const _0x8eb06f=JSON[_0xcc006(0x136)](fs[_0xcc006(0x157)](_0x1e66ee,'utf8'));return{'dependencies':_0x8eb06f[_0xcc006(0x15c)]||{},'devDependencies':_0x8eb06f[_0xcc006(0x182)]||{}};}catch(_0x28abac){return console['warn'](_0xcc006(0x159)+_0x1e66ee+':',_0x28abac[_0xcc006(0x13a)]),{'dependencies':{},'devDependencies':{}};}}function diffDeps(_0x211906,_0x2576ae){const _0x5db89b=a0_0xaecd59,_0x1155f3=[];for(const [_0x20bad9,_0x25a0b0]of Object[_0x5db89b(0x16f)](_0x2576ae)){if(!_0x211906[_0x20bad9])_0x1155f3[_0x5db89b(0x155)]('üÜï\x20'+_0x20bad9+'@'+_0x25a0b0);else{if(_0x211906[_0x20bad9]!==_0x25a0b0)_0x1155f3['push'](_0x5db89b(0x139)+_0x20bad9+_0x5db89b(0x16c)+_0x211906[_0x20bad9]+'\x20‚Üí\x20'+_0x25a0b0+')');}}return _0x1155f3;}module[a0_0xaecd59(0x144)]={'meta':{'name':a0_0xaecd59(0x172),'description':a0_0xaecd59(0x14d),'usage':a0_0xaecd59(0x148),'args':[{'name':'mode','type':a0_0xaecd59(0x180),'required':![]}],'ownerOnly':!![],'category':a0_0xaecd59(0x135)},'run':async({sock:_0xfd913a,m:_0x3b94c3,args:_0x510982})=>{const _0x1e0e9c=a0_0xaecd59,_0x12b504=_0x3b94c3['key'][_0x1e0e9c(0x150)],_0x41e20a=(_0x510982['mode']||'')[_0x1e0e9c(0x17b)]()===_0x1e0e9c(0x165);if(!_0x41e20a)try{const _0x515730=await fetchRemoteVersionFile(),{version:_0x4f8aba,content:_0x52fe22}=parseVersionInfo(_0x515730),_0x270a9b=getCurrentVersion();return semver[_0x1e0e9c(0x147)](_0x4f8aba)&&semver[_0x1e0e9c(0x147)](_0x270a9b)&&semver['lte'](_0x4f8aba,_0x270a9b)?_0xfd913a[_0x1e0e9c(0x178)](_0x12b504,{'text':'‚úÖ\x20You\x27re\x20up\x20to\x20date\x20(v'+_0x270a9b+')'}):_0xfd913a[_0x1e0e9c(0x178)](_0x12b504,{'text':'üîÑ\x20New\x20version\x20available:\x20v'+_0x4f8aba+_0x1e0e9c(0x16d)+_0x52fe22+_0x1e0e9c(0x16b)});}catch(_0x7e2007){return _0xfd913a['sendMessage'](_0x12b504,{'text':_0x1e0e9c(0x149)+_0x7e2007[_0x1e0e9c(0x13a)]});}await _0xfd913a['sendMessage'](_0x12b504,{'text':_0x1e0e9c(0x134)});try{const {fullExtracted:_0x1534ae,zipPath:_0x2d0e61,extractPath:_0x8f5b64}=await downloadAndExtractRepo(),_0x2639e9=getDependencies(path[_0x1e0e9c(0x15a)](__dirname,'..',_0x1e0e9c(0x13c))),_0xaa273c=getDependencies(path[_0x1e0e9c(0x15a)](_0x1534ae,_0x1e0e9c(0x13c))),_0x41895e=diffDeps(_0x2639e9[_0x1e0e9c(0x15c)],_0xaa273c['dependencies']),_0xda566d=diffDeps(_0x2639e9[_0x1e0e9c(0x182)],_0xaa273c['devDependencies']),_0x2de1a6=_0x41895e['length']||_0xda566d[_0x1e0e9c(0x17d)];copyFiles(_0x1534ae,path[_0x1e0e9c(0x15a)](__dirname,'..'));const _0xe47def=await fetchRemoteVersionFile();fs['writeFileSync'](CURRENT_VERSION_FILE,_0xe47def);if(fs[_0x1e0e9c(0x13b)](_0x2d0e61))fs[_0x1e0e9c(0x14e)](_0x2d0e61);if(fs[_0x1e0e9c(0x13b)](_0x8f5b64))fs[_0x1e0e9c(0x17f)](_0x8f5b64,{'recursive':!![],'force':!![]});const {version:_0x11e1bc}=parseVersionInfo(_0xe47def);let _0xc73b2e=_0x1e0e9c(0x141)+_0x11e1bc+'\x0a';if(_0x2de1a6){const _0x5d7eb4=[..._0x41895e,..._0xda566d];_0xc73b2e+='\x0aüì¶\x20The\x20following\x20packages\x20were\x20added\x20or\x20changed:\x0a-\x20'+_0x5d7eb4[_0x1e0e9c(0x15a)](_0x1e0e9c(0x164)),_0xc73b2e+=_0x1e0e9c(0x168),_0xc73b2e+=_0x1e0e9c(0x16e),_0xc73b2e+=_0x1e0e9c(0x188),await _0xfd913a[_0x1e0e9c(0x178)](_0x12b504,{'text':_0xc73b2e}),process[_0x1e0e9c(0x176)](0x0);}else _0xc73b2e+='\x0a‚ôªÔ∏è\x20Restarting\x20bot\x20to\x20apply\x20changes...',await _0xfd913a[_0x1e0e9c(0x178)](_0x12b504,{'text':_0xc73b2e}),process[_0x1e0e9c(0x176)](0x64);}catch(_0x13dde4){return _0xfd913a[_0x1e0e9c(0x178)](_0x12b504,{'text':'‚ùå\x20Update\x20failed.\x0a'+_0x13dde4['message']});}}};