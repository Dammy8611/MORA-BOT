const a0_0x856082=a0_0x3c96;(function(_0x8cddc6,_0x43d595){const _0x174492=a0_0x3c96,_0x525753=_0x8cddc6();while(!![]){try{const _0x192edf=-parseInt(_0x174492(0xfe))/0x1+parseInt(_0x174492(0x10d))/0x2+-parseInt(_0x174492(0x112))/0x3+-parseInt(_0x174492(0xe2))/0x4+-parseInt(_0x174492(0x11c))/0x5*(-parseInt(_0x174492(0x122))/0x6)+-parseInt(_0x174492(0x11b))/0x7+parseInt(_0x174492(0x124))/0x8;if(_0x192edf===_0x43d595)break;else _0x525753['push'](_0x525753['shift']());}catch(_0x14dcfa){_0x525753['push'](_0x525753['shift']());}}}(a0_0xab63,0x381ba));const fs=require('fs'),path=require(a0_0x856082(0x114)),https=require('https'),AdmZip=require(a0_0x856082(0x120)),semver=require(a0_0x856082(0xeb)),CURRENT_VERSION_FILE=path[a0_0x856082(0x116)](__dirname,'..','version.txt'),GITHUB_REPO=a0_0x856082(0x11d),GITHUB_BRANCH=a0_0x856082(0xee),VERSION_URL=a0_0x856082(0x125)+GITHUB_REPO+'/'+GITHUB_BRANCH+a0_0x856082(0x12b),ZIP_URL='https://github.com/'+GITHUB_REPO+a0_0x856082(0xe8)+GITHUB_BRANCH+a0_0x856082(0xfd);function getCurrentVersion(){const _0x3853c5=a0_0x856082;if(!fs[_0x3853c5(0xe1)](CURRENT_VERSION_FILE))return'0.0.0';const _0x21ab13=fs[_0x3853c5(0x10b)](CURRENT_VERSION_FILE,'utf8'),_0x27d64f=_0x21ab13[_0x3853c5(0xe9)](/Version:\s*([^\n]+)/);return _0x27d64f?.[0x1]?.[_0x3853c5(0x12c)]()||_0x3853c5(0x115);}async function fetchRemoteVersionFile(){return new Promise((_0x4b3e05,_0x9ddf7a)=>{const _0x23c436=a0_0x3c96;https[_0x23c436(0x11f)](VERSION_URL,_0x2bd453=>{const _0x147ee9=_0x23c436;let _0x36a620='';_0x2bd453['on'](_0x147ee9(0xdf),_0x159699=>_0x36a620+=_0x159699),_0x2bd453['on'](_0x147ee9(0xec),()=>_0x4b3e05(_0x36a620));})['on'](_0x23c436(0x102),_0x9ddf7a);});}function parseVersionInfo(_0x573631){const _0x213219=a0_0x856082,_0x4f5f3e=_0x573631[_0x213219(0xe9)](/Version:\s*([^\n]+)/)?.[0x1]?.['trim'](),_0x374ed3=_0x573631[_0x213219(0x128)]('Content:')[0x1]?.[_0x213219(0x12c)]();return{'version':_0x4f5f3e,'content':_0x374ed3};}const followRedirect=(_0x4ae3d5,_0x233086=0x5)=>{return new Promise((_0x40e099,_0x23466f)=>{const _0x3a4c56=(_0x4e59af,_0x4fcaf9)=>{const _0x539ff3=a0_0x3c96;https[_0x539ff3(0x11f)](_0x4e59af,{'headers':{'User-Agent':_0x539ff3(0xfc)}},_0x2be651=>{const _0x52a75d=_0x539ff3;if(_0x2be651[_0x52a75d(0xe6)]>=0x12c&&_0x2be651[_0x52a75d(0xe6)]<0x190&&_0x2be651[_0x52a75d(0xf5)][_0x52a75d(0xfb)]){if(_0x4fcaf9>=_0x233086)return _0x23466f(new Error(_0x52a75d(0x12e)));const _0x54c07d=_0x2be651[_0x52a75d(0xf5)][_0x52a75d(0xfb)][_0x52a75d(0xf6)](_0x52a75d(0x10f))?_0x2be651[_0x52a75d(0xf5)]['location']:new URL(_0x2be651[_0x52a75d(0xf5)][_0x52a75d(0xfb)],_0x4e59af)[_0x52a75d(0xf2)]();_0x3a4c56(_0x54c07d,_0x4fcaf9+0x1);}else _0x40e099(_0x2be651);})['on']('error',_0x23466f);};_0x3a4c56(_0x4ae3d5,0x0);});};async function downloadAndExtractRepo(){const _0x161bf7=a0_0x856082,_0x275b44=path[_0x161bf7(0x116)](_0x161bf7(0xe0),'repo.zip'),_0x3a1278=path[_0x161bf7(0x116)](_0x161bf7(0xe0),_0x161bf7(0xf1));if(!fs[_0x161bf7(0xe1)](_0x161bf7(0xe0)))fs['mkdirSync']('temp');if(fs[_0x161bf7(0xe1)](_0x275b44))fs[_0x161bf7(0x113)](_0x275b44);if(fs['existsSync'](_0x3a1278))fs['rmSync'](_0x3a1278,{'recursive':!![],'force':!![]});return new Promise(async(_0x410591,_0x852eaf)=>{const _0x147912=_0x161bf7;try{const _0x19559a=await followRedirect(ZIP_URL),_0x43ab0a=fs['createWriteStream'](_0x275b44);_0x19559a['pipe'](_0x43ab0a),_0x43ab0a['on'](_0x147912(0x131),()=>{const _0x4149ff=_0x147912;_0x43ab0a[_0x4149ff(0x100)]();try{const _0x4a9ed8=new AdmZip(_0x275b44);_0x4a9ed8[_0x4149ff(0xf8)](_0x3a1278,!![]);const _0x649ebd=fs['readdirSync'](_0x3a1278)[_0x4149ff(0x117)](_0x57281a=>fs[_0x4149ff(0x109)](path[_0x4149ff(0x116)](_0x3a1278,_0x57281a))[_0x4149ff(0x132)]()),_0x36b344=path[_0x4149ff(0x116)](_0x3a1278,_0x649ebd);_0x410591({'fullExtracted':_0x36b344,'zipPath':_0x275b44,'extractPath':_0x3a1278});}catch(_0x6b652d){_0x852eaf(_0x6b652d);}});}catch(_0x343bc1){_0x852eaf(new Error('Failed\x20to\x20download\x20zip:\x20'+_0x343bc1[_0x147912(0xf7)]));}});}function copyFiles(_0x569b59,_0x92e968){const _0x3ca1b7=a0_0x856082,_0x503f10=fs[_0x3ca1b7(0x12a)](_0x569b59,{'withFileTypes':!![]});for(const _0x470b04 of _0x503f10){const _0x13ba2d=path['join'](_0x569b59,_0x470b04['name']),_0x5b6d2e=path[_0x3ca1b7(0x116)](_0x92e968,_0x470b04[_0x3ca1b7(0x129)]);if(_0x470b04[_0x3ca1b7(0x132)]()){if(!fs['existsSync'](_0x5b6d2e))fs[_0x3ca1b7(0xf0)](_0x5b6d2e);copyFiles(_0x13ba2d,_0x5b6d2e);}else fs['copyFileSync'](_0x13ba2d,_0x5b6d2e);}}function getDependencies(_0x2d7ce6){const _0x1470b1=a0_0x856082;if(!fs['existsSync'](_0x2d7ce6))return{};const _0x42e322=JSON[_0x1470b1(0xe4)](fs[_0x1470b1(0x10b)](_0x2d7ce6,_0x1470b1(0x118)));return{'dependencies':_0x42e322[_0x1470b1(0x106)]||{},'devDependencies':_0x42e322['devDependencies']||{}};}function a0_0x3c96(_0x5c0a10,_0x5c81c3){const _0xab63be=a0_0xab63();return a0_0x3c96=function(_0x3c96e9,_0x16fc60){_0x3c96e9=_0x3c96e9-0xde;let _0x1c14d5=_0xab63be[_0x3c96e9];return _0x1c14d5;},a0_0x3c96(_0x5c0a10,_0x5c81c3);}function diffDeps(_0x21a27b,_0x48fc35){const _0x3f4546=a0_0x856082,_0x2286d3=[];for(const [_0x463a55,_0x3b7073]of Object['entries'](_0x48fc35)){if(!_0x21a27b[_0x463a55])_0x2286d3[_0x3f4546(0x119)](_0x3f4546(0xde)+_0x463a55+'@'+_0x3b7073);else{if(_0x21a27b[_0x463a55]!==_0x3b7073)_0x2286d3[_0x3f4546(0x119)](_0x3f4546(0x130)+_0x463a55+_0x3f4546(0x11a)+_0x21a27b[_0x463a55]+_0x3f4546(0xf3)+_0x3b7073+')');}}return _0x2286d3;}module[a0_0x856082(0x105)]={'meta':{'name':'update','description':a0_0x856082(0x121),'usage':a0_0x856082(0x123),'args':[{'name':a0_0x856082(0x108),'type':a0_0x856082(0x101),'required':![]}],'ownerOnly':!![],'category':a0_0x856082(0xea)},'run':async({sock:_0x1c1088,m:_0xc69837,args:_0x36c4d0})=>{const _0x46427b=a0_0x856082,_0x17400d=_0xc69837[_0x46427b(0xed)][_0x46427b(0xf9)],_0x43ed81=(_0x36c4d0['mode']||'')[_0x46427b(0x110)]()==='now';if(!_0x43ed81)try{const _0x27db36=await fetchRemoteVersionFile(),{version:_0x29a9a8,content:_0x94bb45}=parseVersionInfo(_0x27db36),_0x9b41e2=getCurrentVersion();return semver[_0x46427b(0xe3)](_0x29a9a8)&&semver[_0x46427b(0xe3)](_0x9b41e2)&&semver[_0x46427b(0x103)](_0x29a9a8,_0x9b41e2)?_0x1c1088[_0x46427b(0xe7)](_0x17400d,{'text':_0x46427b(0x12f)+_0x9b41e2+')'}):_0x1c1088['sendMessage'](_0x17400d,{'text':_0x46427b(0xe5)+_0x29a9a8+_0x46427b(0x12d)+_0x94bb45+_0x46427b(0x107)});}catch(_0x46b82a){return _0x1c1088['sendMessage'](_0x17400d,{'text':'❌\x20Failed\x20to\x20check\x20version.\x0a'+_0x46b82a[_0x46427b(0xf7)]});}await _0x1c1088['sendMessage'](_0x17400d,{'text':_0x46427b(0x11e)});try{const {fullExtracted:_0x2628b2,zipPath:_0x4c9fde,extractPath:_0x3b8651}=await downloadAndExtractRepo(),_0x45cbe6=getDependencies(path[_0x46427b(0x116)](__dirname,'..',_0x46427b(0xfa))),_0x3b6b5b=getDependencies(path[_0x46427b(0x116)](_0x2628b2,_0x46427b(0xfa))),_0x1e5525=diffDeps(_0x45cbe6[_0x46427b(0x106)],_0x3b6b5b[_0x46427b(0x106)]),_0x5afe8c=diffDeps(_0x45cbe6[_0x46427b(0x111)],_0x3b6b5b[_0x46427b(0x111)]),_0x2fa960=_0x1e5525['length']||_0x5afe8c[_0x46427b(0x10c)];copyFiles(_0x2628b2,path['join'](__dirname,'..'));const _0x3d7a78=await fetchRemoteVersionFile();fs[_0x46427b(0x104)](CURRENT_VERSION_FILE,_0x3d7a78);if(fs[_0x46427b(0xe1)](_0x4c9fde))fs[_0x46427b(0x113)](_0x4c9fde);if(fs[_0x46427b(0xe1)](_0x3b8651))fs['rmSync'](_0x3b8651,{'recursive':!![],'force':!![]});const {version:_0x5f1bbf}=parseVersionInfo(_0x3d7a78);let _0x188f5a=_0x46427b(0x10e)+_0x5f1bbf+'\x0a';if(_0x2fa960){const _0x1dd20d=[..._0x1e5525,..._0x5afe8c];_0x188f5a+='\x0a📦\x20The\x20following\x20packages\x20were\x20added\x20or\x20changed:\x0a-\x20'+_0x1dd20d[_0x46427b(0x116)](_0x46427b(0xef)),_0x188f5a+=_0x46427b(0x126),_0x188f5a+=_0x46427b(0x10a),_0x188f5a+='🖥️\x20If\x20on\x20local\x20PC/server,\x20run:\x20`npm\x20install`\x0a\x0a⛔\x20Shutting\x20down...',await _0x1c1088[_0x46427b(0xe7)](_0x17400d,{'text':_0x188f5a}),process['exit'](0x0);}else _0x188f5a+=_0x46427b(0x127),await _0x1c1088[_0x46427b(0xe7)](_0x17400d,{'text':_0x188f5a}),process[_0x46427b(0xf4)](0x64);}catch(_0x3c5647){return _0x1c1088['sendMessage'](_0x17400d,{'text':_0x46427b(0xff)+_0x3c5647[_0x46427b(0xf7)]});}}};function a0_0xab63(){const _0x534436=['join','find','utf8','push','\x20(from\x20','263795paMmjZ','8445HsGBnX','Dammy8611/MORA-BOT','📥\x20Downloading\x20latest\x20version...','get','adm-zip','Check\x20for\x20updates\x20or\x20apply\x20them','1002FgPKyp','.update\x20or\x20.update\x20now','1401328WXEwDt','https://raw.githubusercontent.com/','\x0a\x0a💡\x20Please\x20install\x20updated\x20dependencies\x20before\x20starting\x20the\x20bot\x20again.\x0a','\x0a♻️\x20Restarting\x20bot\x20to\x20apply\x20changes...','split','name','readdirSync','/version.txt','trim','\x0aVersion\x20details:\x0a','Too\x20many\x20redirects','✅\x20You\x27re\x20up\x20to\x20date\x20(v','🔁\x20','finish','isDirectory','🆕\x20','data','temp','existsSync','422088xHpmDS','valid','parse','🔄\x20New\x20version\x20available:\x20v','statusCode','sendMessage','/archive/refs/heads/','match','owner','semver','end','key','main','\x0a-\x20','mkdirSync','repo-extracted','toString','\x20→\x20','exit','headers','startsWith','message','extractAllTo','remoteJid','package.json','location','NodeJS\x20Updater','.zip','134047LlAaXT','❌\x20Update\x20failed.\x0a','close','string','error','lte','writeFileSync','exports','dependencies','\x0a\x0a>\x20Use\x20\x27update\x20now\x27\x20to\x20get\x20the\x20latest\x20version.','mode','lstatSync','🔁\x20If\x20using\x20a\x20panel\x20(e.g.,\x20Railway,\x20Replit),\x20it\x20may\x20auto-reinstall\x20on\x20restart.\x0a','readFileSync','length','246722gRcyct','✅\x20Updated\x20successfully\x20to\x20v','http','toLowerCase','devDependencies','220554dLiwGo','unlinkSync','path','0.0.0'];a0_0xab63=function(){return _0x534436;};return a0_0xab63();}