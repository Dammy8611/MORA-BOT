const a0_0x52d84a=a0_0x2119;function a0_0x2119(_0x30c8e0,_0x476a02){const _0x17c4a6=a0_0x17c4();return a0_0x2119=function(_0x21196f,_0x2ea52d){_0x21196f=_0x21196f-0x15c;let _0x804c7=_0x17c4a6[_0x21196f];return _0x804c7;},a0_0x2119(_0x30c8e0,_0x476a02);}(function(_0x4f339e,_0x9b84bf){const _0x1cf6d7=a0_0x2119,_0x5f5459=_0x4f339e();while(!![]){try{const _0x3d7132=-parseInt(_0x1cf6d7(0x18e))/0x1*(parseInt(_0x1cf6d7(0x169))/0x2)+parseInt(_0x1cf6d7(0x15e))/0x3*(-parseInt(_0x1cf6d7(0x16b))/0x4)+-parseInt(_0x1cf6d7(0x167))/0x5+-parseInt(_0x1cf6d7(0x17a))/0x6+parseInt(_0x1cf6d7(0x162))/0x7*(parseInt(_0x1cf6d7(0x173))/0x8)+parseInt(_0x1cf6d7(0x163))/0x9*(-parseInt(_0x1cf6d7(0x187))/0xa)+parseInt(_0x1cf6d7(0x171))/0xb;if(_0x3d7132===_0x9b84bf)break;else _0x5f5459['push'](_0x5f5459['shift']());}catch(_0x33e2d3){_0x5f5459['push'](_0x5f5459['shift']());}}}(a0_0x17c4,0x66606));const path=require(a0_0x52d84a(0x180)),fs=require('fs'),createWelcomeBanner=require(a0_0x52d84a(0x16f)),{settings}=require('../../settings'),lidToJid=require('../../utils/lidToJid'),groupActionsPath=path['join'](__dirname,a0_0x52d84a(0x183),a0_0x52d84a(0x170),a0_0x52d84a(0x160));function loadGroupActions(){const _0x288c47=a0_0x52d84a;if(!fs['existsSync'](groupActionsPath))return[];return JSON[_0x288c47(0x164)](fs[_0x288c47(0x17c)](groupActionsPath,_0x288c47(0x174)));}function replacePlaceholders(_0x34527e,_0x4cd5e3){const _0x468bc5=a0_0x52d84a;return _0x34527e[_0x468bc5(0x16c)](/\{\{(.*?)\}\}/gi,(_0x438997,_0x5daad7)=>{const _0x21a1a5=_0x468bc5,_0x1012b9=_0x5daad7['trim']()[_0x21a1a5(0x15d)]();return _0x4cd5e3[_0x1012b9]??'';});}const handleGroupUpdate=async(_0x44f6c6,_0x5e6957,_0x40b001)=>{const _0x2fa320=a0_0x52d84a,{id:_0x502fcd,action:_0x4f8529,participants:_0x517050}=_0x44f6c6;let _0x4219e0=_0x40b001[_0x2fa320(0x15c)](_0x502fcd);if(!_0x4219e0)try{_0x4219e0=await _0x5e6957[_0x2fa320(0x179)](_0x502fcd),_0x40b001[_0x2fa320(0x178)](_0x502fcd,_0x4219e0);}catch{return;}const _0x4cd507=loadGroupActions(),_0xf26e06=_0x4cd507[_0x2fa320(0x16e)](_0x197313=>_0x197313[_0x2fa320(0x161)]===_0x502fcd);if(!_0xf26e06)return;const _0x1343a9=async(_0x27762f,_0x114560,_0xc87ac5,_0x51cb71=![])=>{const _0xad2400=_0x2fa320,_0x597c4e=lidToJid(_0x27762f,_0x4219e0),_0x32fc0c=_0x597c4e[_0xad2400(0x18d)]('@')[0x0],_0x3b18d6=_0x4219e0['participants'][_0xad2400(0x17f)],_0x3e7d6f=await _0x5e6957[_0xad2400(0x188)](_0x597c4e,_0xad2400(0x18c)),_0x47631d={'user':'@'+_0x32fc0c,'groupname':_0x4219e0[_0xad2400(0x172)]||_0xad2400(0x18a),'membernumber':_0x3b18d6,'desc':_0x4219e0['desc']||_0xad2400(0x16a)},_0x50d84e=replacePlaceholders(_0x114560||_0xc87ac5,_0x47631d);if(_0x51cb71){const _0x3e0f98=await createWelcomeBanner({'avatarUrl':_0x3e7d6f,'groupName':_0x4219e0[_0xad2400(0x172)]||_0xad2400(0x18a),'memberNumber':_0x3b18d6}),_0xeeb505=path['join'](__dirname,'..','..',_0xad2400(0x189));!fs[_0xad2400(0x185)](_0xeeb505)&&fs[_0xad2400(0x17b)](_0xeeb505,{'recursive':!![]});const _0x2428a4='welcome_'+_0x32fc0c+_0xad2400(0x15f),_0x466450=path[_0xad2400(0x165)](_0xeeb505,_0x2428a4);fs['writeFileSync'](_0x466450,_0x3e0f98),await _0x5e6957[_0xad2400(0x176)](_0x502fcd,{'image':fs['readFileSync'](_0x466450),'caption':_0x50d84e,'mentions':[_0x597c4e]}),fs[_0xad2400(0x184)](_0x466450);}else await _0x5e6957[_0xad2400(0x176)](_0x502fcd,{'text':_0x50d84e,'mentions':[_0x597c4e]});};if(_0x4f8529===_0x2fa320(0x17d)&&_0x517050[_0x2fa320(0x17f)]>0x0&&settings[_0x2fa320(0x182)])for(const _0x1a98c7 of _0x517050){await _0x1343a9(_0x1a98c7,_0xf26e06[_0x2fa320(0x18b)],'Welcome\x20{{user}}\x20to\x20{{groupName}},\x20You\x20are\x20member\x20number\x20{{memberNumber}}.',_0xf26e06[_0x2fa320(0x17e)]);}if(_0x4f8529==='remove'&&_0x517050[_0x2fa320(0x17f)]>0x0&&settings['autoLeave'])for(const _0x2cb598 of _0x517050){await _0x1343a9(_0x2cb598,_0xf26e06[_0x2fa320(0x181)],'Goodbye!\x20{{user}}\x20has\x20left\x20the\x20group.');}if(_0x4f8529===_0x2fa320(0x16d)&&_0x517050[_0x2fa320(0x17f)]>0x0&&settings[_0x2fa320(0x168)])for(const _0x2dbb3f of _0x517050){await _0x1343a9(_0x2dbb3f,_0xf26e06[_0x2fa320(0x18f)],_0x2fa320(0x186));}if(_0x4f8529===_0x2fa320(0x166)&&_0x517050[_0x2fa320(0x17f)]>0x0&&settings['autoDemote'])for(const _0x1027b1 of _0x517050){await _0x1343a9(_0x1027b1,_0xf26e06[_0x2fa320(0x177)],_0x2fa320(0x175));}};function a0_0x17c4(){const _0x345869=['temp','Group\x20Name','welcomeMessage','image','split','17308rMYtxL','promoteMessage','get','toLowerCase','20379AGAgcB','.png','groupActions.json','groupID','2268595bsxSay','243zqtREu','parse','join','demote','3171775UNhKlY','autoPromote','86VzmeND','No\x20description\x20available.','124zTabtM','replace','promote','find','../../utils/banner','database','23620641wlpXnS','subject','16wAyZBw','utf8','{{user}}\x20has\x20been\x20demoted\x20from\x20admin.','sendMessage','demoteMessage','set','groupMetadata','2076288HjJcfy','mkdirSync','readFileSync','add','welcomeBanner','length','path','leaveMessage','autoWelcome','../..','unlinkSync','existsSync','{{user}}\x20has\x20been\x20promoted\x20to\x20admin.','163310xqCmCf','profilePictureUrl'];a0_0x17c4=function(){return _0x345869;};return a0_0x17c4();}module['exports']=handleGroupUpdate;