const a0_0x4d0b20=a0_0x80ec;function a0_0x80ec(_0x472b27,_0x3b4377){const _0x5aa688=a0_0x5aa6();return a0_0x80ec=function(_0x80ece4,_0x172970){_0x80ece4=_0x80ece4-0x18d;let _0x495b73=_0x5aa688[_0x80ece4];return _0x495b73;},a0_0x80ec(_0x472b27,_0x3b4377);}(function(_0x1524f0,_0x2b0825){const _0x410a29=a0_0x80ec,_0x3ebdc2=_0x1524f0();while(!![]){try{const _0x1c09d0=-parseInt(_0x410a29(0x1b3))/0x1*(-parseInt(_0x410a29(0x1ae))/0x2)+parseInt(_0x410a29(0x19f))/0x3+-parseInt(_0x410a29(0x1af))/0x4+-parseInt(_0x410a29(0x199))/0x5+parseInt(_0x410a29(0x1a2))/0x6+-parseInt(_0x410a29(0x190))/0x7*(parseInt(_0x410a29(0x1a4))/0x8)+-parseInt(_0x410a29(0x1ab))/0x9;if(_0x1c09d0===_0x2b0825)break;else _0x3ebdc2['push'](_0x3ebdc2['shift']());}catch(_0x1af5d2){_0x3ebdc2['push'](_0x3ebdc2['shift']());}}}(a0_0x5aa6,0x811c0));const path=require(a0_0x4d0b20(0x1b5)),fs=require('fs'),createWelcomeBanner=require(a0_0x4d0b20(0x1a9)),{settings}=require('../../settings'),lidToJid=require('../../utils/lidToJid'),groupActionsPath=path[a0_0x4d0b20(0x1b1)](__dirname,'../..','database','groupActions.json');function loadGroupActions(){const _0x345ba7=a0_0x4d0b20;if(!fs['existsSync'](groupActionsPath))return[];return JSON[_0x345ba7(0x1b8)](fs[_0x345ba7(0x193)](groupActionsPath,'utf8'));}function replacePlaceholders(_0x26f3ee,_0x10ba6f){const _0x414ff0=a0_0x4d0b20;return _0x26f3ee[_0x414ff0(0x191)](/\{\{(.*?)\}\}/gi,(_0x4c2449,_0x72beb7)=>{const _0xcbe9df=_0x414ff0,_0x3f0342=_0x72beb7[_0xcbe9df(0x1b0)]()[_0xcbe9df(0x197)]();return _0x10ba6f[_0x3f0342]??'';});}const handleGroupUpdate=async(_0x9a0a85,_0x118c58,_0x3a60cb)=>{const _0x2f8bd5=a0_0x4d0b20,{id:_0xcf7b9,action:_0x597870,participants:_0x48b215}=_0x9a0a85;let _0x5a55ca=_0x3a60cb[_0x2f8bd5(0x196)](_0xcf7b9);if(!_0x5a55ca)try{_0x5a55ca=await _0x118c58[_0x2f8bd5(0x192)](_0xcf7b9),_0x3a60cb[_0x2f8bd5(0x19c)](_0xcf7b9,_0x5a55ca);}catch{return;}const _0x318835=loadGroupActions(),_0x12a2b1=_0x318835[_0x2f8bd5(0x1a0)](_0x1df3af=>_0x1df3af[_0x2f8bd5(0x1a8)]===_0xcf7b9);if(!_0x12a2b1)return;const _0x45a7c2=async(_0x4d7c3b,_0x5a8785,_0x28400c,_0x415d31=![])=>{const _0x33506e=_0x2f8bd5,_0x1a78c8=lidToJid(_0x4d7c3b,_0x5a55ca),_0x3c2e08=_0x1a78c8[_0x33506e(0x1ac)]('@')[0x0],_0x10293b=_0x5a55ca[_0x33506e(0x1a1)]['length'],_0x1228bb=await _0x118c58[_0x33506e(0x1b6)](_0x1a78c8,_0x33506e(0x19e)),_0x563c6c={'user':'@'+_0x3c2e08,'groupname':_0x5a55ca['subject']||_0x33506e(0x194),'membernumber':_0x10293b,'desc':_0x5a55ca[_0x33506e(0x1b7)]||_0x33506e(0x18f)},_0x5cdecf=replacePlaceholders(_0x5a8785||_0x28400c,_0x563c6c);if(_0x415d31){const _0x2d7af3=await createWelcomeBanner({'avatarUrl':_0x1228bb,'groupName':_0x5a55ca[_0x33506e(0x1aa)]||_0x33506e(0x194),'memberNumber':_0x10293b}),_0x313167=path['join'](__dirname,'..','..',_0x33506e(0x19d));!fs['existsSync'](_0x313167)&&fs[_0x33506e(0x198)](_0x313167,{'recursive':!![]});const _0x4761ca='welcome_'+_0x3c2e08+'.png',_0x159d0f=path['join'](_0x313167,_0x4761ca);fs['writeFileSync'](_0x159d0f,_0x2d7af3),await _0x118c58['sendMessage'](_0xcf7b9,{'image':fs['readFileSync'](_0x159d0f),'caption':_0x5cdecf,'mentions':[_0x1a78c8]}),fs['unlinkSync'](_0x159d0f);}else await _0x118c58['sendMessage'](_0xcf7b9,{'text':_0x5cdecf,'mentions':[_0x1a78c8]});};if(_0x597870===_0x2f8bd5(0x1ad)&&_0x48b215['length']>0x0&&settings[_0x2f8bd5(0x18e)])for(const _0x3e69f9 of _0x48b215){await _0x45a7c2(_0x3e69f9,_0x12a2b1[_0x2f8bd5(0x1b9)],'Welcome\x20{{user}}\x20to\x20{{groupName}},\x20You\x20are\x20member\x20number\x20{{memberNumber}}.',_0x12a2b1[_0x2f8bd5(0x195)]);}if(_0x597870===_0x2f8bd5(0x1b2)&&_0x48b215['length']>0x0&&settings[_0x2f8bd5(0x1a3)])for(const _0x5d44d5 of _0x48b215){await _0x45a7c2(_0x5d44d5,_0x12a2b1[_0x2f8bd5(0x19a)],'Goodbye!\x20{{user}}\x20has\x20left\x20the\x20group.');}if(_0x597870==='promote'&&_0x48b215[_0x2f8bd5(0x19b)]>0x0&&settings['autoPromote'])for(const _0x37317a of _0x48b215){await _0x45a7c2(_0x37317a,_0x12a2b1[_0x2f8bd5(0x1a6)],_0x2f8bd5(0x1a5));}if(_0x597870==='demote'&&_0x48b215[_0x2f8bd5(0x19b)]>0x0&&settings[_0x2f8bd5(0x1b4)])for(const _0x93e62b of _0x48b215){await _0x45a7c2(_0x93e62b,_0x12a2b1[_0x2f8bd5(0x1a7)],'{{user}}\x20has\x20been\x20demoted\x20from\x20admin.');}};module[a0_0x4d0b20(0x18d)]=handleGroupUpdate;function a0_0x5aa6(){const _0x69b6e9=['profilePictureUrl','desc','parse','welcomeMessage','exports','autoWelcome','No\x20description\x20available.','84707PJzjva','replace','groupMetadata','readFileSync','Group\x20Name','welcomeBanner','get','toLowerCase','mkdirSync','1355470wugDVV','leaveMessage','length','set','temp','image','3052143TPifAv','find','participants','5220030lUaFzA','autoLeave','104czaFTy','{{user}}\x20has\x20been\x20promoted\x20to\x20admin.','promoteMessage','demoteMessage','groupID','../../utils/banner','subject','7752618nyJrqs','split','add','4djcJnE','2209644hFNPLl','trim','join','remove','241833CMRBqQ','autoDemote','path'];a0_0x5aa6=function(){return _0x69b6e9;};return a0_0x5aa6();}