const a0_0x321181=a0_0x4d55;function a0_0x4067(){const _0x5caa6c=['repo.zip','📥\x20Downloading\x20latest\x20version...','remoteJid','\x0aVersion\x20details:\x0a','tmpdir','https','/version.txt','46845dJVRky','mode','❌\x20Update\x20failed.\x0a','name','rmSync','4030768HOoujP','adm-zip','readdirSync','/archive/refs/heads/','join','get','writeFileSync','finish','121340UzTqwF','2002988hXjuhM','Dammy8611/MORA-BOT','pipe','error','extractAllTo','.zip','216NjDrPS','repo-extracted','match','\x0a\x0a>\x20Use\x20\x27update\x20now\x27\x20to\x20get\x20the\x20latest\x20version.','isDirectory','utf8','6946320nMYEzg','toLowerCase','🔄\x20New\x20version\x20available:\x20v','unlinkSync','exports','createWriteStream','trim','mkdirSync','path','now','key','data','3LScOvl','message','4690348dMmBRf','sendMessage','❌\x20Failed\x20to\x20check\x20version.\x0a','660100OAOWJy','existsSync','string'];a0_0x4067=function(){return _0x5caa6c;};return a0_0x4067();}(function(_0x163e9f,_0x45d5f2){const _0x2a11db=a0_0x4d55,_0x37e948=_0x163e9f();while(!![]){try{const _0x1fe880=-parseInt(_0x2a11db(0xf2))/0x1+parseInt(_0x2a11db(0xf3))/0x2+parseInt(_0x2a11db(0xd6))/0x3*(parseInt(_0x2a11db(0xd8))/0x4)+parseInt(_0x2a11db(0xdb))/0x5+-parseInt(_0x2a11db(0xca))/0x6+-parseInt(_0x2a11db(0xea))/0x7+-parseInt(_0x2a11db(0xf9))/0x8*(-parseInt(_0x2a11db(0xe5))/0x9);if(_0x1fe880===_0x45d5f2)break;else _0x37e948['push'](_0x37e948['shift']());}catch(_0x4ed778){_0x37e948['push'](_0x37e948['shift']());}}}(a0_0x4067,0x90788));const fs=require('fs'),path=require(a0_0x321181(0xd2)),https=require(a0_0x321181(0xe3)),AdmZip=require(a0_0x321181(0xeb)),os=require('os'),CURRENT_VERSION_FILE=path[a0_0x321181(0xee)](__dirname,'..','version.txt'),GITHUB_REPO=a0_0x321181(0xf4),GITHUB_BRANCH='main',VERSION_URL='https://raw.githubusercontent.com/'+GITHUB_REPO+'/'+GITHUB_BRANCH+a0_0x321181(0xe4),ZIP_URL='https://github.com/'+GITHUB_REPO+a0_0x321181(0xed)+GITHUB_BRANCH+a0_0x321181(0xf8);function getCurrentVersion(){const _0x47177d=a0_0x321181;if(!fs['existsSync'](CURRENT_VERSION_FILE))return'0.0.0';const _0x3192dc=fs['readFileSync'](CURRENT_VERSION_FILE,_0x47177d(0xc9)),_0x38a8dd=_0x3192dc[_0x47177d(0xfb)](/Version:\s*([^\n]+)/);return _0x38a8dd?.[0x1]?.[_0x47177d(0xd0)]()||'0.0.0';}function a0_0x4d55(_0x6b90f2,_0x1802b4){const _0x40674f=a0_0x4067();return a0_0x4d55=function(_0x4d5598,_0x40bd51){_0x4d5598=_0x4d5598-0xc9;let _0x2c8941=_0x40674f[_0x4d5598];return _0x2c8941;},a0_0x4d55(_0x6b90f2,_0x1802b4);}async function fetchRemoteVersionFile(){return new Promise((_0x503f27,_0x1e9cfb)=>{const _0x4cb83a=a0_0x4d55;https[_0x4cb83a(0xef)](VERSION_URL,_0x20e40f=>{const _0x5c1834=_0x4cb83a;let _0xfc9e6f='';_0x20e40f['on'](_0x5c1834(0xd5),_0x39e112=>_0xfc9e6f+=_0x39e112),_0x20e40f['on']('end',()=>_0x503f27(_0xfc9e6f));})['on'](_0x4cb83a(0xf6),_0x1e9cfb);});}function parseVersionInfo(_0x381705){const _0x589c1a=a0_0x321181,_0x13fc82=_0x381705[_0x589c1a(0xfb)](/Version:\s*([^\n]+)/)?.[0x1]?.[_0x589c1a(0xd0)](),_0x53c125=_0x381705['split']('Content:')[0x1]?.[_0x589c1a(0xd0)]();return{'version':_0x13fc82,'content':_0x53c125};}async function downloadAndExtractRepo(){const _0x566003=a0_0x321181,_0x58702e=path[_0x566003(0xee)](os[_0x566003(0xe2)](),_0x566003(0xde)),_0x91e54d=path['join'](os[_0x566003(0xe2)](),_0x566003(0xfa));if(fs['existsSync'](_0x58702e))fs['unlinkSync'](_0x58702e);if(fs[_0x566003(0xdc)](_0x91e54d))fs[_0x566003(0xe9)](_0x91e54d,{'recursive':!![],'force':!![]});return new Promise((_0x1d61a6,_0x2171e8)=>{const _0x135109=_0x566003,_0x2219ec=fs[_0x135109(0xcf)](_0x58702e);https[_0x135109(0xef)](ZIP_URL,_0x334737=>{const _0x152fda=_0x135109;_0x334737[_0x152fda(0xf5)](_0x2219ec),_0x2219ec['on'](_0x152fda(0xf1),()=>{const _0x49f0b0=_0x152fda;_0x2219ec['close']();try{const _0x5c3210=new AdmZip(_0x58702e);_0x5c3210[_0x49f0b0(0xf7)](_0x91e54d,!![]);const _0x28a638=fs[_0x49f0b0(0xec)](_0x91e54d)['find'](_0x122c5b=>fs['lstatSync'](path[_0x49f0b0(0xee)](_0x91e54d,_0x122c5b))['isDirectory']()),_0x3ed8a3=path[_0x49f0b0(0xee)](_0x91e54d,_0x28a638);_0x1d61a6({'fullExtracted':_0x3ed8a3,'zipPath':_0x58702e,'extractPath':_0x91e54d});}catch(_0x70342d){_0x2171e8(_0x70342d);}});})['on'](_0x135109(0xf6),_0x2171e8);});}function copyFiles(_0x1f19a0,_0x34a481){const _0x2487a8=a0_0x321181,_0x1cfa28=fs[_0x2487a8(0xec)](_0x1f19a0,{'withFileTypes':!![]});for(const _0x43d550 of _0x1cfa28){const _0x52f27d=path[_0x2487a8(0xee)](_0x1f19a0,_0x43d550[_0x2487a8(0xe8)]),_0x4ff579=path[_0x2487a8(0xee)](_0x34a481,_0x43d550[_0x2487a8(0xe8)]);if(_0x43d550[_0x2487a8(0xfd)]()){if(!fs[_0x2487a8(0xdc)](_0x4ff579))fs[_0x2487a8(0xd1)](_0x4ff579);copyFiles(_0x52f27d,_0x4ff579);}else fs['copyFileSync'](_0x52f27d,_0x4ff579);}}module[a0_0x321181(0xce)]={'meta':{'name':'update','description':'Check\x20for\x20updates\x20or\x20apply\x20them','usage':'.update\x20or\x20.update\x20now','args':[{'name':a0_0x321181(0xe6),'type':a0_0x321181(0xdd),'required':![]}],'ownerOnly':!![],'category':'owner'},'run':async({sock:_0x41b825,m:_0x1615e4,args:_0x3a5aad})=>{const _0x275eca=a0_0x321181,_0x5b2786=_0x1615e4[_0x275eca(0xd4)][_0x275eca(0xe0)],_0x29c4da=(_0x3a5aad[_0x275eca(0xe6)]||'')[_0x275eca(0xcb)]()===_0x275eca(0xd3);if(!_0x29c4da)try{const _0x510c2d=await fetchRemoteVersionFile(),{version:_0x5b2bf2,content:_0x331597}=parseVersionInfo(_0x510c2d),_0x278ab9=getCurrentVersion();return _0x5b2bf2===_0x278ab9?_0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':'✅\x20You\x27re\x20up\x20to\x20date\x20(v'+_0x278ab9+')'}):_0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':_0x275eca(0xcc)+_0x5b2bf2+_0x275eca(0xe1)+_0x331597+_0x275eca(0xfc)});}catch(_0x4de541){return _0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':_0x275eca(0xda)+_0x4de541[_0x275eca(0xd7)]});}else{await _0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':_0x275eca(0xdf)});try{const {fullExtracted:_0x1e480c,zipPath:_0x92b11b,extractPath:_0x335244}=await downloadAndExtractRepo();copyFiles(_0x1e480c,path[_0x275eca(0xee)](__dirname,'..'));const _0x136d58=await fetchRemoteVersionFile();fs[_0x275eca(0xf0)](CURRENT_VERSION_FILE,_0x136d58);const {version:_0x37e29f}=parseVersionInfo(_0x136d58);if(fs['existsSync'](_0x92b11b))fs[_0x275eca(0xcd)](_0x92b11b);if(fs[_0x275eca(0xdc)](_0x335244))fs[_0x275eca(0xe9)](_0x335244,{'recursive':!![],'force':!![]});await _0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':'✅\x20Updated\x20successfully\x20to\x20v'+_0x37e29f});}catch(_0x48f9b6){return _0x41b825[_0x275eca(0xd9)](_0x5b2786,{'text':_0x275eca(0xe7)+_0x48f9b6[_0x275eca(0xd7)]});}}}};